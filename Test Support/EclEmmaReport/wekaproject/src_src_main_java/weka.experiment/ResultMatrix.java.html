<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>ResultMatrix.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (Nov 28, 2015 2:34:31 PM)</a> &gt; <a href="../../index.html" class="el_group">wekaproject</a> &gt; <a href="../index.html" class="el_bundle">src/src/main/java</a> &gt; <a href="index.source.html" class="el_package">weka.experiment</a> &gt; <span class="el_source">ResultMatrix.java</span></div><h1>ResultMatrix.java</h1><pre class="source lang-java linenums">/*
 *    This program is free software; you can redistribute it and/or modify
 *    it under the terms of the GNU General Public License as published by
 *    the Free Software Foundation; either version 2 of the License, or
 *    (at your option) any later version.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU General Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License
 *    along with this program; if not, write to the Free Software
 *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

/*
 * ResultMatrix.java
 * Copyright (C) 2005 University of Waikato, Hamilton, New Zealand
 *
 */

package weka.experiment;

import weka.core.RevisionHandler;
import weka.core.Utils;

import java.io.Serializable;
import java.util.Enumeration;
import java.util.Vector;

/**
 * This matrix is a container for the datasets and classifier setups and 
 * their statistics. Derived classes output the data in different formats.
 * Derived classes need to implement the following methods:
 * &lt;ul&gt;
 *   &lt;li&gt;&lt;code&gt;toStringMatrix()&lt;/code&gt;&lt;/li&gt;
 *   &lt;li&gt;&lt;code&gt;toStringKey()&lt;/code&gt;&lt;/li&gt;
 *   &lt;li&gt;&lt;code&gt;toStringHeader()&lt;/code&gt;&lt;/li&gt;
 *   &lt;li&gt;&lt;code&gt;toStringSummary()&lt;/code&gt;&lt;/li&gt;
 *   &lt;li&gt;&lt;code&gt;toStringRanking()&lt;/code&gt;&lt;/li&gt;
 * &lt;/ul&gt;
 *
 *
 * @author FracPete (fracpete at waikato dot ac dot nz)
 * @version $Revision: 1.9 $
 * @see #toStringMatrix()
 * @see #toStringKey()
 * @see #toStringHeader()
 * @see #toStringSummary()
 * @see #toStringRanking()
 */
public abstract class ResultMatrix
  implements Serializable, RevisionHandler {

  /** for serialization */
  private static final long serialVersionUID = 4487179306428209739L;
  
  /** tie */
  public final static int SIGNIFICANCE_TIE = 0;

  /** win */
  public final static int SIGNIFICANCE_WIN = 1;

  /** loss */
  public final static int SIGNIFICANCE_LOSS = 2;

  /** tie string */
<span class="nc" id="L69">  public String TIE_STRING = &quot; &quot;;</span>

  /** win string */
<span class="nc" id="L72">  public String WIN_STRING = &quot;v&quot;;</span>

  /** loss string */
<span class="nc" id="L75">  public String LOSS_STRING = &quot;*&quot;;</span>

  /** the left parentheses for enumerating cols/rows */
<span class="nc" id="L78">  public String LEFT_PARENTHESES = &quot;(&quot;;</span>

  /** the right parentheses for enumerating cols/rows */
<span class="nc" id="L81">  public String RIGHT_PARENTHESES = &quot;)&quot;;</span>

  /** the column names */
<span class="nc" id="L84">  protected String[] m_ColNames = null;</span>

  /** the row names */
<span class="nc" id="L87">  protected String[] m_RowNames = null;</span>

  /** whether a column is hidden */
<span class="nc" id="L90">  protected boolean[] m_ColHidden = null;</span>
  
  /** whether a row is hidden */
<span class="nc" id="L93">  protected boolean[] m_RowHidden = null;</span>
  
  /** the significance */
<span class="nc" id="L96">  protected int[][] m_Significance = null;</span>

  /** the values */
<span class="nc" id="L99">  protected double[][] m_Mean = null;</span>

  /** the standard deviation */
<span class="nc" id="L102">  protected double[][] m_StdDev = null;</span>

  /** the counts for the different datasets */
<span class="nc" id="L105">  protected double[] m_Counts = null;</span>

  /** the standard mean precision */
  protected int m_MeanPrec;

  /** the standard std. deviation preicision */
  protected int m_StdDevPrec;

  /** whether std. deviations are printed as well */
  protected boolean m_ShowStdDev;

  /** whether the average for each column should be printed */
  protected boolean m_ShowAverage;
  
  /** whether the names or numbers are output as column declarations */
  protected boolean m_PrintColNames;

  /** whether the names or numbers are output as row declarations */
  protected boolean m_PrintRowNames;

  /** whether a &quot;(x)&quot; is printed before each column name with &quot;x&quot; as the
   * index */
  protected boolean m_EnumerateColNames;

  /** whether a &quot;(x)&quot; is printed before each row name with &quot;x&quot; as the index */
  protected boolean m_EnumerateRowNames;

  /** the size of the names of the columns */
  protected int m_ColNameWidth;

  /** the size of the names of the rows */
  protected int m_RowNameWidth;

  /** the size of the mean columns */
  protected int m_MeanWidth;

  /** the size of the std dev columns */
  protected int m_StdDevWidth;

  /** the size of the significance columns */
  protected int m_SignificanceWidth;

  /** the size of the counts */
  protected int m_CountWidth;

  /** contains the keys for the header */
<span class="nc" id="L151">  protected Vector m_HeaderKeys = null;</span>

  /** contains the values for the header */
<span class="nc" id="L154">  protected Vector m_HeaderValues = null;</span>

  /** the non-significant wins */
<span class="nc" id="L157">  protected int[][] m_NonSigWins = null;</span>

  /** the significant wins */
<span class="nc" id="L160">  protected int[][] m_Wins = null;</span>

  /** the wins in ranking */
<span class="nc" id="L163">  protected int[] m_RankingWins = null;</span>

  /** the losses in ranking */
<span class="nc" id="L166">  protected int[] m_RankingLosses = null;</span>

  /** the difference between wins and losses */
<span class="nc" id="L169">  protected int[] m_RankingDiff = null;</span>

  /** the ordering of the rows */
<span class="nc" id="L172">  protected int[] m_RowOrder = null;</span>

  /** the ordering of the columns */
<span class="nc" id="L175">  protected int[] m_ColOrder = null;</span>

  /** whether to remove the filter name from the dataaset name */
<span class="nc" id="L178">  protected boolean m_RemoveFilterName = false;</span>
  
  /**
   * initializes the matrix as 1x1 matrix
   */
  public ResultMatrix() {
<span class="nc" id="L184">    this(1, 1);</span>
<span class="nc" id="L185">  }</span>
  
  /**
   * initializes the matrix with the given dimensions
   */
<span class="nc" id="L190">  public ResultMatrix(int cols, int rows) {</span>
<span class="nc" id="L191">    setSize(cols, rows);</span>
<span class="nc" id="L192">    clear();</span>
<span class="nc" id="L193">  }</span>

  /**
   * initializes the matrix with the values from the given matrix
   * @param matrix      the matrix to get the values from
   */
<span class="nc" id="L199">  public ResultMatrix(ResultMatrix matrix) {</span>
<span class="nc" id="L200">    assign(matrix);</span>
<span class="nc" id="L201">  }</span>

  /**
   * returns the name of the output format
   */
  public abstract String getDisplayName();

  /**
   * acquires the data from the given matrix
   */
  public void assign(ResultMatrix matrix) {
    int         i;
    int         n;
    
<span class="nc" id="L215">    setSize(matrix.getColCount(), matrix.getRowCount());</span>
    
    // output parameters
<span class="nc" id="L218">    TIE_STRING          = matrix.TIE_STRING;</span>
<span class="nc" id="L219">    WIN_STRING          = matrix.WIN_STRING;</span>
<span class="nc" id="L220">    LOSS_STRING         = matrix.LOSS_STRING;</span>
<span class="nc" id="L221">    LEFT_PARENTHESES    = matrix.LEFT_PARENTHESES;</span>
<span class="nc" id="L222">    RIGHT_PARENTHESES   = matrix.RIGHT_PARENTHESES;</span>
<span class="nc" id="L223">    m_MeanPrec          = matrix.m_MeanPrec;</span>
<span class="nc" id="L224">    m_StdDevPrec        = matrix.m_StdDevPrec;</span>
<span class="nc" id="L225">    m_ShowStdDev        = matrix.m_ShowStdDev;</span>
<span class="nc" id="L226">    m_ShowAverage       = matrix.m_ShowAverage;</span>
<span class="nc" id="L227">    m_PrintColNames     = matrix.m_PrintColNames;</span>
<span class="nc" id="L228">    m_PrintRowNames     = matrix.m_PrintRowNames;</span>
<span class="nc" id="L229">    m_EnumerateColNames = matrix.m_EnumerateColNames;</span>
<span class="nc" id="L230">    m_EnumerateRowNames = matrix.m_EnumerateRowNames;</span>
<span class="nc" id="L231">    m_RowNameWidth      = matrix.m_RowNameWidth;</span>
<span class="nc" id="L232">    m_MeanWidth         = matrix.m_MeanWidth;</span>
<span class="nc" id="L233">    m_StdDevWidth       = matrix.m_StdDevWidth;</span>
<span class="nc" id="L234">    m_SignificanceWidth = matrix.m_SignificanceWidth;</span>
<span class="nc" id="L235">    m_CountWidth        = matrix.m_CountWidth;</span>
<span class="nc" id="L236">    m_RemoveFilterName  = matrix.m_RemoveFilterName;</span>
    
    // header
<span class="nc" id="L239">    m_HeaderKeys   = (Vector) matrix.m_HeaderKeys.clone();</span>
<span class="nc" id="L240">    m_HeaderValues = (Vector) matrix.m_HeaderValues.clone();</span>

    // matrix
<span class="nc bnc" id="L243" title="All 2 branches missed.">    for (i = 0; i &lt; matrix.m_Mean.length; i++) {</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">      for (n = 0; n &lt; matrix.m_Mean[i].length; n++) {</span>
<span class="nc" id="L245">        m_Mean[i][n]         = matrix.m_Mean[i][n];</span>
<span class="nc" id="L246">        m_StdDev[i][n]       = matrix.m_StdDev[i][n];</span>
<span class="nc" id="L247">        m_Significance[i][n] = matrix.m_Significance[i][n];</span>
      }
    }

<span class="nc bnc" id="L251" title="All 2 branches missed.">    for (i = 0; i &lt; matrix.m_ColNames.length; i++) {</span>
<span class="nc" id="L252">      m_ColNames[i]  = matrix.m_ColNames[i];</span>
<span class="nc" id="L253">      m_ColHidden[i] = matrix.m_ColHidden[i];</span>
    }

<span class="nc bnc" id="L256" title="All 2 branches missed.">    for (i = 0; i &lt; matrix.m_RowNames.length; i++) {</span>
<span class="nc" id="L257">      m_RowNames[i]  = matrix.m_RowNames[i];</span>
<span class="nc" id="L258">      m_RowHidden[i] = matrix.m_RowHidden[i];</span>
    }

<span class="nc bnc" id="L261" title="All 2 branches missed.">    for (i = 0; i &lt; matrix.m_Counts.length; i++)</span>
<span class="nc" id="L262">      m_Counts[i] = matrix.m_Counts[i];</span>

    // summary
<span class="nc bnc" id="L265" title="All 2 branches missed.">    if (matrix.m_NonSigWins != null) {</span>
<span class="nc" id="L266">      m_NonSigWins = new int[matrix.m_NonSigWins.length][];</span>
<span class="nc" id="L267">      m_Wins       = new int[matrix.m_NonSigWins.length][];</span>
<span class="nc bnc" id="L268" title="All 2 branches missed.">      for (i = 0; i &lt; matrix.m_NonSigWins.length; i++) {</span>
<span class="nc" id="L269">        m_NonSigWins[i] = new int[matrix.m_NonSigWins[i].length];</span>
<span class="nc" id="L270">        m_Wins[i]       = new int[matrix.m_NonSigWins[i].length];</span>

<span class="nc bnc" id="L272" title="All 2 branches missed.">        for (n = 0; n &lt; matrix.m_NonSigWins[i].length; n++) {</span>
<span class="nc" id="L273">          m_NonSigWins[i][n] = matrix.m_NonSigWins[i][n];</span>
<span class="nc" id="L274">          m_Wins[i][n]       = matrix.m_Wins[i][n];</span>
        }
      }
    }

    // ranking
<span class="nc bnc" id="L280" title="All 2 branches missed.">    if (matrix.m_RankingWins != null) {</span>
<span class="nc" id="L281">      m_RankingWins   = new int[matrix.m_RankingWins.length];</span>
<span class="nc" id="L282">      m_RankingLosses = new int[matrix.m_RankingWins.length];</span>
<span class="nc" id="L283">      m_RankingDiff   = new int[matrix.m_RankingWins.length];</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">      for (i = 0; i &lt; matrix.m_RankingWins.length; i++) {</span>
<span class="nc" id="L285">        m_RankingWins[i]   = matrix.m_RankingWins[i];</span>
<span class="nc" id="L286">        m_RankingLosses[i] = matrix.m_RankingLosses[i];</span>
<span class="nc" id="L287">        m_RankingDiff[i]   = matrix.m_RankingDiff[i];</span>
      }
    }
<span class="nc" id="L290">  }</span>

  /**
   * removes the stored data and the ordering, but retains the dimensions of
   * the matrix
   */
  public void clear() {
<span class="nc" id="L297">    m_MeanPrec          = 2;</span>
<span class="nc" id="L298">    m_StdDevPrec        = 2;</span>
<span class="nc" id="L299">    m_ShowStdDev        = false;</span>
<span class="nc" id="L300">    m_ShowAverage       = false;</span>
<span class="nc" id="L301">    m_PrintColNames     = true;</span>
<span class="nc" id="L302">    m_PrintRowNames     = true;</span>
<span class="nc" id="L303">    m_EnumerateColNames = true;</span>
<span class="nc" id="L304">    m_EnumerateRowNames = false;</span>
<span class="nc" id="L305">    m_RowNameWidth      = 0;</span>
<span class="nc" id="L306">    m_ColNameWidth      = 0;</span>
<span class="nc" id="L307">    m_MeanWidth         = 0;</span>
<span class="nc" id="L308">    m_StdDevWidth       = 0;</span>
<span class="nc" id="L309">    m_SignificanceWidth = 0;</span>
<span class="nc" id="L310">    m_CountWidth        = 0;</span>

<span class="nc" id="L312">    setSize(getColCount(), getRowCount());</span>
<span class="nc" id="L313">  }</span>

  /**
   * clears the content of the matrix and sets the new size
   * @param cols        the number of mean columns
   * @param rows        the number of mean rows
   */
  public void setSize(int cols, int rows) {
    int       i;
    int       n;

<span class="nc" id="L324">    m_ColNames     = new String[cols];</span>
<span class="nc" id="L325">    m_RowNames     = new String[rows];</span>
<span class="nc" id="L326">    m_Counts       = new double[rows];</span>
<span class="nc" id="L327">    m_ColHidden    = new boolean[cols];</span>
<span class="nc" id="L328">    m_RowHidden    = new boolean[rows];</span>
<span class="nc" id="L329">    m_Mean         = new double[rows][cols];</span>
<span class="nc" id="L330">    m_Significance = new int[rows][cols];</span>
<span class="nc" id="L331">    m_StdDev       = new double[rows][cols];</span>
<span class="nc" id="L332">    m_ColOrder     = null;</span>
<span class="nc" id="L333">    m_RowOrder     = null;</span>

    // NaN means that there exists no value! -&gt; toArray()
<span class="nc bnc" id="L336" title="All 2 branches missed.">    for (i = 0; i &lt; m_Mean.length; i++) {</span>
<span class="nc bnc" id="L337" title="All 2 branches missed.">      for (n = 0; n &lt; m_Mean[i].length; n++)</span>
<span class="nc" id="L338">        m_Mean[i][n]   = Double.NaN;</span>
    }

<span class="nc bnc" id="L341" title="All 2 branches missed.">    for (i = 0; i &lt; m_ColNames.length; i++)</span>
<span class="nc" id="L342">      m_ColNames[i] = &quot;col&quot; + i;</span>
<span class="nc bnc" id="L343" title="All 2 branches missed.">    for (i = 0; i &lt; m_RowNames.length; i++)</span>
<span class="nc" id="L344">      m_RowNames[i] = &quot;row&quot; + i;</span>

<span class="nc" id="L346">    clearHeader();</span>
<span class="nc" id="L347">    clearSummary();</span>
<span class="nc" id="L348">    clearRanking();</span>
<span class="nc" id="L349">  }</span>

  /**
   * sets the precision for the means
   */
  public void setMeanPrec(int prec) {
<span class="nc bnc" id="L355" title="All 2 branches missed.">    if (prec &gt;= 0)</span>
<span class="nc" id="L356">      m_MeanPrec = prec;</span>
<span class="nc" id="L357">  }</span>

  /**
   * returns the current precision for the means
   */
  public int getMeanPrec() {
<span class="nc" id="L363">    return m_MeanPrec;</span>
  }

  /**
   * sets the precision for the standard deviation
   */
  public void setStdDevPrec(int prec) {
<span class="nc bnc" id="L370" title="All 2 branches missed.">    if (prec &gt;= 0)</span>
<span class="nc" id="L371">      m_StdDevPrec = prec;</span>
<span class="nc" id="L372">  }</span>

  /**
   * returns the current standard deviation precision
   */
  public int getStdDevPrec() {
<span class="nc" id="L378">    return m_StdDevPrec;</span>
  }

  /**
   * sets the width for the column names (0 = optimal)
   */
  public void setColNameWidth(int width) {
<span class="nc bnc" id="L385" title="All 2 branches missed.">    if (width &gt;= 0)</span>
<span class="nc" id="L386">      m_ColNameWidth = width;</span>
<span class="nc" id="L387">  }</span>

  /**
   * returns the current width for the column names
   */
  public int getColNameWidth() {
<span class="nc" id="L393">    return m_ColNameWidth;</span>
  }

  /**
   * sets the width for the row names (0 = optimal)
   */
  public void setRowNameWidth(int width) {
<span class="nc bnc" id="L400" title="All 2 branches missed.">    if (width &gt;= 0)</span>
<span class="nc" id="L401">      m_RowNameWidth = width;</span>
<span class="nc" id="L402">  }</span>

  /**
   * returns the current width for the row names
   */
  public int getRowNameWidth() {
<span class="nc" id="L408">    return m_RowNameWidth;</span>
  }

  /**
   * sets the width for the mean (0 = optimal)
   */
  public void setMeanWidth(int width) {
<span class="nc bnc" id="L415" title="All 2 branches missed.">    if (width &gt;= 0)</span>
<span class="nc" id="L416">      m_MeanWidth = width;</span>
<span class="nc" id="L417">  }</span>

  /**
   * returns the current width for the mean
   */
  public int getMeanWidth() {
<span class="nc" id="L423">    return m_MeanWidth;</span>
  }

  /**
   * sets the width for the std dev (0 = optimal)
   */
  public void setStdDevWidth(int width) {
<span class="nc bnc" id="L430" title="All 2 branches missed.">    if (width &gt;= 0)</span>
<span class="nc" id="L431">      m_StdDevWidth = width;</span>
<span class="nc" id="L432">  }</span>

  /**
   * returns the current width for the std dev
   */
  public int getStdDevWidth() {
<span class="nc" id="L438">    return m_StdDevWidth;</span>
  }

  /**
   * sets the width for the significance (0 = optimal)
   */
  public void setSignificanceWidth(int width) {
<span class="nc bnc" id="L445" title="All 2 branches missed.">    if (width &gt;= 0)</span>
<span class="nc" id="L446">      m_SignificanceWidth = width;</span>
<span class="nc" id="L447">  }</span>

  /**
   * returns the current width for the significance
   */
  public int getSignificanceWidth() {
<span class="nc" id="L453">    return m_SignificanceWidth;</span>
  }

  /**
   * sets the width for the counts (0 = optimal)
   */
  public void setCountWidth(int width) {
<span class="nc bnc" id="L460" title="All 2 branches missed.">    if (width &gt;= 0)</span>
<span class="nc" id="L461">      m_CountWidth = width;</span>
<span class="nc" id="L462">  }</span>

  /**
   * returns the current width for the counts
   */
  public int getCountWidth() {
<span class="nc" id="L468">    return m_CountWidth;</span>
  }

  /**
   * sets whether to display the std deviations or not
   */
  public void setShowStdDev(boolean show) {
<span class="nc" id="L475">    m_ShowStdDev = show;</span>
<span class="nc" id="L476">  }</span>

  /**
   * returns whether std deviations are displayed or not
   */
  public boolean getShowStdDev() {
<span class="nc" id="L482">    return m_ShowStdDev;</span>
  }

  /**
   * sets whether to display the average per column or not
   */
  public void setShowAverage(boolean show) {
<span class="nc" id="L489">    m_ShowAverage = show;</span>
<span class="nc" id="L490">  }</span>

  /**
   * returns whether average per column is displayed or not
   */
  public boolean getShowAverage() {
<span class="nc" id="L496">    return m_ShowAverage;</span>
  }

  /**
   * sets whether to remove the filter classname from the dataset name
   */
  public void setRemoveFilterName(boolean remove) {
<span class="nc" id="L503">    m_RemoveFilterName = remove;</span>
<span class="nc" id="L504">  }</span>

  /**
   * returns whether the filter classname is removed from the dataset name
   */
  public boolean getRemoveFilterName() {
<span class="nc" id="L510">    return m_RemoveFilterName;</span>
  }

  /**
   * sets whether the column names or numbers instead are printed.
   * deactivating automatically sets m_EnumerateColNames to TRUE.
   * @see #setEnumerateColNames(boolean)
   */
  public void setPrintColNames(boolean print) {
<span class="nc" id="L519">    m_PrintColNames = print;</span>
<span class="nc bnc" id="L520" title="All 2 branches missed.">    if (!print)</span>
<span class="nc" id="L521">      setEnumerateColNames(true);</span>
<span class="nc" id="L522">  }</span>

  /**
   * returns whether column names or numbers instead are printed
   */
  public boolean getPrintColNames() {
<span class="nc" id="L528">    return m_PrintColNames;</span>
  }

  /**
   * sets whether the row names or numbers instead are printed
   * deactivating automatically sets m_EnumerateColNames to TRUE.
   * @see #setEnumerateRowNames(boolean)
   */
  public void setPrintRowNames(boolean print) {
<span class="nc" id="L537">    m_PrintRowNames = print;</span>
<span class="nc bnc" id="L538" title="All 2 branches missed.">    if (!print)</span>
<span class="nc" id="L539">      setEnumerateRowNames(true);</span>
<span class="nc" id="L540">  }</span>

  /**
   * returns whether row names or numbers instead are printed
   */
  public boolean getPrintRowNames() {
<span class="nc" id="L546">    return m_PrintRowNames;</span>
  }

  /**
   * sets whether the column names are prefixed with &quot;(x)&quot; where &quot;x&quot; is
   * the index
   */
  public void setEnumerateColNames(boolean enumerate) {
<span class="nc" id="L554">    m_EnumerateColNames = enumerate;</span>
<span class="nc" id="L555">  }</span>

  /**
   * returns whether column names or numbers instead are enumerateed
   */
  public boolean getEnumerateColNames() {
<span class="nc" id="L561">    return m_EnumerateColNames;</span>
  }

  /**
   * sets whether to the row names or numbers instead are enumerateed
   */
  public void setEnumerateRowNames(boolean enumerate) {
<span class="nc" id="L568">    m_EnumerateRowNames = enumerate;</span>
<span class="nc" id="L569">  }</span>

  /**
   * returns whether row names or numbers instead are enumerateed
   */
  public boolean getEnumerateRowNames() {
<span class="nc" id="L575">    return m_EnumerateRowNames;</span>
  }

  /**
   * returns the number of columns
   */
  public int getColCount() {
<span class="nc" id="L582">    return m_ColNames.length;</span>
  }

  /**
   * returns the number of visible columns
   */
  public int getVisibleColCount() {
    int         cols;
    int         i;
    
<span class="nc" id="L592">    cols = 0;</span>
<span class="nc bnc" id="L593" title="All 2 branches missed.">    for (i = 0; i &lt; getColCount(); i++) {</span>
<span class="nc bnc" id="L594" title="All 2 branches missed.">      if (!getColHidden(i))</span>
<span class="nc" id="L595">        cols++;</span>
    }

<span class="nc" id="L598">    return cols;</span>
  }

  /**
   * returns the number of rows
   */
  public int getRowCount() {
<span class="nc" id="L605">    return m_RowNames.length;</span>
  }

  /**
   * returns the number of visible rows
   */
  public int getVisibleRowCount() {
    int         rows;
    int         i;
    
<span class="nc" id="L615">    rows= 0;</span>
<span class="nc bnc" id="L616" title="All 2 branches missed.">    for (i = 0; i &lt; getRowCount(); i++) {</span>
<span class="nc bnc" id="L617" title="All 2 branches missed.">      if (!getRowHidden(i))</span>
<span class="nc" id="L618">        rows++;</span>
    }

<span class="nc" id="L621">    return rows;</span>
  }
  
  /**
   * sets the name of the column (if the index is valid)
   * @param index     the index of the column
   * @param name      the name of the column
   */
  public void setColName(int index, String name) {
<span class="nc bnc" id="L630" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getColCount()) )</span>
<span class="nc" id="L631">      m_ColNames[index] = name;</span>
<span class="nc" id="L632">  }</span>

  /**
   * returns the name of the row, if the index is valid, otherwise null.
   * if getPrintColNames() is FALSE then an empty string is returned or if
   * getEnumerateColNames() is TRUE then the 1-based index surrounded by
   * parentheses.
   * @see #setPrintColNames(boolean)
   * @see #getPrintColNames()
   * @see #setEnumerateColNames(boolean)
   * @see #getEnumerateColNames()
   */
  public String getColName(int index) {
    String        result;
    
<span class="nc" id="L647">    result = null;</span>
    
<span class="nc bnc" id="L649" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getColCount()) ) {</span>
<span class="nc bnc" id="L650" title="All 2 branches missed.">      if (getPrintColNames())</span>
<span class="nc" id="L651">        result = m_ColNames[index];</span>
      else
<span class="nc" id="L653">        result = &quot;&quot;;</span>

<span class="nc bnc" id="L655" title="All 2 branches missed.">      if (getEnumerateColNames()) {</span>
<span class="nc" id="L656">        result =   LEFT_PARENTHESES </span>
<span class="nc" id="L657">                 + Integer.toString(index + 1) </span>
<span class="nc" id="L658">                 + RIGHT_PARENTHESES</span>
<span class="nc" id="L659">                 + &quot; &quot; + result;</span>
<span class="nc" id="L660">        result = result.trim();</span>
      }
    }

<span class="nc" id="L664">    return result;</span>
  }

  /**
   * sets the name of the row (if the index is valid)
   * @param index     the index of the row
   * @param name      the name of the row
   */
  public void setRowName(int index, String name) {
<span class="nc bnc" id="L673" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getRowCount()) )</span>
<span class="nc" id="L674">      m_RowNames[index] = name;</span>
<span class="nc" id="L675">  }</span>

  /**
   * returns the name of the row, if the index is valid, otherwise null.
   * if getPrintRowNames() is FALSE then an empty string is returned or if
   * getEnumerateRowNames() is TRUE then the 1-based index surrounded by
   * parentheses.
   * @see #setPrintRowNames(boolean)
   * @see #getPrintRowNames()
   * @see #setEnumerateRowNames(boolean)
   * @see #getEnumerateRowNames()
   */
  public String getRowName(int index) {
    String        result;
    
<span class="nc" id="L690">    result = null;</span>
    
<span class="nc bnc" id="L692" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getRowCount()) ) {</span>
<span class="nc bnc" id="L693" title="All 2 branches missed.">      if (getPrintRowNames())</span>
<span class="nc" id="L694">        result = m_RowNames[index];</span>
      else
<span class="nc" id="L696">        result = &quot;&quot;;</span>

<span class="nc bnc" id="L698" title="All 2 branches missed.">      if (getEnumerateRowNames()) {</span>
<span class="nc" id="L699">        result =   LEFT_PARENTHESES </span>
<span class="nc" id="L700">                 + Integer.toString(index + 1) </span>
<span class="nc" id="L701">                 + RIGHT_PARENTHESES</span>
<span class="nc" id="L702">                 + &quot; &quot; + result;</span>
<span class="nc" id="L703">        result = result.trim();</span>
      }
    }
    
<span class="nc" id="L707">    return result;</span>
  }

  /**
   * sets the hidden status of the column (if the index is valid)
   * @param index       the index of the column
   * @param hidden      the hidden status of the column
   */
  public void setColHidden(int index, boolean hidden) {
<span class="nc bnc" id="L716" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getColCount()) )</span>
<span class="nc" id="L717">      m_ColHidden[index] = hidden;</span>
<span class="nc" id="L718">  }</span>

  /**
   * returns the hidden status of the column, if the index is valid, otherwise
   * false
   */
  public boolean getColHidden(int index) {
<span class="nc bnc" id="L725" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getColCount()) )</span>
<span class="nc" id="L726">      return m_ColHidden[index];</span>
    else
<span class="nc" id="L728">      return false;</span>
  }

  /**
   * sets the hidden status of the row (if the index is valid)
   * @param index       the index of the row
   * @param hidden      the hidden status of the row
   */
  public void setRowHidden(int index, boolean hidden) {
<span class="nc bnc" id="L737" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getRowCount()) )</span>
<span class="nc" id="L738">      m_RowHidden[index] = hidden;</span>
<span class="nc" id="L739">  }</span>

  /**
   * returns the hidden status of the row, if the index is valid, otherwise
   * false
   */
  public boolean getRowHidden(int index) {
<span class="nc bnc" id="L746" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getRowCount()) )</span>
<span class="nc" id="L747">      return m_RowHidden[index];</span>
    else
<span class="nc" id="L749">      return false;</span>
  }

  /**
   * sets the count for the row (if the index is valid)
   * @param index     the index of the row
   * @param count     the count for the row
   */
  public void setCount(int index, double count) {
<span class="nc bnc" id="L758" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getRowCount()) )</span>
<span class="nc" id="L759">      m_Counts[index] = count;</span>
<span class="nc" id="L760">  }</span>

  /**
   * returns the count for the row. if the index is invalid then 0.
   * @param index     the index of the row
   * @return          the count for the row
   */
  public double getCount(int index) {
<span class="nc bnc" id="L768" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getRowCount()) )</span>
<span class="nc" id="L769">      return m_Counts[index];</span>
    else
<span class="nc" id="L771">      return 0;</span>
  }

  /**
   * sets the mean at the given position (if the position is valid)
   * @param col     the column of the mean
   * @param row     the row of the mean
   * @param value   the value of the mean
   */
  public void setMean(int col, int row, double value) {
<span class="nc bnc" id="L781" title="All 4 branches missed.">    if (    (col &gt;= 0) &amp;&amp; (col &lt; getColCount()) </span>
<span class="nc bnc" id="L782" title="All 4 branches missed.">         &amp;&amp; (row &gt;= 0) &amp;&amp; (row &lt; getRowCount()) )</span>
<span class="nc" id="L783">      m_Mean[row][col] = value;</span>
<span class="nc" id="L784">  }</span>

  /**
   * returns the mean at the given position, if the position is valid,
   * otherwise 0
   */
  public double getMean(int col, int row) {
<span class="nc bnc" id="L791" title="All 4 branches missed.">    if (    (col &gt;= 0) &amp;&amp; (col &lt; getColCount()) </span>
<span class="nc bnc" id="L792" title="All 4 branches missed.">         &amp;&amp; (row &gt;= 0) &amp;&amp; (row &lt; getRowCount()) )</span>
<span class="nc" id="L793">      return m_Mean[row][col];</span>
    else
<span class="nc" id="L795">      return 0;</span>
  }

  /**
   * returns the average of the mean at the given position, if the position is
   * valid, otherwise 0
   */
  public double getAverage(int col) {
    int       i;
    double    avg;
    int       count;

<span class="nc bnc" id="L807" title="All 4 branches missed.">    if ( (col &gt;= 0) &amp;&amp; (col &lt; getColCount()) ) {</span>
<span class="nc" id="L808">      avg   = 0;</span>
<span class="nc" id="L809">      count = 0;</span>

<span class="nc bnc" id="L811" title="All 2 branches missed.">      for (i = 0; i &lt; getRowCount(); i++) {</span>
<span class="nc bnc" id="L812" title="All 2 branches missed.">        if (!Double.isNaN(getMean(col, i))) {</span>
<span class="nc" id="L813">          avg += getMean(col, i);</span>
<span class="nc" id="L814">          count++;</span>
        }
      }
      
<span class="nc" id="L818">      return avg / (double) count;</span>
    }
    else {
<span class="nc" id="L821">      return 0;</span>
    }
  }

  /**
   * sets the std deviation at the given position (if the position is valid)
   * @param col     the column of the std. deviation
   * @param row     the row of the std deviation
   * @param value   the value of the std deviation
   */
  public void setStdDev(int col, int row, double value) {
<span class="nc bnc" id="L832" title="All 4 branches missed.">    if (    (col &gt;= 0) &amp;&amp; (col &lt; getColCount()) </span>
<span class="nc bnc" id="L833" title="All 4 branches missed.">         &amp;&amp; (row &gt;= 0) &amp;&amp; (row &lt; getRowCount()) )</span>
<span class="nc" id="L834">      m_StdDev[row][col] = value;</span>
<span class="nc" id="L835">  }</span>

  /**
   * returns the std deviation at the given position, if the position is valid,
   * otherwise 0
   */
  public double getStdDev(int col, int row) {
<span class="nc bnc" id="L842" title="All 4 branches missed.">    if (    (col &gt;= 0) &amp;&amp; (col &lt; getColCount()) </span>
<span class="nc bnc" id="L843" title="All 4 branches missed.">         &amp;&amp; (row &gt;= 0) &amp;&amp; (row &lt; getRowCount()) )</span>
<span class="nc" id="L844">      return m_StdDev[row][col];</span>
    else
<span class="nc" id="L846">      return 0;</span>
  }

  /**
   * sets the significance at the given position (if the position is valid)
   * @param col     the column of the significance
   * @param row     the row of the significance
   * @param value   the value of the significance
   */
  public void setSignificance(int col, int row, int value) {
<span class="nc bnc" id="L856" title="All 4 branches missed.">    if (    (col &gt;= 0) &amp;&amp; (col &lt; getColCount()) </span>
<span class="nc bnc" id="L857" title="All 4 branches missed.">         &amp;&amp; (row &gt;= 0) &amp;&amp; (row &lt; getRowCount()) )</span>
<span class="nc" id="L858">      m_Significance[row][col] = value;</span>
<span class="nc" id="L859">  }</span>

  /**
   * returns the significance at the given position, if the position is valid,
   * otherwise SIGNIFICANCE_ATIE
   */
  public int getSignificance(int col, int row) {
<span class="nc bnc" id="L866" title="All 4 branches missed.">    if (    (col &gt;= 0) &amp;&amp; (col &lt; getColCount()) </span>
<span class="nc bnc" id="L867" title="All 4 branches missed.">         &amp;&amp; (row &gt;= 0) &amp;&amp; (row &lt; getRowCount()) )</span>
<span class="nc" id="L868">      return m_Significance[row][col];</span>
    else
<span class="nc" id="L870">      return SIGNIFICANCE_TIE;</span>
  }

  /**
   * counts the occurrences of the given significance type in the given
   * column.
   * @param col       the columnn to gather the information from
   * @param type      the significance type, WIN/TIE/LOSS
   */
  public int getSignificanceCount(int col, int type) {
    int       result;
    int       i;

<span class="nc" id="L883">    result = 0;</span>

<span class="nc bnc" id="L885" title="All 4 branches missed.">    if ( (col &gt;= 0) &amp;&amp; (col &lt; getColCount()) ) {</span>
<span class="nc bnc" id="L886" title="All 2 branches missed.">      for (i = 0; i &lt; getRowCount(); i++) {</span>
<span class="nc bnc" id="L887" title="All 2 branches missed.">        if (getRowHidden(i))</span>
<span class="nc" id="L888">          continue;</span>

        // no value?
<span class="nc bnc" id="L891" title="All 2 branches missed.">        if (Double.isNaN(getMean(col, i)))</span>
<span class="nc" id="L892">          continue;</span>

<span class="nc bnc" id="L894" title="All 2 branches missed.">        if (getSignificance(col, i) == type)</span>
<span class="nc" id="L895">          result++;</span>
      }
    }

<span class="nc" id="L899">    return result;</span>
  }

  /**
   * sets the ordering of the rows, null means default
   * @param order       the new order of the rows
   */
  public void setRowOrder(int[] order) {
    int         i;
    
    // default order?
<span class="nc bnc" id="L910" title="All 2 branches missed.">    if (order == null) {</span>
<span class="nc" id="L911">      m_RowOrder = null;</span>
    }
    else {
<span class="nc bnc" id="L914" title="All 2 branches missed.">      if (order.length == getRowCount()) {</span>
<span class="nc" id="L915">        m_RowOrder = new int[order.length];</span>
<span class="nc bnc" id="L916" title="All 2 branches missed.">        for (i = 0; i &lt; order.length; i++)</span>
<span class="nc" id="L917">          m_RowOrder[i] = order[i];</span>
      }
      else {
<span class="nc" id="L920">        System.err.println(&quot;setRowOrder: length does not match (&quot; </span>
<span class="nc" id="L921">            + order.length + &quot; &lt;&gt; &quot; + getRowCount() + &quot;) - ignored!&quot;);</span>
      }
    }
<span class="nc" id="L924">  }</span>

  /**
   * returns the current order of the rows, null means the default order
   * @return        the current order of the rows
   */
  public int[] getRowOrder() {
<span class="nc" id="L931">    return m_RowOrder;</span>
  }

  /**
   * returns the displayed index of the given row, depending on the order of
   * rows, returns -1 if index out of bounds
   * @param index         the row to get the displayed index for
   * @return              the real index of the row
   */
  public int getDisplayRow(int index) {
<span class="nc bnc" id="L941" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getRowCount()) ) {</span>
<span class="nc bnc" id="L942" title="All 2 branches missed.">      if (getRowOrder() == null)</span>
<span class="nc" id="L943">        return index;</span>
      else
<span class="nc" id="L945">        return getRowOrder()[index];</span>
    }
    else {
<span class="nc" id="L948">      return -1;</span>
    }
  }

  /**
   * sets the ordering of the columns, null means default
   * @param order       the new order of the columns
   */
  public void setColOrder(int[] order) {
    int         i;
    
    // default order?
<span class="nc bnc" id="L960" title="All 2 branches missed.">    if (order == null) {</span>
<span class="nc" id="L961">      m_ColOrder = null;</span>
    }
    else {
<span class="nc bnc" id="L964" title="All 2 branches missed.">      if (order.length == getColCount()) {</span>
<span class="nc" id="L965">        m_ColOrder = new int[order.length];</span>
<span class="nc bnc" id="L966" title="All 2 branches missed.">        for (i = 0; i &lt; order.length; i++)</span>
<span class="nc" id="L967">          m_ColOrder[i] = order[i];</span>
      }
      else {
<span class="nc" id="L970">        System.err.println(&quot;setColOrder: length does not match (&quot; </span>
<span class="nc" id="L971">            + order.length + &quot; &lt;&gt; &quot; + getColCount() + &quot;) - ignored!&quot;);</span>
      }
    }
<span class="nc" id="L974">  }</span>

  /**
   * returns the current order of the columns, null means the default order
   * @return        the current order of the columns
   */
  public int[] getColOrder() {
<span class="nc" id="L981">    return m_ColOrder;</span>
  }

  /**
   * returns the displayed index of the given col, depending on the order of
   * columns, returns -1 if index out of bounds
   * @param index         the column to get the displayed index for
   * @return              the real index of the column
   */
  public int getDisplayCol(int index) {
<span class="nc bnc" id="L991" title="All 4 branches missed.">    if ( (index &gt;= 0) &amp;&amp; (index &lt; getColCount()) ) {</span>
<span class="nc bnc" id="L992" title="All 2 branches missed.">      if (getColOrder() == null)</span>
<span class="nc" id="L993">        return index;</span>
      else
<span class="nc" id="L995">        return getColOrder()[index];</span>
    }
    else {
<span class="nc" id="L998">      return -1;</span>
    }
  }

  /**
   * returns the given number as string rounded to the given number of
   * decimals. additional necessary 0's are added
   * @param d       the number to format
   * @param prec    the number of decimals after the point
   * @return        the formatted number
   */
  protected String doubleToString(double d, int prec) {
    String        result;
    int           currentPrec;
    int           i;

<span class="nc" id="L1014">    result = Utils.doubleToString(d, prec);</span>

    // decimal point?
<span class="nc bnc" id="L1017" title="All 2 branches missed.">    if (result.indexOf(&quot;.&quot;) == -1)</span>
<span class="nc" id="L1018">      result += &quot;.&quot;;</span>
    
    // precision so far?
<span class="nc" id="L1021">    currentPrec = result.length() - result.indexOf(&quot;.&quot;) - 1;</span>
<span class="nc bnc" id="L1022" title="All 2 branches missed.">    for (i = currentPrec; i &lt; prec; i++)</span>
<span class="nc" id="L1023">      result += &quot;0&quot;;</span>
    
<span class="nc" id="L1025">    return result;</span>
  }

  /**
   * trims the given string down to the given length if longer, otherwise
   * leaves it unchanged. a length of &quot;0&quot; leaves the string always 
   * unchanged.
   * @param s       the string to trim (if too long)
   * @param length  the max. length (0 means infinity)
   * @return        the trimmed string
   */
  protected String trimString(String s, int length) {
<span class="nc bnc" id="L1037" title="All 4 branches missed.">    if ( (length &gt; 0) &amp;&amp; (s.length() &gt; length) )</span>
<span class="nc" id="L1038">      return s.substring(0, length);</span>
    else
<span class="nc" id="L1040">      return s;</span>
  }

  /**
   * pads the given string on the right until it reaches the given length, if
   * longer cuts it down. if length is 0 then nothing is done.
   * @param s         the string to pad
   * @param length    the max. length of the string
   * @return          the padded string
   */
  protected String padString(String s, int length) {
<span class="nc" id="L1051">    return padString(s, length, false);</span>
  }

  /**
   * pads the given string until it reaches the given length, if longer cuts
   * it down. if length is 0 then nothing is done.
   * @param s         the string to pad
   * @param length    the max. length of the string
   * @param left      whether to pad left or right
   * @return          the padded string
   */
  protected String padString(String s, int length, boolean left) {
    String      result;
    int         i;

<span class="nc" id="L1066">    result = s;</span>

    // pad with blanks
<span class="nc bnc" id="L1069" title="All 2 branches missed.">    for (i = s.length(); i &lt; length; i++) {</span>
<span class="nc bnc" id="L1070" title="All 2 branches missed.">      if (left)</span>
<span class="nc" id="L1071">        result = &quot; &quot; + result;</span>
      else
<span class="nc" id="L1073">        result = result + &quot; &quot;;</span>
    }
      
    // too long?
<span class="nc bnc" id="L1077" title="All 4 branches missed.">    if ( (length &gt; 0) &amp;&amp; (result.length() &gt; length) )</span>
<span class="nc" id="L1078">      result = result.substring(0, length);</span>

<span class="nc" id="L1080">    return result;</span>
  }

  /**
   * returns the length of the longest cell in the given column
   * @param data    the data to base the calculation on
   * @param col     the column to check
   * @return        the maximum length
   */
  protected int getColSize(String[][] data, int col) {
<span class="nc" id="L1090">    return getColSize(data, col, false, false);</span>
  }

  /**
   * returns the length of the longest cell in the given column
   * @param data        the data to base the calculation on
   * @param col         the column to check
   * @param skipFirst   whether to skip the first row
   * @param skipLast    whether to skip the last row
   * @return            the maximum length
   */
  protected int getColSize( String[][] data, int col, 
                            boolean skipFirst, boolean skipLast ) {
    int       result;
    int       i;

<span class="nc" id="L1106">    result = 0;</span>

<span class="nc bnc" id="L1108" title="All 4 branches missed.">    if ( (col &gt;= 0) &amp;&amp; (col &lt; data[0].length) ) {</span>
<span class="nc bnc" id="L1109" title="All 2 branches missed.">      for (i = 0; i &lt; data.length; i++) {</span>
        // skip first?
<span class="nc bnc" id="L1111" title="All 4 branches missed.">        if ( (i == 0) &amp;&amp; (skipFirst) )</span>
<span class="nc" id="L1112">          continue;</span>

        // skip last?
<span class="nc bnc" id="L1115" title="All 4 branches missed.">        if ( (i == data.length - 1) &amp;&amp; (skipLast) )</span>
<span class="nc" id="L1116">          continue;</span>
        
<span class="nc bnc" id="L1118" title="All 2 branches missed.">        if (data[i][col].length() &gt; result)</span>
<span class="nc" id="L1119">          result = data[i][col].length();</span>
      }
    }

<span class="nc" id="L1123">    return result;</span>
  }

  /**
   * removes the filter classname from the given string if it should be 
   * removed, otherwise leaves the string alone
   * @see     #getRemoveFilterName()
   */
  protected String removeFilterName(String s) {
<span class="nc bnc" id="L1132" title="All 2 branches missed.">    if (getRemoveFilterName())</span>
<span class="nc" id="L1133">      return s.replaceAll(&quot;-weka\\.filters\\..*&quot;, &quot;&quot;)</span>
<span class="nc" id="L1134">              .replaceAll(&quot;-unsupervised\\..*&quot;,   &quot;&quot;)</span>
<span class="nc" id="L1135">              .replaceAll(&quot;-supervised\\..*&quot;,     &quot;&quot;);</span>
    else
<span class="nc" id="L1137">      return s;</span>
  }

  /**
   * returns a 2-dimensional array with the prepared data. includes the column
   * and row names. hidden cols/rows are already excluded. &lt;br&gt;
   * first row: column names&lt;br&gt;
   * last  row: wins/ties/losses&lt;br&gt;
   * first col: row names&lt;br&gt;
   */
  protected String[][] toArray() {
    int               i;
    int               n;
    int               ii;
    int               nn;
    int               x;
    int               y;
    String[][]        result;
    String[][]        tmpResult;
    int               cols;
    int               rows;
    int[]             widths;
    boolean           valueExists;

    // determine visible cols/rows
<span class="nc" id="L1162">    rows = getVisibleRowCount();</span>
<span class="nc bnc" id="L1163" title="All 2 branches missed.">    if (getShowAverage())</span>
<span class="nc" id="L1164">      rows++;</span>
<span class="nc" id="L1165">    cols = getVisibleColCount();</span>
<span class="nc bnc" id="L1166" title="All 2 branches missed.">    if (getShowStdDev())</span>
<span class="nc" id="L1167">      cols = cols*3;   // mean + stddev + sign.</span>
    else
<span class="nc" id="L1169">      cols = cols*2;   // mean + stddev</span>

<span class="nc" id="L1171">    result = new String[rows + 2][cols + 1];</span>

    // col names
<span class="nc" id="L1174">    result[0][0] = trimString(&quot;Dataset&quot;, getRowNameWidth());</span>
<span class="nc" id="L1175">    x = 1;</span>
<span class="nc bnc" id="L1176" title="All 2 branches missed.">    for (ii = 0; ii &lt; getColCount(); ii++) {</span>
<span class="nc" id="L1177">      i = getDisplayCol(ii);</span>
<span class="nc bnc" id="L1178" title="All 2 branches missed.">      if (getColHidden(i))</span>
<span class="nc" id="L1179">        continue;</span>
      
<span class="nc" id="L1181">      result[0][x] = trimString(</span>
<span class="nc" id="L1182">          removeFilterName(getColName(i)), getColNameWidth());</span>
<span class="nc" id="L1183">      x++;</span>
      // std dev
<span class="nc bnc" id="L1185" title="All 2 branches missed.">      if (getShowStdDev()) {</span>
<span class="nc" id="L1186">        result[0][x] = &quot;&quot;;</span>
<span class="nc" id="L1187">        x++;</span>
      }
      // sign.
<span class="nc" id="L1190">      result[0][x] = &quot;&quot;;</span>
<span class="nc" id="L1191">      x++;</span>
    }

    // row names
<span class="nc" id="L1195">    y = 1;</span>
<span class="nc bnc" id="L1196" title="All 2 branches missed.">    for (ii = 0; ii &lt; getRowCount(); ii++) {</span>
<span class="nc" id="L1197">      i = getDisplayRow(ii);</span>
<span class="nc bnc" id="L1198" title="All 2 branches missed.">      if (!getRowHidden(i)) {</span>
<span class="nc" id="L1199">        result[y][0] = trimString(</span>
<span class="nc" id="L1200">            removeFilterName(getRowName(i)), getRowNameWidth());</span>
<span class="nc" id="L1201">        y++;</span>
      }
    }

    // fill in mean/std dev
<span class="nc" id="L1206">    y = 1;</span>
<span class="nc bnc" id="L1207" title="All 2 branches missed.">    for (ii = 0; ii &lt; getRowCount(); ii++) {</span>
<span class="nc" id="L1208">      i = getDisplayRow(ii);</span>
<span class="nc bnc" id="L1209" title="All 2 branches missed.">      if (getRowHidden(i))</span>
<span class="nc" id="L1210">        continue;</span>

<span class="nc" id="L1212">      x = 1;</span>
<span class="nc bnc" id="L1213" title="All 2 branches missed.">      for (nn = 0; nn &lt; getColCount(); nn++) {</span>
<span class="nc" id="L1214">        n = getDisplayCol(nn);</span>
<span class="nc bnc" id="L1215" title="All 2 branches missed.">        if (getColHidden(n))</span>
<span class="nc" id="L1216">          continue;</span>

        // do we have a value in the matrix?
<span class="nc bnc" id="L1219" title="All 2 branches missed.">        valueExists = (!Double.isNaN(getMean(n, i)));</span>

        // mean
<span class="nc bnc" id="L1222" title="All 2 branches missed.">        if (!valueExists)</span>
<span class="nc" id="L1223">          result[y][x] = &quot;&quot;;</span>
        else
<span class="nc" id="L1225">          result[y][x] = doubleToString(getMean(n, i), getMeanPrec());</span>
<span class="nc" id="L1226">        x++;</span>
        
        // stddev
<span class="nc bnc" id="L1229" title="All 2 branches missed.">        if (getShowStdDev()) {</span>
<span class="nc bnc" id="L1230" title="All 2 branches missed.">          if (!valueExists)</span>
<span class="nc" id="L1231">            result[y][x] = &quot;&quot;;</span>
<span class="nc bnc" id="L1232" title="All 2 branches missed.">          else if (Double.isInfinite(getStdDev(n, i)))</span>
<span class="nc" id="L1233">            result[y][x] = &quot;Inf&quot;;</span>
          else
<span class="nc" id="L1235">            result[y][x] = doubleToString(getStdDev(n, i), getStdDevPrec());</span>
<span class="nc" id="L1236">          x++;</span>
        }
        
        // significance
<span class="nc bnc" id="L1240" title="All 2 branches missed.">        if (!valueExists) {</span>
<span class="nc" id="L1241">          result[y][x] = &quot;&quot;;</span>
        }
        else {
<span class="nc bnc" id="L1244" title="All 4 branches missed.">          switch (getSignificance(n, i)) {</span>
            case SIGNIFICANCE_TIE:
<span class="nc" id="L1246">              result[y][x] = TIE_STRING;</span>
<span class="nc" id="L1247">              break;</span>
            case SIGNIFICANCE_WIN:
<span class="nc" id="L1249">              result[y][x] = WIN_STRING;</span>
<span class="nc" id="L1250">              break;</span>
            case SIGNIFICANCE_LOSS:
<span class="nc" id="L1252">              result[y][x] = LOSS_STRING;</span>
              break;
          }
        }
<span class="nc" id="L1256">        x++;</span>
      }

<span class="nc" id="L1259">      y++;</span>
    }

    // the average
<span class="nc bnc" id="L1263" title="All 2 branches missed.">    if (getShowAverage()) {</span>
<span class="nc" id="L1264">      y = result.length - 2;</span>
<span class="nc" id="L1265">      x = 0;</span>
<span class="nc" id="L1266">      result[y][0] = &quot;Average&quot;;</span>
<span class="nc" id="L1267">      x++;</span>
<span class="nc bnc" id="L1268" title="All 2 branches missed.">      for (ii = 0; ii &lt; getColCount(); ii++) {</span>
<span class="nc" id="L1269">        i = getDisplayCol(ii);</span>
<span class="nc bnc" id="L1270" title="All 2 branches missed.">        if (getColHidden(i))</span>
<span class="nc" id="L1271">          continue;</span>

        // mean-average
<span class="nc" id="L1274">        result[y][x] = doubleToString(getAverage(i), getMeanPrec());</span>
<span class="nc" id="L1275">        x++;</span>

        // std dev.
<span class="nc bnc" id="L1278" title="All 2 branches missed.">        if (getShowStdDev()) {</span>
<span class="nc" id="L1279">          result[y][x] = &quot;&quot;;</span>
<span class="nc" id="L1280">          x++;</span>
        }

        // significance
<span class="nc" id="L1284">        result[y][x] = &quot;&quot;;</span>
<span class="nc" id="L1285">        x++;</span>
      }
    }

    // wins/ties/losses
<span class="nc" id="L1290">    y = result.length - 1;</span>
<span class="nc" id="L1291">    x = 0;</span>
<span class="nc" id="L1292">    result[y][0] =   LEFT_PARENTHESES </span>
<span class="nc" id="L1293">                   + WIN_STRING + &quot;/&quot; </span>
<span class="nc" id="L1294">                   + TIE_STRING + &quot;/&quot; </span>
<span class="nc" id="L1295">                   + LOSS_STRING </span>
<span class="nc" id="L1296">                   + RIGHT_PARENTHESES;</span>
<span class="nc" id="L1297">    x++;</span>
<span class="nc bnc" id="L1298" title="All 2 branches missed.">    for (ii = 0; ii &lt; getColCount(); ii++) {</span>
<span class="nc" id="L1299">      i = getDisplayCol(ii);</span>
<span class="nc bnc" id="L1300" title="All 2 branches missed.">      if (getColHidden(i))</span>
<span class="nc" id="L1301">        continue;</span>

      // mean
<span class="nc" id="L1304">      result[y][x] = &quot;&quot;;</span>
<span class="nc" id="L1305">      x++;</span>

      // std dev.
<span class="nc bnc" id="L1308" title="All 2 branches missed.">      if (getShowStdDev()) {</span>
<span class="nc" id="L1309">        result[y][x] = &quot;&quot;;</span>
<span class="nc" id="L1310">        x++;</span>
      }

      // significance
<span class="nc" id="L1314">      result[y][x] =   LEFT_PARENTHESES </span>
<span class="nc" id="L1315">                     + getSignificanceCount(i, SIGNIFICANCE_WIN) + &quot;/&quot; </span>
<span class="nc" id="L1316">                     + getSignificanceCount(i, SIGNIFICANCE_TIE) + &quot;/&quot; </span>
<span class="nc" id="L1317">                     + getSignificanceCount(i, SIGNIFICANCE_LOSS) </span>
<span class="nc" id="L1318">                     + RIGHT_PARENTHESES;</span>
<span class="nc" id="L1319">      x++;</span>
    }

    // base column has no significance -&gt; remove these columns
<span class="nc" id="L1323">    tmpResult = new String[result.length][result[0].length - 1];</span>

<span class="nc" id="L1325">    x = 0;</span>
<span class="nc bnc" id="L1326" title="All 2 branches missed.">    for (i = 0; i &lt; result[0].length; i++) {</span>
      // significance
<span class="nc bnc" id="L1328" title="All 4 branches missed.">      if (    ((i == 3) &amp;&amp; ( getShowStdDev()))</span>
<span class="nc bnc" id="L1329" title="All 4 branches missed.">           || ((i == 2) &amp;&amp; (!getShowStdDev())) )</span>
<span class="nc" id="L1330">        continue;</span>
      
<span class="nc bnc" id="L1332" title="All 2 branches missed.">      for (n = 0; n &lt; result.length; n++)</span>
<span class="nc" id="L1333">        tmpResult[n][x] = result[n][i];</span>

<span class="nc" id="L1335">      x++;</span>
    }
<span class="nc" id="L1337">    result = tmpResult;</span>

<span class="nc" id="L1339">    return result;</span>
  }

  /**
   * returns true if the index (in the array produced by toArray(boolean))
   * is the row name
   */
  protected boolean isRowName(int index) {
<span class="nc bnc" id="L1347" title="All 2 branches missed.">    return  (index == 0);</span>
  }

  /**
   * returns true if the index (in the array produced by toArray(boolean))
   * contains a mean
   */
  protected boolean isMean(int index) {
<span class="nc" id="L1355">    index--;   // dataset</span>
<span class="nc bnc" id="L1356" title="All 2 branches missed.">    if (index == 0) {</span>
<span class="nc" id="L1357">      return true;   // base column</span>
    }
    else {
<span class="nc" id="L1360">      index--;   // base column</span>

<span class="nc bnc" id="L1362" title="All 2 branches missed.">      if (index &lt; 0)</span>
<span class="nc" id="L1363">        return false;</span>
      
<span class="nc bnc" id="L1365" title="All 2 branches missed.">      if (getShowStdDev())</span>
<span class="nc bnc" id="L1366" title="All 2 branches missed.">        return (index % 3 == 1);</span>
      else
<span class="nc bnc" id="L1368" title="All 2 branches missed.">        return (index % 2 == 0);</span>
    }
  }

  /**
   * returns true if the row index (in the array produced by toArray(boolean))
   * contains the average row
   */
  protected boolean isAverage(int rowIndex) {
<span class="nc bnc" id="L1377" title="All 2 branches missed.">    if (getShowAverage())</span>
<span class="nc bnc" id="L1378" title="All 2 branches missed.">      return (getVisibleRowCount() + 1 == rowIndex);</span>
    else
<span class="nc" id="L1380">      return false;</span>
  }

  /**
   * returns true if the index (in the array produced by toArray(boolean))
   * contains a std deviation
   */
  protected boolean isStdDev(int index) {
<span class="nc" id="L1388">    index--;   // dataset</span>
<span class="nc" id="L1389">    index--;   // base column</span>

<span class="nc bnc" id="L1391" title="All 2 branches missed.">    if (getShowStdDev()) {</span>
<span class="nc bnc" id="L1392" title="All 2 branches missed.">      if (index == 0) {</span>
<span class="nc" id="L1393">        return true;   // stddev of base column</span>
      }
      else {
<span class="nc" id="L1396">        index--;   // stddev of base column</span>

<span class="nc bnc" id="L1398" title="All 2 branches missed.">        if (index &lt; 0)</span>
<span class="nc" id="L1399">          return false;</span>
      
<span class="nc bnc" id="L1401" title="All 2 branches missed.">        return (index % 3 == 1);</span>
      }
    }
    else
<span class="nc" id="L1405">      return false;</span>
  }

  /**
   * returns true if the index (in the array produced by toArray(boolean))
   * contains a significance column
   */
  protected boolean isSignificance(int index) {
<span class="nc" id="L1413">    index--;   // dataset</span>
<span class="nc" id="L1414">    index--;   // base column</span>
<span class="nc bnc" id="L1415" title="All 2 branches missed.">    if (getShowStdDev()) {</span>
<span class="nc" id="L1416">      index--;   // stddev of base column</span>

<span class="nc bnc" id="L1418" title="All 2 branches missed.">      if (index &lt; 0)</span>
<span class="nc" id="L1419">        return false;</span>
      
<span class="nc bnc" id="L1421" title="All 2 branches missed.">      return (index % 3 == 2);</span>
    }
    else {
<span class="nc bnc" id="L1424" title="All 2 branches missed.">      if (index &lt; 0)</span>
<span class="nc" id="L1425">        return false;</span>
      
<span class="nc bnc" id="L1427" title="All 2 branches missed.">      return (index % 2 == 1);</span>
    }
  }

  /**
   * returns the matrix as a string
   */
  public abstract String toStringMatrix();

  /**
   * returns the matrix as a string
   * @see #toStringMatrix()
   */
  public String toString() {
<span class="nc" id="L1441">    return toStringMatrix();</span>
  }

  /**
   * removes all the header information
   */
  public void clearHeader() {
<span class="nc" id="L1448">    m_HeaderKeys   = new Vector();</span>
<span class="nc" id="L1449">    m_HeaderValues = new Vector();</span>
<span class="nc" id="L1450">  }</span>

  /**
   * adds the key-value pair to the header
   * @param key       the name of the header value
   * @param value     the value of the header value
   */
  public void addHeader(String key, String value) {
    int         pos;
    
<span class="nc" id="L1460">    pos = m_HeaderKeys.indexOf(key);</span>
<span class="nc bnc" id="L1461" title="All 2 branches missed.">    if (pos &gt; -1) {</span>
<span class="nc" id="L1462">      m_HeaderValues.set(pos, value);</span>
    }
    else {
<span class="nc" id="L1465">      m_HeaderKeys.add(key);</span>
<span class="nc" id="L1466">      m_HeaderValues.add(value);</span>
    }
<span class="nc" id="L1468">  }</span>

  /**
   * returns the value associated with the given key, null if if cannot be
   * found
   * @param key       the key to retrieve the value for
   * @return          the associated value
   */
  public String getHeader(String key) {
    int       pos;

<span class="nc" id="L1479">    pos = m_HeaderKeys.indexOf(key);</span>
<span class="nc bnc" id="L1480" title="All 2 branches missed.">    if (pos == 0)</span>
<span class="nc" id="L1481">      return null;</span>
    else
<span class="nc" id="L1483">      return (String) m_HeaderKeys.get(pos);</span>
  }

  /**
   * returns an enumeration of the header keys
   * @return all stored keys
   */
  public Enumeration headerKeys() {
<span class="nc" id="L1491">    return m_HeaderKeys.elements();</span>
  }
  
  /**
   * returns the header of the matrix as a string
   * @see #m_HeaderKeys
   * @see #m_HeaderValues
   */
  public abstract String toStringHeader();

  /**
   * returns returns a key for all the col names, for better readability if
   * the names got cut off
   */
  public abstract String toStringKey();

  /**
   * clears the current summary data
   */
  public void clearSummary() {
<span class="nc" id="L1511">    m_NonSigWins = null;</span>
<span class="nc" id="L1512">    m_Wins       = null;</span>
<span class="nc" id="L1513">  }</span>

  /**
   * sets the non-significant and significant wins of the resultsets
   * @param nonSigWins      the non-significant wins
   * @param wins         the significant wins
   */
  public void setSummary(int[][] nonSigWins, int[][] wins) {
    int         i;
    int         n;
    
<span class="nc" id="L1524">    m_NonSigWins = new int[nonSigWins.length][nonSigWins[0].length];</span>
<span class="nc" id="L1525">    m_Wins       = new int[wins.length][wins[0].length];</span>

<span class="nc bnc" id="L1527" title="All 2 branches missed.">    for (i = 0; i &lt; m_NonSigWins.length; i++) {</span>
<span class="nc bnc" id="L1528" title="All 2 branches missed.">      for (n = 0; n &lt; m_NonSigWins[i].length; n++) {</span>
<span class="nc" id="L1529">        m_NonSigWins[i][n] = nonSigWins[i][n];</span>
<span class="nc" id="L1530">        m_Wins[i][n]       = wins[i][n];</span>
      }
    }
<span class="nc" id="L1533">  }</span>

  /**
   * returns the character representation of the given column
   */
  protected String getSummaryTitle(int col) {
<span class="nc" id="L1539">    return &quot;&quot; + (char) ((int) 'a' + col % 26);</span>
  }

  /**
   * returns the summary as string
   */
  public abstract String toStringSummary();

  /**
   * clears the currently stored ranking data
   */
  public void clearRanking() {
<span class="nc" id="L1551">    m_RankingWins   = null;</span>
<span class="nc" id="L1552">    m_RankingLosses = null;</span>
<span class="nc" id="L1553">    m_RankingDiff   = null;</span>
<span class="nc" id="L1554">  }</span>

  /**
   * sets the ranking data based on the wins
   * @param wins      the wins 
   */
  public void setRanking(int[][] wins) {
    int         i;
    int         j;
    
<span class="nc" id="L1564">    m_RankingWins   = new int[wins.length];</span>
<span class="nc" id="L1565">    m_RankingLosses = new int[wins.length];</span>
<span class="nc" id="L1566">    m_RankingDiff   = new int[wins.length];</span>

<span class="nc bnc" id="L1568" title="All 2 branches missed.">    for (i = 0; i &lt; wins.length; i++) {</span>
<span class="nc bnc" id="L1569" title="All 2 branches missed.">      for (j = 0; j &lt; wins[i].length; j++) {</span>
<span class="nc" id="L1570">	m_RankingWins[j]   += wins[i][j];</span>
<span class="nc" id="L1571">	m_RankingDiff[j]   += wins[i][j];</span>
<span class="nc" id="L1572">	m_RankingLosses[i] += wins[i][j];</span>
<span class="nc" id="L1573">	m_RankingDiff[i]   -= wins[i][j];</span>
      }
    }
<span class="nc" id="L1576">  }</span>

  /**
   * returns the ranking in a string representation
   */
  public abstract String toStringRanking();
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>AllTests (Nov 28, 2015 2:34:31 PM)</div></body></html>