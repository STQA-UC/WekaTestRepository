<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>Main.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (Nov 28, 2015 2:34:31 PM)</a> &gt; <a href="../../index.html" class="el_group">wekaproject</a> &gt; <a href="../index.html" class="el_bundle">src/src/main/java</a> &gt; <a href="index.source.html" class="el_package">weka.gui</a> &gt; <span class="el_source">Main.java</span></div><h1>Main.java</h1><pre class="source lang-java linenums"><span class="nc" id="L1">/*</span>
 *    This program is free software; you can redistribute it and/or modify
 *    it under the terms of the GNU General Public License as published by
 *    the Free Software Foundation; either version 2 of the License, or
 *    (at your option) any later version.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU General Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License
 *    along with this program; if not, write to the Free Software
 *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

/*
 * Main.java
 * Copyright (C) 2006 University of Waikato, Hamilton, New Zealand
 *
 */

package weka.gui;

import weka.classifiers.bayes.net.GUI;
import weka.classifiers.evaluation.ThresholdCurve;
import weka.core.Copyright;
import weka.core.Instances;
import weka.core.Memory;
import weka.core.Option;
import weka.core.OptionHandler;
import weka.core.SelectedTag;
import weka.core.SystemInfo;
import weka.core.Tag;
import weka.core.Utils;
import weka.core.Version;
import weka.gui.arffviewer.ArffViewerMainPanel;
import weka.gui.beans.KnowledgeFlowApp;
import weka.gui.beans.StartUpListener;
import weka.gui.boundaryvisualizer.BoundaryVisualizer;
import weka.gui.experiment.Experimenter;
import weka.gui.explorer.Explorer;
import weka.gui.graphvisualizer.GraphVisualizer;
import weka.gui.sql.SqlViewer;
import weka.gui.treevisualizer.Node;
import weka.gui.treevisualizer.NodePlace;
import weka.gui.treevisualizer.PlaceNode2;
import weka.gui.treevisualizer.TreeBuild;
import weka.gui.treevisualizer.TreeVisualizer;
import weka.gui.visualize.PlotData2D;
import weka.gui.visualize.ThresholdVisualizePanel;
import weka.gui.visualize.VisualizePanel;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.LayoutManager;
import java.awt.Point;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileReader;
import java.io.Reader;
import java.util.Collections;
import java.util.Enumeration;
import java.util.HashSet;
import java.util.Hashtable;
import java.util.Iterator;
import java.util.Vector;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JDesktopPane;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSeparator;
import javax.swing.JTable;
import javax.swing.SwingConstants;
import javax.swing.WindowConstants;
import javax.swing.event.InternalFrameAdapter;
import javax.swing.event.InternalFrameEvent;

/**
 * Menu-based GUI for Weka, replacement for the GUIChooser.
 *
 &lt;!-- options-start --&gt;
 * Valid options are: &lt;p/&gt;
 * 
 * &lt;pre&gt; -gui &amp;lt;MDI|SDI&amp;gt;
 *  Determines the layout of the GUI:
 *  MDI = MDI Layout
 *  SDI = SDI Layout
 *  (default: MDI)&lt;/pre&gt;
 * 
 &lt;!-- options-end --&gt;
 *
 * @author  fracpete (fracpete at waikato dot ac dot nz)
 * @version $Revision: 9490 $
 */
<span class="nc" id="L118">public class Main</span>
  extends JFrame
  implements OptionHandler {
  
  /** for serialization. */
  private static final long serialVersionUID = 1453813254824253849L;
  
  /**
   * DesktopPane with background image.
   * 
   * @author  fracpete (fracpete at waikato dot ac dot nz)
   * @version $Revision: 9490 $
   */
  public static class BackgroundDesktopPane
    extends JDesktopPane {
    
    /** for serialization. */
    private static final long serialVersionUID = 2046713123452402745L;
    
    /** the actual background image. */
    protected Image m_Background;
    
    /**
     * intializes the desktop pane.
     * 
     * @param image	the image to use as background
     */
    public BackgroundDesktopPane(String image) {
<span class="nc" id="L146">      super();</span>
      
      try {
<span class="nc" id="L149">	m_Background = Toolkit.getDefaultToolkit().getImage(ClassLoader.getSystemResource(image));</span>
      }
<span class="nc" id="L151">      catch (Exception e) {</span>
<span class="nc" id="L152">	e.printStackTrace();</span>
      }
<span class="nc" id="L154">    }</span>
    
    /**
     * draws the background image.
     * 
     * @param g		the graphics context
     */
    public void paintComponent(Graphics g) {
<span class="nc" id="L162">      super.paintComponent(g);</span>
     
<span class="nc bnc" id="L164" title="All 2 branches missed.">      if (m_Background != null) {</span>
<span class="nc" id="L165">	g.setColor(Color.WHITE);</span>
<span class="nc" id="L166">	g.clearRect(0, 0, getWidth(), getHeight());</span>
	
<span class="nc" id="L168">	int width  = m_Background.getWidth(null);</span>
<span class="nc" id="L169">	int height = m_Background.getHeight(null);</span>
<span class="nc" id="L170">	int x = (getWidth() - width) / 2;</span>
<span class="nc" id="L171">	int y = (getHeight() - height) / 2;</span>
<span class="nc" id="L172">	g.drawImage(m_Background, x, y, width, height, this);</span>
      }
<span class="nc" id="L174">    }</span>
  }
  
  /**
   * Specialized JFrame class.
   * 
   * @author  fracpete (fracpete at waikato dot ac dot nz)
   * @version $Revision: 9490 $
   */
  public static class ChildFrameSDI 
    extends JFrame {
    
    /** for serialization. */
    private static final long serialVersionUID = 8588293938686425618L;
    
    /** the parent frame. */
    protected Main m_Parent;
    
    /**
     * constructs a new internal frame that knows about its parent.
     * 
     * @param parent	the parent frame
     * @param title	the title of the frame
     */
    public ChildFrameSDI(Main parent, String title) {
<span class="nc" id="L199">      super(title);</span>
      
<span class="nc" id="L201">      m_Parent = parent;</span>

<span class="nc" id="L203">      addWindowListener(new WindowAdapter() {</span>
	public void windowActivated(WindowEvent e) {
	  // update title of parent
<span class="nc bnc" id="L206" title="All 2 branches missed.">	  if (getParentFrame() != null)</span>
<span class="nc" id="L207">	    getParentFrame().createTitle(getTitle());</span>
<span class="nc" id="L208">	}</span>
      });
      
      // add to parent
<span class="nc bnc" id="L212" title="All 2 branches missed.">      if (getParentFrame() != null) {</span>
<span class="nc" id="L213">	getParentFrame().addChildFrame(this);</span>
<span class="nc" id="L214">	setIconImage(getParentFrame().getIconImage());</span>
      }
<span class="nc" id="L216">    }</span>
    
    /**
     * returns the parent frame, can be null.
     * 
     * @return		the parent frame
     */
    public Main getParentFrame() {
<span class="nc" id="L224">      return m_Parent;</span>
    }
    
    /**
     * de-registers the child frame with the parent first.
     */
    public void dispose() {
<span class="nc bnc" id="L231" title="All 2 branches missed.">      if (getParentFrame() != null) {</span>
<span class="nc" id="L232">	getParentFrame().removeChildFrame(this);</span>
<span class="nc" id="L233">	getParentFrame().createTitle(&quot;&quot;);</span>
      }
      
<span class="nc" id="L236">      super.dispose();</span>
<span class="nc" id="L237">    }</span>
  }
  
  /**
   * Specialized JInternalFrame class.
   * 
   * @author  fracpete (fracpete at waikato dot ac dot nz)
   * @version $Revision: 9490 $
   */
  public static class ChildFrameMDI
    extends JInternalFrame {
    
    /** for serialization. */
    private static final long serialVersionUID = 3772573515346899959L;
    
    /** the parent frame. */
    protected Main m_Parent;
    
    /**
     * constructs a new internal frame that knows about its parent.
     * 
     * @param parent	the parent frame
     * @param title	the title of the frame
     */
    public ChildFrameMDI(Main parent, String title) {
<span class="nc" id="L262">      super(title, true, true, true, true);</span>
      
<span class="nc" id="L264">      m_Parent = parent;</span>

<span class="nc" id="L266">      addInternalFrameListener(new InternalFrameAdapter() {</span>
	public void internalFrameActivated(InternalFrameEvent e) {
	  // update title of parent
<span class="nc bnc" id="L269" title="All 2 branches missed.">	  if (getParentFrame() != null)</span>
<span class="nc" id="L270">	    getParentFrame().createTitle(getTitle());</span>
<span class="nc" id="L271">	}</span>
      });
      
      // add to parent
<span class="nc bnc" id="L275" title="All 2 branches missed.">      if (getParentFrame() != null) {</span>
<span class="nc" id="L276">	getParentFrame().addChildFrame(this);</span>
<span class="nc" id="L277">	getParentFrame().jDesktopPane.add(this);</span>
      }
<span class="nc" id="L279">    }</span>
    
    /**
     * returns the parent frame, can be null.
     * 
     * @return		the parent frame
     */
    public Main getParentFrame() {
<span class="nc" id="L287">      return m_Parent;</span>
    }
    
    /**
     * de-registers the child frame with the parent first.
     */
    public void dispose() {
<span class="nc bnc" id="L294" title="All 2 branches missed.">      if (getParentFrame() != null) {</span>
<span class="nc" id="L295">	getParentFrame().removeChildFrame(this);</span>
<span class="nc" id="L296">	getParentFrame().createTitle(&quot;&quot;);</span>
      }
      
<span class="nc" id="L299">      super.dispose();</span>
<span class="nc" id="L300">    }</span>
  }

  /** displays the GUI as MDI. */
  public final static int GUI_MDI = 0;
  /** displays the GUI as SDI. */
  public final static int GUI_SDI = 1;
  /** GUI tags. */
<span class="nc" id="L308">  public static final Tag[] TAGS_GUI = {</span>
<span class="nc" id="L309">    new Tag(GUI_MDI, &quot;MDI&quot;, Messages.getInstance().getString(&quot;Main_Tag_GUI_Text_First&quot;)),</span>
<span class="nc" id="L310">    new Tag(GUI_SDI, &quot;SDI&quot;, Messages.getInstance().getString(&quot;Main_Tag_GUI_Text_Second&quot;))</span>
  };
  
  /** the frame itself. */
  protected Main m_Self;
  
  /** the type of GUI to display. */
<span class="nc" id="L317">  protected int m_GUIType = GUI_MDI;</span>
  
  /** variable for the Main class which would be set to null by the memory
   *  monitoring thread to free up some memory if we running out of memory. */
  protected static Main m_MainCommandline;
  
  /** singleton instance of the GUI. */
  protected static Main m_MainSingleton;

  /** list of things to be notified when the startup process of
   *  the KnowledgeFlow is complete. */
<span class="nc" id="L328">  protected static Vector m_StartupListeners = new Vector();</span>

  /** for monitoring the Memory consumption. */
<span class="nc" id="L331">  protected static Memory m_Memory = new Memory(true);</span>
  
  /** contains the child frames (title &amp;lt;-&amp;gt; object). */
<span class="nc" id="L334">  protected HashSet&lt;Container&gt; m_ChildFrames = new HashSet&lt;Container&gt;();</span>

  /** The frame of the LogWindow. */
<span class="nc" id="L337">  protected static LogWindow m_LogWindow = new LogWindow();</span>

  /** filechooser for the TreeVisualizer. */
<span class="nc" id="L340">  protected JFileChooser m_FileChooserTreeVisualizer = new JFileChooser(new File(System.getProperty(&quot;user.dir&quot;)));</span>

  /** filechooser for the GraphVisualizer. */
<span class="nc" id="L343">  protected JFileChooser m_FileChooserGraphVisualizer = new JFileChooser(new File(System.getProperty(&quot;user.dir&quot;)));</span>

  /** filechooser for Plots. */
<span class="nc" id="L346">  protected JFileChooser m_FileChooserPlot = new JFileChooser(new File(System.getProperty(&quot;user.dir&quot;)));</span>

  /** filechooser for ROC curves. */
<span class="nc" id="L349">  protected JFileChooser m_FileChooserROC = new JFileChooser(new File(System.getProperty(&quot;user.dir&quot;)));</span>
  
  // GUI components
  private JMenu jMenuHelp;
  private JMenu jMenuVisualization;
  private JMenu jMenuTools;
  private JDesktopPane jDesktopPane;
  private JMenu jMenuApplications;
  private JMenuItem jMenuItemHelpSystemInfo;
  private JMenuItem jMenuItemHelpAbout;
  private JMenuItem jMenuItemHelpHomepage;
  private JMenuItem jMenuItemHelpWekaWiki;
  private JMenuItem jMenuItemHelpWekaDoc;
  private JMenuItem jMenuItemHelpSourceforge;
  private JMenuItem jMenuItemVisualizationBoundaryVisualizer;
  private JMenuItem jMenuItemVisualizationGraphVisualizer;
  private JMenuItem jMenuItemVisualizationTreeVisualizer;
  private JMenuItem jMenuItemVisualizationROC;
  private JMenuItem jMenuItemVisualizationPlot;
  private JMenuItem jMenuItemToolsEnsembleLibrary;
  private JMenuItem jMenuItemToolsSqlViewer;
  private JMenuItem jMenuItemToolsArffViewer;
  private JMenuItem jMenuItemApplicationsSimpleCLI;
  private JMenuItem jMenuItemApplicationsKnowledgeFlow;
  private JMenuItem jMenuItemApplicationsExperimenter;
  private JMenuItem jMenuItemApplicationsExplorer;
  private JMenuItem jMenuItemProgramExit;
  private JMenuItem jMenuItemProgramLogWindow;
  private JMenuItem jMenuItemProgramMemoryUsage;
  private JMenuItem jMenuItemProgramPreferences;  // TODO: see below
  private JMenu jMenuProgram;
  private JMenu jMenuExtensions;
  private JMenu jMenuWindows;
  private JMenuBar jMenuBar;
  
  /**
   * default constructor.
   */
  public Main() {
<span class="nc" id="L388">    super();</span>
<span class="nc" id="L389">  }</span>
  
  /**
   * creates a frame (depending on m_GUIType) and returns it.
   * 
   * @param parent		the parent of the generated frame
   * @param title		the title of the frame
   * @param c			the component to place, can be null
   * @param layout		the layout to use, e.g., BorderLayout
   * @param layoutConstraints	the layout constraints, e.g., BorderLayout.CENTER
   * @param width		the width of the frame, ignored if -1
   * @param height		the height of the frame, ignored if -1
   * @param menu		an optional menu
   * @param listener		if true a default listener is added
   * @param visible		if true then the frame is made visible immediately
   * @return			the generated frame
   * @see 			#m_GUIType
   */
  protected Container createFrame(
      Main parent, String title, Component c, LayoutManager layout, 
      Object layoutConstraints, int width, int height, JMenuBar menu,
      boolean listener, boolean visible) {

<span class="nc" id="L412">    Container result = null;</span>
    
<span class="nc bnc" id="L414" title="All 2 branches missed.">    if (m_GUIType == GUI_MDI) {</span>
<span class="nc" id="L415">      final ChildFrameMDI frame = new ChildFrameMDI(parent, title);</span>
      
      // layout
<span class="nc" id="L418">      frame.setLayout(layout);</span>
<span class="nc bnc" id="L419" title="All 2 branches missed.">      if (c != null)</span>
<span class="nc" id="L420">	frame.getContentPane().add(c, layoutConstraints);</span>
      
      // menu
<span class="nc" id="L423">      frame.setJMenuBar(menu);</span>
      
      // size
<span class="nc" id="L426">      frame.pack();</span>
<span class="nc bnc" id="L427" title="All 4 branches missed.">      if ((width &gt; -1) &amp;&amp; (height &gt; -1))</span>
<span class="nc" id="L428">	frame.setSize(width, height);</span>
<span class="nc" id="L429">      frame.validate();</span>

      // listener?
<span class="nc bnc" id="L432" title="All 2 branches missed.">      if (listener) {</span>
<span class="nc" id="L433">	frame.addInternalFrameListener(new InternalFrameAdapter() {</span>
	  public void internalFrameClosing(InternalFrameEvent e) {
<span class="nc" id="L435">	    frame.dispose();</span>
<span class="nc" id="L436">	  }</span>
	});
      }
      
      // display frame
<span class="nc bnc" id="L441" title="All 2 branches missed.">      if (visible) {</span>
<span class="nc" id="L442">	frame.setVisible(true);</span>
	try {
<span class="nc" id="L444">	  frame.setSelected(true);</span>
	}
<span class="nc" id="L446">	catch (Exception e) {</span>
<span class="nc" id="L447">	  e.printStackTrace();</span>
	}
      }
      
<span class="nc" id="L451">      result = frame;</span>
    }
<span class="nc bnc" id="L453" title="All 2 branches missed.">    else if (m_GUIType == GUI_SDI) {</span>
<span class="nc" id="L454">      final ChildFrameSDI frame = new ChildFrameSDI(parent, title);</span>
      
      // layout
<span class="nc" id="L457">      frame.setLayout(layout);</span>
<span class="nc bnc" id="L458" title="All 2 branches missed.">      if (c != null)</span>
<span class="nc" id="L459">	frame.getContentPane().add(c, layoutConstraints);</span>
      
      // menu
<span class="nc" id="L462">      frame.setJMenuBar(menu);</span>
      
      // size
<span class="nc" id="L465">      frame.pack();</span>
<span class="nc bnc" id="L466" title="All 4 branches missed.">      if ((width &gt; -1) &amp;&amp; (height &gt; -1))</span>
<span class="nc" id="L467">	frame.setSize(width, height);</span>
<span class="nc" id="L468">      frame.validate();</span>

      // location
<span class="nc" id="L471">      int screenHeight = getGraphicsConfiguration().getBounds().height;</span>
<span class="nc" id="L472">      int screenWidth  = getGraphicsConfiguration().getBounds().width;</span>
<span class="nc" id="L473">      frame.setLocation(</span>
<span class="nc" id="L474">	  (screenWidth - frame.getBounds().width) / 2,</span>
<span class="nc" id="L475">	  (screenHeight - frame.getBounds().height) / 2);</span>
      
      // listener?
<span class="nc bnc" id="L478" title="All 2 branches missed.">      if (listener) {</span>
<span class="nc" id="L479">	frame.addWindowListener(new WindowAdapter() {</span>
	  public void windowClosing(WindowEvent e) {
<span class="nc" id="L481">	    frame.dispose();</span>
<span class="nc" id="L482">	  }</span>
	});
      }
      
      // display frame
<span class="nc bnc" id="L487" title="All 2 branches missed.">      if (visible)</span>
<span class="nc" id="L488">	frame.setVisible(true);</span>

<span class="nc" id="L490">      result = frame;</span>
    }
    
<span class="nc" id="L493">    return result;</span>
  }
  
  /**
   * insert the menu item in a sorted fashion.
   * 
   * @param menu	the menu to add the item to
   * @param menuitem	the menu item to add
   */
  protected void insertMenuItem(JMenu menu, JMenuItem menuitem) {
<span class="nc" id="L503">    insertMenuItem(menu, menuitem, 0);</span>
<span class="nc" id="L504">  }</span>
  
  /**
   * insert the menu item in a sorted fashion.
   * 
   * @param menu	the menu to add the item to
   * @param menuitem	the menu item to add
   * @param startIndex	the index in the menu to start with (0-based)
   */
  protected void insertMenuItem(JMenu menu, JMenuItem menuitem, int startIndex) {
    boolean	inserted;
    int		i;
    JMenuItem	current;
    String	currentStr;
    String	newStr;
    
<span class="nc" id="L520">    inserted = false;</span>
<span class="nc" id="L521">    newStr   = menuitem.getText().toLowerCase();</span>
    
    // try to find a spot inbetween
<span class="nc bnc" id="L524" title="All 2 branches missed.">    for (i = startIndex; i &lt; menu.getMenuComponentCount(); i++) {</span>
<span class="nc bnc" id="L525" title="All 2 branches missed.">      if (!(menu.getMenuComponent(i) instanceof JMenuItem))</span>
<span class="nc" id="L526">	continue;</span>
      
<span class="nc" id="L528">      current    = (JMenuItem) menu.getMenuComponent(i);</span>
<span class="nc" id="L529">      currentStr = current.getText().toLowerCase();</span>
<span class="nc bnc" id="L530" title="All 2 branches missed.">      if (currentStr.compareTo(newStr) &gt; 0) {</span>
<span class="nc" id="L531">	inserted = true;</span>
<span class="nc" id="L532">	menu.insert(menuitem, i);</span>
<span class="nc" id="L533">	break;</span>
      }
    }
    
    // add it at the end if not yet inserted
<span class="nc bnc" id="L538" title="All 2 branches missed.">    if (!inserted)</span>
<span class="nc" id="L539">      menu.add(menuitem);</span>
<span class="nc" id="L540">  }</span>
  
  /**
   * initializes the GUI.
   */
  protected void initGUI() {
<span class="nc" id="L546">    m_Self = this;</span>
    
    try {
      // main window
<span class="nc" id="L550">      createTitle(&quot;&quot;);</span>
<span class="nc" id="L551">      this.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);</span>
<span class="nc" id="L552">      this.setIconImage(new ImageIcon(getClass().getClassLoader().getResource(&quot;weka/gui/weka_icon_new_48.png&quot;)).getImage());</span>

      // bits and pieces
<span class="nc" id="L555">      m_FileChooserGraphVisualizer.addChoosableFileFilter(</span>
<span class="nc" id="L556">	  new ExtensionFileFilter(&quot;.bif&quot;, Messages.getInstance().getString(&quot;Main_InitGUI_ExtensionFileFilter_Text_First&quot;)));</span>
<span class="nc" id="L557">      m_FileChooserGraphVisualizer.addChoosableFileFilter(</span>
<span class="nc" id="L558">	  new ExtensionFileFilter(&quot;.xml&quot;, Messages.getInstance().getString(&quot;Main_InitGUI_ExtensionFileFilter_Text_Second&quot;)));</span>

<span class="nc" id="L560">      m_FileChooserPlot.addChoosableFileFilter(</span>
<span class="nc" id="L561">	  new ExtensionFileFilter(</span>
<span class="nc" id="L562">	      Instances.FILE_EXTENSION,</span>
<span class="nc" id="L563">	      Messages.getInstance().getString(&quot;Main_InitGUI_ExtensionFileFilter_Text_Third&quot;) + Instances.FILE_EXTENSION + &quot;)&quot;));</span>
<span class="nc" id="L564">      m_FileChooserPlot.setMultiSelectionEnabled(true);</span>

<span class="nc" id="L566">      m_FileChooserROC.addChoosableFileFilter(</span>
<span class="nc" id="L567">	  new ExtensionFileFilter(</span>
<span class="nc" id="L568">	      Instances.FILE_EXTENSION,</span>
<span class="nc" id="L569">	      Messages.getInstance().getString(&quot;Main_InitGUI_ExtensionFileFilter_Text_Third&quot;) + Instances.FILE_EXTENSION + &quot;)&quot;));</span>

      // Desktop
<span class="nc bnc" id="L572" title="All 2 branches missed.">      if (m_GUIType == GUI_MDI) {</span>
<span class="nc" id="L573">	jDesktopPane = new BackgroundDesktopPane(&quot;weka/gui/images/weka_background.gif&quot;);</span>
<span class="nc" id="L574">	jDesktopPane.setDragMode(JDesktopPane.OUTLINE_DRAG_MODE);</span>
<span class="nc" id="L575">	setContentPane(jDesktopPane);</span>
      }
      else {
<span class="nc" id="L578">	jDesktopPane = null;</span>
      }

      // Menu
<span class="nc" id="L582">      jMenuBar = new JMenuBar();</span>
<span class="nc" id="L583">      setJMenuBar(jMenuBar);</span>

      // Program
<span class="nc" id="L586">      jMenuProgram = new JMenu();</span>
<span class="nc" id="L587">      jMenuBar.add(jMenuProgram);</span>
<span class="nc" id="L588">      jMenuProgram.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuProgram_SetText_Text&quot;));</span>
<span class="nc" id="L589">      jMenuProgram.setMnemonic('P');</span>

      // Program/Preferences
      // TODO: read all properties from all props file and display them
      /*
        jMenuItemProgramPreferences = new JMenuItem();
        jMenuProgram.add(jMenuItemProgramPreferences);
        jMenuItemProgramPreferences.setText(&quot;Preferences&quot;);
        jMenuItemProgramPreferences.setMnemonic('P');
        jMenuItemProgramPreferences.addActionListener(new ActionListener() {
  	  public void actionPerformed(ActionEvent evt) {
	    System.out.println(&quot;jMenuItemProgramPreferences.actionPerformed, event=&quot;+evt);
	    //TODO add your code for jMenuItemProgramPreferences.actionPerformed
  	  }
        });
       */

      // Program/LogWindow
<span class="nc" id="L607">      jMenuItemProgramLogWindow = new JMenuItem();</span>
<span class="nc" id="L608">      jMenuProgram.add(jMenuItemProgramLogWindow);</span>
<span class="nc" id="L609">      jMenuItemProgramLogWindow.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemProgramLogWindow_SetText_Text&quot;));</span>
<span class="nc" id="L610">      jMenuItemProgramLogWindow.setMnemonic('L');</span>
<span class="nc" id="L611">      jMenuItemProgramLogWindow.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L613">	  m_LogWindow.setVisible(true);</span>
<span class="nc" id="L614">	}</span>
      });
      
<span class="nc" id="L617">      jMenuItemProgramMemoryUsage = new JMenuItem();</span>
<span class="nc" id="L618">      jMenuProgram.add(jMenuItemProgramMemoryUsage);</span>
<span class="nc" id="L619">      jMenuItemProgramMemoryUsage.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemProgramMemoryUsage_SetText_Text&quot;));</span>
<span class="nc" id="L620">      jMenuItemProgramMemoryUsage.setMnemonic('M');</span>
<span class="nc" id="L621">      jMenuItemProgramMemoryUsage.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L623">	  String title = jMenuItemProgramMemoryUsage.getText();</span>
<span class="nc bnc" id="L624" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
<span class="nc" id="L625">	    final MemoryUsagePanel panel = new MemoryUsagePanel();</span>
<span class="nc" id="L626">	    Container c = createFrame(</span>
<span class="nc" id="L627">		m_Self, title, panel, new BorderLayout(), </span>
<span class="nc" id="L628">		BorderLayout.CENTER, 400, 50, null, true, true);</span>
	    
	    // optimize size
<span class="nc" id="L631">	    Dimension size = c.getPreferredSize();</span>
<span class="nc" id="L632">	    c.setSize(new Dimension((int) size.getWidth(), (int) size.getHeight()));</span>

	    // stop threads
<span class="nc bnc" id="L635" title="All 2 branches missed.">	    if (m_GUIType == GUI_MDI) {</span>
<span class="nc" id="L636">	      final ChildFrameMDI frame = (ChildFrameMDI) c;</span>
<span class="nc" id="L637">	      Point l = panel.getFrameLocation();</span>
<span class="nc bnc" id="L638" title="All 4 branches missed.">	      if ((l.x != -1) &amp;&amp; (l.y != -1))</span>
<span class="nc" id="L639">		frame.setLocation(l);</span>
<span class="nc" id="L640">	      frame.addInternalFrameListener(new InternalFrameAdapter() {</span>
		public void internalFrameClosing(InternalFrameEvent e) {
<span class="nc" id="L642">		  panel.stopMonitoring();</span>
<span class="nc" id="L643">		}</span>
	      });
	    }
	    else {
<span class="nc" id="L647">	      final ChildFrameSDI frame = (ChildFrameSDI) c;</span>
<span class="nc" id="L648">	      Point l = panel.getFrameLocation();</span>
<span class="nc bnc" id="L649" title="All 4 branches missed.">	      if ((l.x != -1) &amp;&amp; (l.y != -1))</span>
<span class="nc" id="L650">		frame.setLocation(l);</span>
<span class="nc" id="L651">	      frame.addWindowListener(new WindowAdapter() {</span>
		public void windowClosing(WindowEvent e) {
<span class="nc" id="L653">		  panel.stopMonitoring();</span>
<span class="nc" id="L654">		}</span>
	      });
	    }
	  }
	  else {
<span class="nc" id="L659">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L661">	}</span>
      });

<span class="nc" id="L664">      jMenuProgram.add(new JSeparator());</span>

      // Program/Exit
<span class="nc" id="L667">      jMenuItemProgramExit = new JMenuItem();</span>
<span class="nc" id="L668">      jMenuProgram.add(jMenuItemProgramExit);</span>
<span class="nc" id="L669">      jMenuItemProgramExit.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemProgramExit_SetText_Text&quot;));</span>
<span class="nc" id="L670">      jMenuItemProgramExit.setMnemonic('E');</span>
<span class="nc" id="L671">      jMenuItemProgramExit.addActionListener(new ActionListener() {	</span>
	public void actionPerformed(ActionEvent evt) {
	  // close all children
<span class="nc" id="L674">	  Iterator iter = getWindowList();</span>
<span class="nc" id="L675">	  Vector&lt;Container&gt; list = new Vector&lt;Container&gt;();</span>
<span class="nc bnc" id="L676" title="All 2 branches missed.">	  while (iter.hasNext())</span>
<span class="nc" id="L677">	    list.add((Container) iter.next());</span>
<span class="nc bnc" id="L678" title="All 2 branches missed.">	  for (int i = 0; i &lt; list.size(); i++) {</span>
<span class="nc" id="L679">	    Container c = list.get(i);</span>
<span class="nc bnc" id="L680" title="All 2 branches missed.">	    if (c instanceof ChildFrameMDI)</span>
<span class="nc" id="L681">	      ((ChildFrameMDI) c).dispose();</span>
<span class="nc bnc" id="L682" title="All 2 branches missed.">	    else if (c instanceof ChildFrameSDI)</span>
<span class="nc" id="L683">	      ((ChildFrameSDI) c).dispose();</span>
	  }
	  // close logwindow
<span class="nc" id="L686">	  m_LogWindow.dispose();</span>
	  // close main window
<span class="nc" id="L688">	  m_Self.dispose();</span>
	  // make sure we stop
<span class="nc" id="L690">	  System.exit(0);</span>
<span class="nc" id="L691">	}</span>
      });

      // Applications
<span class="nc" id="L695">      jMenuApplications = new JMenu();</span>
<span class="nc" id="L696">      jMenuBar.add(jMenuApplications);</span>
<span class="nc" id="L697">      jMenuApplications.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuApplications_SetText_Text&quot;));</span>
<span class="nc" id="L698">      jMenuApplications.setMnemonic('A');</span>

      // Applications/Explorer
<span class="nc" id="L701">      jMenuItemApplicationsExplorer = new JMenuItem();</span>
<span class="nc" id="L702">      jMenuApplications.add(jMenuItemApplicationsExplorer);</span>
<span class="nc" id="L703">      jMenuItemApplicationsExplorer.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemApplicationsExplorer_SetText_Text&quot;));</span>
<span class="nc" id="L704">      jMenuItemApplicationsExplorer.setMnemonic('E');</span>
<span class="nc" id="L705">      jMenuItemApplicationsExplorer.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L707">	  String title = jMenuItemApplicationsExplorer.getText();</span>
<span class="nc bnc" id="L708" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
<span class="nc" id="L709">	    createFrame(</span>
<span class="nc" id="L710">		m_Self, title, new Explorer(), new BorderLayout(), </span>
<span class="nc" id="L711">		BorderLayout.CENTER, 800, 600, null, true, true);</span>
	  }
	  else {
<span class="nc" id="L714">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L716">	}</span>
      });

      // Applications/Experimenter
<span class="nc" id="L720">      jMenuItemApplicationsExperimenter = new JMenuItem();</span>
<span class="nc" id="L721">      jMenuApplications.add(jMenuItemApplicationsExperimenter);</span>
<span class="nc" id="L722">      jMenuItemApplicationsExperimenter.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemApplicationsExperimenter_SetText_Text&quot;));</span>
<span class="nc" id="L723">      jMenuItemApplicationsExperimenter.setMnemonic('X');</span>
<span class="nc" id="L724">      jMenuItemApplicationsExperimenter.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L726">	  String title = jMenuItemApplicationsExperimenter.getText();</span>
<span class="nc bnc" id="L727" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
<span class="nc" id="L728">	    createFrame(</span>
<span class="nc" id="L729">		m_Self, title, new Experimenter(false), new BorderLayout(), </span>
<span class="nc" id="L730">		BorderLayout.CENTER, 800, 600, null, true, true);</span>
	  }
	  else {
<span class="nc" id="L733">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L735">	}</span>
      });

      // Applications/KnowledgeFlow
<span class="nc" id="L739">      jMenuItemApplicationsKnowledgeFlow = new JMenuItem();</span>
<span class="nc" id="L740">      jMenuApplications.add(jMenuItemApplicationsKnowledgeFlow);</span>
<span class="nc" id="L741">      jMenuItemApplicationsKnowledgeFlow.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemApplicationsKnowledgeFlow_SetText_Text&quot;));</span>
<span class="nc" id="L742">      jMenuItemApplicationsKnowledgeFlow.setMnemonic('K');</span>
<span class="nc" id="L743">      jMenuItemApplicationsKnowledgeFlow.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L745">	  String title = jMenuItemApplicationsKnowledgeFlow.getText();</span>
<span class="nc bnc" id="L746" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
<span class="nc" id="L747">	    KnowledgeFlowApp.createSingleton(new String[0]);</span>
<span class="nc" id="L748">	    createFrame(</span>
<span class="nc" id="L749">		m_Self, title, KnowledgeFlowApp.getSingleton(), new BorderLayout(), </span>
<span class="nc" id="L750">		BorderLayout.CENTER, 900, 600, null, true, true);</span>
	  }
	  else {
<span class="nc" id="L753">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L755">	}</span>
      });

      // Applications/SimpleCLI
<span class="nc" id="L759">      jMenuItemApplicationsSimpleCLI = new JMenuItem();</span>
<span class="nc" id="L760">      jMenuApplications.add(jMenuItemApplicationsSimpleCLI);</span>
<span class="nc" id="L761">      jMenuItemApplicationsSimpleCLI.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemApplicationsSimpleCLI_SetText_Text&quot;));</span>
<span class="nc" id="L762">      jMenuItemApplicationsSimpleCLI.setMnemonic('S');</span>
<span class="nc" id="L763">      jMenuItemApplicationsSimpleCLI.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L765">	  String title = jMenuItemApplicationsSimpleCLI.getText();</span>
<span class="nc bnc" id="L766" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
	    try {
<span class="nc" id="L768">	      createFrame(</span>
<span class="nc" id="L769">		  m_Self, title, new SimpleCLIPanel(), new BorderLayout(), </span>
<span class="nc" id="L770">		  BorderLayout.CENTER, 600, 500, null, true, true);</span>
	    }
<span class="nc" id="L772">	    catch (Exception e) {</span>
<span class="nc" id="L773">	      e.printStackTrace();</span>
<span class="nc" id="L774">	      JOptionPane.showMessageDialog(</span>
<span class="nc" id="L775">		  m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text&quot;) + e.getMessage());</span>
<span class="nc" id="L776">	      return;</span>
	    }
	  }
	  else {
<span class="nc" id="L780">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L782">	}</span>
      });

      // Tools
<span class="nc" id="L786">      jMenuTools = new JMenu();</span>
<span class="nc" id="L787">      jMenuBar.add(jMenuTools);</span>
<span class="nc" id="L788">      jMenuTools.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuTools_JMenu_SetText_Text&quot;)); // &quot;&quot;</span>
<span class="nc" id="L789">      jMenuTools.setMnemonic('T');</span>

      // Tools/ArffViewer
<span class="nc" id="L792">      jMenuItemToolsArffViewer = new JMenuItem();</span>
<span class="nc" id="L793">      jMenuTools.add(jMenuItemToolsArffViewer);</span>
<span class="nc" id="L794">      jMenuItemToolsArffViewer.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemToolsArffViewer_SetText_Text&quot;));</span>
<span class="nc" id="L795">      jMenuItemToolsArffViewer.setMnemonic('A');</span>
<span class="nc" id="L796">      jMenuItemToolsArffViewer.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L798">	  String title = jMenuItemToolsArffViewer.getText();</span>
<span class="nc bnc" id="L799" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
<span class="nc" id="L800">	    ArffViewerMainPanel panel = new ArffViewerMainPanel(null);</span>
<span class="nc" id="L801">	    panel.setConfirmExit(false);</span>
<span class="nc" id="L802">	    Container frame = createFrame(</span>
<span class="nc" id="L803">		m_Self, title, panel, new BorderLayout(), </span>
<span class="nc" id="L804">		BorderLayout.CENTER, 800, 600, panel.getMenu(), true, true);</span>
<span class="nc" id="L805">	    panel.setParent(frame);</span>
	  }
	  else {
<span class="nc" id="L808">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L810">	}</span>
      });

      // Tools/SqlViewer
<span class="nc" id="L814">      jMenuItemToolsSqlViewer = new JMenuItem();</span>
<span class="nc" id="L815">      jMenuTools.add(jMenuItemToolsSqlViewer);</span>
<span class="nc" id="L816">      jMenuItemToolsSqlViewer.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemToolsSqlViewer_SetText_Text&quot;)); //&quot;SqlViewer&quot;</span>
<span class="nc" id="L817">      jMenuItemToolsSqlViewer.setMnemonic('S');</span>
<span class="nc" id="L818">      jMenuItemToolsSqlViewer.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L820">	  String title = jMenuItemToolsSqlViewer.getText();</span>
<span class="nc bnc" id="L821" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
<span class="nc" id="L822">	    final SqlViewer sql = new SqlViewer(null);</span>
<span class="nc" id="L823">	    final Container frame = createFrame(</span>
<span class="nc" id="L824">		m_Self, title, sql, new BorderLayout(), </span>
<span class="nc" id="L825">		BorderLayout.CENTER, -1, -1, null, false, true);</span>

	    // custom listener
<span class="nc bnc" id="L828" title="All 2 branches missed.">	    if (frame instanceof ChildFrameMDI) {</span>
<span class="nc" id="L829">	      ((ChildFrameMDI) frame).addInternalFrameListener(new InternalFrameAdapter() {</span>
		public void internalFrameClosing(InternalFrameEvent e) {
<span class="nc" id="L831">		  sql.saveSize();</span>
<span class="nc" id="L832">		  ((ChildFrameMDI) frame).dispose();</span>
<span class="nc" id="L833">		}</span>
	      });
	    }
<span class="nc bnc" id="L836" title="All 2 branches missed.">	    else if (frame instanceof ChildFrameSDI) {</span>
<span class="nc" id="L837">	      ((ChildFrameSDI) frame).addWindowListener(new WindowAdapter() {</span>
		public void windowClosing(WindowEvent e) {
<span class="nc" id="L839">		  sql.saveSize();</span>
<span class="nc" id="L840">		  ((ChildFrameSDI) frame).dispose();</span>
<span class="nc" id="L841">		}</span>
	      });
	    }
	  }
	  else {
<span class="nc" id="L846">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L848">	}</span>
      });
      
      // Tools/Bayes net editor
      // Tools/Bayes net editor
<span class="nc" id="L853">      final JMenuItem jMenuItemBayesNet = new JMenuItem();</span>
<span class="nc" id="L854">      jMenuTools.add(jMenuItemBayesNet);</span>
<span class="nc" id="L855">      jMenuItemBayesNet.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemBayesNet_SetText_Text&quot;));</span>
<span class="nc" id="L856">      jMenuItemBayesNet.setMnemonic('N');</span>

<span class="nc" id="L858">      jMenuItemBayesNet.addActionListener(new ActionListener() {</span>
        public void actionPerformed(ActionEvent e) {
<span class="nc" id="L860">          String title = jMenuItemBayesNet.getText();</span>
          
<span class="nc bnc" id="L862" title="All 2 branches missed.">          if (!containsWindow(title)) {</span>
<span class="nc" id="L863">            final GUI bayesNetGUI = new GUI();</span>
<span class="nc" id="L864">            final Container frame = createFrame(</span>
<span class="nc" id="L865">                m_Self, title, bayesNetGUI, new BorderLayout(), </span>
<span class="nc" id="L866">                BorderLayout.CENTER, 800, 600, bayesNetGUI.getMenuBar(), false, true);</span>
          }
          else {
<span class="nc" id="L869">            showWindow(getWindow(title));</span>
          }          
<span class="nc" id="L871">        }       </span>
      });

      // Tools/EnsembleLibrary
      /* currently disabled due to bugs... FracPete
      jMenuItemToolsEnsembleLibrary = new JMenuItem();
      jMenuTools.add(jMenuItemToolsEnsembleLibrary);
      jMenuItemToolsEnsembleLibrary.setText(&quot;EnsembleLibrary&quot;);
      jMenuItemToolsEnsembleLibrary.setMnemonic('E');
      jMenuItemToolsEnsembleLibrary.addActionListener(new ActionListener() {
	public void actionPerformed(ActionEvent evt) {
	  String title = jMenuItemToolsEnsembleLibrary.getText();
	  if (!containsWindow(title)) {
	    EnsembleLibrary value = new EnsembleLibrary();
	    EnsembleLibraryEditor libraryEditor = new EnsembleLibraryEditor();
	    libraryEditor.setValue(value);
	    createFrame(
		m_Self, title, libraryEditor.getCustomEditor(), new BorderLayout(), 
		BorderLayout.CENTER, 800, 600, null, true, true);
	  }
	  else {
	    showWindow(getWindow(title));
	  }
	}
      });
      */

      // Visualization
<span class="nc" id="L899">      jMenuVisualization = new JMenu();</span>
<span class="nc" id="L900">      jMenuBar.add(jMenuVisualization);</span>
<span class="nc" id="L901">      jMenuVisualization.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuVisualization_SetText_Text&quot;));</span>
<span class="nc" id="L902">      jMenuVisualization.setMnemonic('V');</span>

      // Visualization/Plot
<span class="nc" id="L905">      jMenuItemVisualizationPlot = new JMenuItem();</span>
<span class="nc" id="L906">      jMenuVisualization.add(jMenuItemVisualizationPlot);</span>
<span class="nc" id="L907">      jMenuItemVisualizationPlot.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemVisualizationPlot_SetText_Text&quot;));</span>
<span class="nc" id="L908">      jMenuItemVisualizationPlot.setMnemonic('P');</span>
<span class="nc" id="L909">      jMenuItemVisualizationPlot.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
	  // choose file
<span class="nc" id="L912">	  int retVal = m_FileChooserPlot.showOpenDialog(m_Self);</span>
<span class="nc bnc" id="L913" title="All 2 branches missed.">	  if (retVal != JFileChooser.APPROVE_OPTION)</span>
<span class="nc" id="L914">	    return;</span>

	  // build plot
<span class="nc" id="L917">	  VisualizePanel panel = new VisualizePanel();</span>
<span class="nc" id="L918">	  String filenames = &quot;&quot;;</span>
<span class="nc" id="L919">	  File[] files = m_FileChooserPlot.getSelectedFiles();</span>
<span class="nc bnc" id="L920" title="All 2 branches missed.">	  for (int j = 0; j &lt; files.length; j++) {</span>
<span class="nc" id="L921">	    String filename = files[j].getAbsolutePath();</span>
<span class="nc bnc" id="L922" title="All 2 branches missed.">	    if (j &gt; 0)</span>
<span class="nc" id="L923">	      filenames += &quot;, &quot;;</span>
<span class="nc" id="L924">	    filenames += filename;</span>
<span class="nc" id="L925">	    System.err.println(Messages.getInstance().getString(&quot;Main_InitGUI_Error_Text&quot;) + filename);</span>
	    try {
<span class="nc" id="L927">	      Reader r = new java.io.BufferedReader(new FileReader(filename));</span>
<span class="nc" id="L928">	      Instances i = new Instances(r);</span>
<span class="nc" id="L929">	      i.setClassIndex(i.numAttributes()-1);</span>
<span class="nc" id="L930">	      PlotData2D pd1 = new PlotData2D(i);</span>

<span class="nc bnc" id="L932" title="All 2 branches missed.">	      if (j == 0) {</span>
<span class="nc" id="L933">		pd1.setPlotName(Messages.getInstance().getString(&quot;Main_InitGUI_Pd1_SetPlotName_Text_First&quot;));</span>
<span class="nc" id="L934">		panel.setMasterPlot(pd1);</span>
	      } else {
<span class="nc" id="L936">		pd1.setPlotName(Messages.getInstance().getString(&quot;Main_InitGUI_Pd1_SetPlotName_Text_Second&quot;) + (j+1));</span>
<span class="nc" id="L937">		pd1.m_useCustomColour = true;</span>
<span class="nc bnc" id="L938" title="All 2 branches missed.">		pd1.m_customColour = (j % 2 == 0) ? Color.red : Color.blue; </span>
<span class="nc" id="L939">		panel.addPlot(pd1);</span>
	      }
	    }
<span class="nc" id="L942">	    catch (Exception e) {</span>
<span class="nc" id="L943">	      e.printStackTrace();</span>
<span class="nc" id="L944">	      JOptionPane.showMessageDialog(</span>
<span class="nc" id="L945">		  m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_First&quot;) + files[j] + Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_Second&quot;) + e.getMessage());</span>
<span class="nc" id="L946">	      return;</span>
	    }
	  }

	  // create frame
<span class="nc" id="L951">	  createFrame(</span>
<span class="nc" id="L952">	      m_Self, jMenuItemVisualizationPlot.getText() + &quot; - &quot; + filenames, </span>
<span class="nc" id="L953">	      panel, new BorderLayout(), </span>
<span class="nc" id="L954">	      BorderLayout.CENTER, 800, 600, null, true, true);</span>
<span class="nc" id="L955">	}</span>
      });

      // Visualization/ROC
      // based on this Wiki article:
      // http://weka.sourceforge.net/wiki/index.php/Visualizing_ROC_curve
<span class="nc" id="L961">      jMenuItemVisualizationROC = new JMenuItem();</span>
<span class="nc" id="L962">      jMenuVisualization.add(jMenuItemVisualizationROC);</span>
<span class="nc" id="L963">      jMenuItemVisualizationROC.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemVisualizationROC_SetText_Text&quot;));</span>
<span class="nc" id="L964">      jMenuItemVisualizationROC.setMnemonic('R');</span>
<span class="nc" id="L965">      jMenuItemVisualizationROC.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
	  // choose file
<span class="nc" id="L968">	  int retVal = m_FileChooserROC.showOpenDialog(m_Self);</span>
<span class="nc bnc" id="L969" title="All 2 branches missed.">	  if (retVal != JFileChooser.APPROVE_OPTION)</span>
<span class="nc" id="L970">	    return;</span>

	  // create plot
<span class="nc" id="L973">	  String filename  = m_FileChooserROC.getSelectedFile().getAbsolutePath();</span>
<span class="nc" id="L974">	  Instances result = null;</span>
	  try {
<span class="nc" id="L976">	    result = new Instances(new BufferedReader(new FileReader(filename)));</span>
	  }
<span class="nc" id="L978">	  catch (Exception e) {</span>
<span class="nc" id="L979">	    e.printStackTrace();</span>
<span class="nc" id="L980">	    JOptionPane.showMessageDialog(</span>
<span class="nc" id="L981">		m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_Third&quot;) + filename + Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_Fourth&quot;) + e.getMessage());</span>
<span class="nc" id="L982">	    return;</span>
	  }
<span class="nc" id="L984">	  result.setClassIndex(result.numAttributes() - 1);</span>
<span class="nc" id="L985">	  ThresholdVisualizePanel vmc = new ThresholdVisualizePanel();</span>
<span class="nc" id="L986">	  vmc.setROCString(Messages.getInstance().getString(&quot;Main_InitGUI_Vmc_SetROCString_Text&quot;) + </span>
<span class="nc" id="L987">	      Utils.doubleToString(ThresholdCurve.getROCArea(result), 4) + &quot;)&quot;);</span>
<span class="nc" id="L988">	  vmc.setName(result.relationName());</span>
<span class="nc" id="L989">	  PlotData2D tempd = new PlotData2D(result);</span>
<span class="nc" id="L990">	  tempd.setPlotName(result.relationName());</span>
<span class="nc" id="L991">	  tempd.addInstanceNumberAttribute();</span>
	  try {
<span class="nc" id="L993">	    vmc.addPlot(tempd);</span>
	  }
<span class="nc" id="L995">	  catch (Exception e) {</span>
<span class="nc" id="L996">	    e.printStackTrace();</span>
<span class="nc" id="L997">	    JOptionPane.showMessageDialog(</span>
<span class="nc" id="L998">		m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_Fifth&quot;) + e.getMessage());</span>
<span class="nc" id="L999">	    return;</span>
	  }

<span class="nc" id="L1002">	  createFrame(</span>
<span class="nc" id="L1003">	      m_Self, jMenuItemVisualizationROC.getText() + &quot; - &quot; + filename, </span>
<span class="nc" id="L1004">	      vmc, new BorderLayout(), </span>
<span class="nc" id="L1005">	      BorderLayout.CENTER, 800, 600, null, true, true);</span>
<span class="nc" id="L1006">	}</span>
      });

      // Visualization/TreeVisualizer
<span class="nc" id="L1010">      jMenuItemVisualizationTreeVisualizer = new JMenuItem();</span>
<span class="nc" id="L1011">      jMenuVisualization.add(jMenuItemVisualizationTreeVisualizer);</span>
<span class="nc" id="L1012">      jMenuItemVisualizationTreeVisualizer.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemVisualizationTreeVisualizer_SetText_Text&quot;));</span>
<span class="nc" id="L1013">      jMenuItemVisualizationTreeVisualizer.setMnemonic('T');</span>
<span class="nc" id="L1014">      jMenuItemVisualizationTreeVisualizer.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
	  // choose file
<span class="nc" id="L1017">	  int retVal = m_FileChooserTreeVisualizer.showOpenDialog(m_Self);</span>
<span class="nc bnc" id="L1018" title="All 2 branches missed.">	  if (retVal != JFileChooser.APPROVE_OPTION)</span>
<span class="nc" id="L1019">	    return;</span>

	  // build tree
<span class="nc" id="L1022">	  String filename = m_FileChooserTreeVisualizer.getSelectedFile().getAbsolutePath();</span>
<span class="nc" id="L1023">	  TreeBuild builder = new TreeBuild();</span>
<span class="nc" id="L1024">	  Node top = null;</span>
<span class="nc" id="L1025">	  NodePlace arrange = new PlaceNode2();</span>
	  try {
<span class="nc" id="L1027">	    top = builder.create(new FileReader(filename));</span>
	  }
<span class="nc" id="L1029">	  catch (Exception e) {</span>
<span class="nc" id="L1030">	    e.printStackTrace();</span>
<span class="nc" id="L1031">	    JOptionPane.showMessageDialog(</span>
<span class="nc" id="L1032">		m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_Sixth&quot;) + filename + Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_Seventh&quot;) + e.getMessage());</span>
<span class="nc" id="L1033">	    return;</span>
	  }

	  // create frame
<span class="nc" id="L1037">	  createFrame(</span>
<span class="nc" id="L1038">	      m_Self, jMenuItemVisualizationTreeVisualizer.getText() + &quot; - &quot; + filename, </span>
<span class="nc" id="L1039">	      new TreeVisualizer(null, top, arrange), new BorderLayout(), </span>
<span class="nc" id="L1040">	      BorderLayout.CENTER, 800, 600, null, true, true);</span>
<span class="nc" id="L1041">	}</span>
      });

      // Visualization/GraphVisualizer
<span class="nc" id="L1045">      jMenuItemVisualizationGraphVisualizer = new JMenuItem();</span>
<span class="nc" id="L1046">      jMenuVisualization.add(jMenuItemVisualizationGraphVisualizer);</span>
<span class="nc" id="L1047">      jMenuItemVisualizationGraphVisualizer.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemVisualizationGraphVisualizer_SetText_Text&quot;));</span>
<span class="nc" id="L1048">      jMenuItemVisualizationGraphVisualizer.setMnemonic('G');</span>
<span class="nc" id="L1049">      jMenuItemVisualizationGraphVisualizer.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
	  // choose file
<span class="nc" id="L1052">	  int retVal = m_FileChooserGraphVisualizer.showOpenDialog(m_Self);</span>
<span class="nc bnc" id="L1053" title="All 2 branches missed.">	  if (retVal != JFileChooser.APPROVE_OPTION)</span>
<span class="nc" id="L1054">	    return;</span>

	  // build graph
<span class="nc" id="L1057">	  String filename = m_FileChooserGraphVisualizer.getSelectedFile().getAbsolutePath();</span>
<span class="nc" id="L1058">	  GraphVisualizer panel = new GraphVisualizer();</span>
	  try{
<span class="nc bnc" id="L1060" title="All 2 branches missed.">	    if (    filename.toLowerCase().endsWith(&quot;.xml&quot;) </span>
<span class="nc bnc" id="L1061" title="All 2 branches missed.">		|| filename.toLowerCase().endsWith(&quot;.bif&quot;) ) {</span>
<span class="nc" id="L1062">	      panel.readBIF(new FileInputStream(filename));</span>
	    }
	    else {
<span class="nc" id="L1065">	      panel.readDOT(new FileReader(filename));</span>
	    }
	  }
<span class="nc" id="L1068">	  catch (Exception e) {</span>
<span class="nc" id="L1069">	    e.printStackTrace();</span>
<span class="nc" id="L1070">	    JOptionPane.showMessageDialog(</span>
<span class="nc" id="L1071">		m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_Eighth&quot;) + filename + Messages.getInstance().getString(&quot;Main_InitGUI_Exception_JOptionPaneShowMessageDialog_Text_nineth&quot;) + e.getMessage());</span>
<span class="nc" id="L1072">	    return;</span>
	  }

	  // create frame
<span class="nc" id="L1076">	  createFrame(</span>
<span class="nc" id="L1077">	      m_Self, jMenuItemVisualizationGraphVisualizer.getText() + &quot; - &quot; + filename, </span>
<span class="nc" id="L1078">	      panel, new BorderLayout(), </span>
<span class="nc" id="L1079">	      BorderLayout.CENTER, 800, 600, null, true, true);</span>
<span class="nc" id="L1080">	}</span>
      });

      // Visualization/BoundaryVisualizer
<span class="nc" id="L1084">      jMenuItemVisualizationBoundaryVisualizer = new JMenuItem();</span>
<span class="nc" id="L1085">      jMenuVisualization.add(jMenuItemVisualizationBoundaryVisualizer);</span>
<span class="nc" id="L1086">      jMenuItemVisualizationBoundaryVisualizer.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemVisualizationBoundaryVisualizer_SetText_Text&quot;));</span>
<span class="nc" id="L1087">      jMenuItemVisualizationBoundaryVisualizer.setMnemonic('B');</span>
<span class="nc" id="L1088">      jMenuItemVisualizationBoundaryVisualizer.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1090">	  String title = jMenuItemVisualizationBoundaryVisualizer.getText();</span>
<span class="nc bnc" id="L1091" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
<span class="nc" id="L1092">	    createFrame(</span>
<span class="nc" id="L1093">		m_Self, title, new BoundaryVisualizer(), new BorderLayout(), </span>
<span class="nc" id="L1094">		BorderLayout.CENTER, 800, 600, null, true, true);</span>
	    // dont' do a System.exit after last window got closed!
<span class="nc" id="L1096">	    BoundaryVisualizer.setExitIfNoWindowsOpen(false);</span>
	  }
	  else {
<span class="nc" id="L1099">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L1101">	}</span>
      });

      // Extensions
<span class="nc" id="L1105">      jMenuExtensions = new JMenu(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuExtensions_JMenu_Text&quot;));</span>
<span class="nc" id="L1106">      jMenuExtensions.setMnemonic(java.awt.event.KeyEvent.VK_E);</span>
<span class="nc" id="L1107">      jMenuBar.add(jMenuExtensions);</span>
<span class="nc" id="L1108">      jMenuExtensions.setVisible(false);</span>

<span class="nc" id="L1110">      String extensions = GenericObjectEditor.EDITOR_PROPERTIES.getProperty(</span>
<span class="nc" id="L1111">	  MainMenuExtension.class.getName(), &quot;&quot;);</span>

<span class="nc bnc" id="L1113" title="All 2 branches missed.">      if (extensions.length() &gt; 0) {</span>
<span class="nc" id="L1114">	jMenuExtensions.setVisible(true);</span>
<span class="nc" id="L1115">	String[] classnames = GenericObjectEditor.EDITOR_PROPERTIES.getProperty(</span>
<span class="nc" id="L1116">	    MainMenuExtension.class.getName(), &quot;&quot;).split(&quot;,&quot;);</span>
<span class="nc" id="L1117">	Hashtable&lt;String,JMenu&gt; submenus = new Hashtable&lt;String,JMenu&gt;();</span>

	// add all extensions
<span class="nc bnc" id="L1120" title="All 2 branches missed.">	for (int i = 0; i &lt; classnames.length; i++) {</span>
<span class="nc" id="L1121">	  String classname = classnames[i];</span>
	  try {
<span class="nc" id="L1123">	    MainMenuExtension ext = (MainMenuExtension) Class.forName(classname).newInstance();</span>

	    // menuitem in a submenu?
<span class="nc" id="L1126">	    JMenu submenu = null;</span>
<span class="nc bnc" id="L1127" title="All 2 branches missed.">	    if (ext.getSubmenuTitle() != null) {</span>
<span class="nc" id="L1128">	      submenu = submenus.get(ext.getSubmenuTitle());</span>
<span class="nc bnc" id="L1129" title="All 2 branches missed.">	      if (submenu == null) {</span>
<span class="nc" id="L1130">		submenu = new JMenu(ext.getSubmenuTitle());</span>
<span class="nc" id="L1131">		submenus.put(ext.getSubmenuTitle(), submenu);</span>
<span class="nc" id="L1132">		insertMenuItem(jMenuExtensions, submenu);</span>
	      }
	    }

	    // create menu item
<span class="nc" id="L1137">	    JMenuItem menuitem = new JMenuItem();</span>
<span class="nc" id="L1138">	    menuitem.setText(ext.getMenuTitle());</span>
	    // does the extension need a frame or does it have its own ActionListener?
<span class="nc" id="L1140">	    ActionListener listener = ext.getActionListener(m_Self);</span>
<span class="nc bnc" id="L1141" title="All 2 branches missed.">	    if (listener != null) {</span>
<span class="nc" id="L1142">	      menuitem.addActionListener(listener);</span>
	    }
	    else {
<span class="nc" id="L1145">	      final JMenuItem finalMenuitem = menuitem;</span>
<span class="nc" id="L1146">	      final MainMenuExtension finalExt = ext;</span>
<span class="nc" id="L1147">	      menuitem.addActionListener(new ActionListener() {</span>
		public void actionPerformed(ActionEvent e) {
<span class="nc" id="L1149">		  Component frame = createFrame(</span>
<span class="nc" id="L1150">		      m_Self, finalMenuitem.getText(), </span>
<span class="nc" id="L1151">		      null, null, null, -1, -1, null, false, false);</span>
<span class="nc" id="L1152">		  finalExt.fillFrame(frame);</span>
<span class="nc" id="L1153">		  frame.setVisible(true);</span>
<span class="nc" id="L1154">		}</span>
	      });
	    }

	    // sorted insert of menu item
<span class="nc bnc" id="L1159" title="All 2 branches missed.">	    if (submenu != null)</span>
<span class="nc" id="L1160">	      insertMenuItem(submenu, menuitem);</span>
	    else
<span class="nc" id="L1162">	      insertMenuItem(jMenuExtensions, menuitem);</span>
	  }
<span class="nc" id="L1164">	  catch (Exception e) {</span>
<span class="nc" id="L1165">	    e.printStackTrace();</span>
	  }
	}
      }

      // Windows
<span class="nc" id="L1171">      jMenuWindows = new JMenu(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuWindows_JMenu_Text&quot;));</span>
<span class="nc" id="L1172">      jMenuWindows.setMnemonic(java.awt.event.KeyEvent.VK_W);</span>
<span class="nc" id="L1173">      jMenuBar.add(jMenuWindows);</span>
<span class="nc" id="L1174">      jMenuWindows.setVisible(false);  // initially, there are no windows open</span>

      // Help
<span class="nc" id="L1177">      jMenuHelp = new JMenu();</span>
<span class="nc" id="L1178">      jMenuBar.add(jMenuHelp);</span>
<span class="nc" id="L1179">      jMenuHelp.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuHelp_SetText_Text&quot;));</span>
<span class="nc" id="L1180">      jMenuHelp.setMnemonic('H');</span>

      // Help/Homepage
<span class="nc" id="L1183">      jMenuItemHelpHomepage = new JMenuItem();</span>
<span class="nc" id="L1184">      jMenuHelp.add(jMenuItemHelpHomepage);</span>
<span class="nc" id="L1185">      jMenuItemHelpHomepage.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemHelpHomepage_SetText_Text&quot;));</span>
<span class="nc" id="L1186">      jMenuItemHelpHomepage.setMnemonic('H');</span>
<span class="nc" id="L1187">      jMenuItemHelpHomepage.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1189">	  BrowserHelper.openURL(m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_BrowserHelper_OpenURL_Text_First&quot;));</span>
<span class="nc" id="L1190">	}</span>
      });

<span class="nc" id="L1193">      jMenuHelp.add(new JSeparator());</span>

/*      // Help/WekaDoc
      jMenuItemHelpWekaDoc = new JMenuItem();
      jMenuHelp.add(jMenuItemHelpWekaDoc);
      jMenuItemHelpWekaDoc.setText(&quot;Online documentation&quot;);
      jMenuItemHelpWekaDoc.setMnemonic('D');
      jMenuItemHelpWekaDoc.addActionListener(new ActionListener() {
	public void actionPerformed(ActionEvent evt) {
	  BrowserHelper.openURL(m_Self, &quot;http://weka.sourceforge.net/wekadoc/&quot;);
	}
      }); */

      // Help/WekaWiki
<span class="nc" id="L1207">      jMenuItemHelpWekaWiki = new JMenuItem();</span>
<span class="nc" id="L1208">      jMenuHelp.add(jMenuItemHelpWekaWiki);</span>
<span class="nc" id="L1209">      jMenuItemHelpWekaWiki.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemHelpWekaWiki_SetText_Text&quot;));</span>
<span class="nc" id="L1210">      jMenuItemHelpWekaWiki.setMnemonic('W');</span>
<span class="nc" id="L1211">      jMenuItemHelpWekaWiki.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1213">	  BrowserHelper.openURL(m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_BrowserHelper_OpenURL_Text_Second&quot;));</span>
<span class="nc" id="L1214">	}</span>
      });

      // Help/Sourceforge
<span class="nc" id="L1218">      jMenuItemHelpSourceforge = new JMenuItem();</span>
<span class="nc" id="L1219">      jMenuHelp.add(jMenuItemHelpSourceforge);</span>
<span class="nc" id="L1220">      jMenuItemHelpSourceforge.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemHelpSourceforge_SetText_Text&quot;));</span>
<span class="nc" id="L1221">      jMenuItemHelpSourceforge.setMnemonic('F');</span>
<span class="nc" id="L1222">      jMenuItemHelpSourceforge.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1224">	  BrowserHelper.openURL(m_Self, Messages.getInstance().getString(&quot;Main_InitGUI_BrowserHelperOpenURL_Text_Third&quot;));</span>
<span class="nc" id="L1225">	}</span>
      });

<span class="nc" id="L1228">      jMenuHelp.add(new JSeparator());</span>

      // Help/SystemInfo
<span class="nc" id="L1231">      jMenuItemHelpSystemInfo = new JMenuItem();</span>
<span class="nc" id="L1232">      jMenuHelp.add(jMenuItemHelpSystemInfo);</span>
<span class="nc" id="L1233">      jMenuItemHelpSystemInfo.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemHelpSystemInfo_SetText_Text&quot;));</span>
<span class="nc" id="L1234">      jMenuItemHelpHomepage.setMnemonic('S');</span>
<span class="nc" id="L1235">      jMenuItemHelpSystemInfo.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1237">	  String title = jMenuItemHelpSystemInfo.getText();</span>
<span class="nc bnc" id="L1238" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
	    // get info
<span class="nc" id="L1240">	    Hashtable info = new SystemInfo().getSystemInfo();</span>

	    // sort names
<span class="nc" id="L1243">	    Vector names = new Vector();</span>
<span class="nc" id="L1244">	    Enumeration enm = info.keys();</span>
<span class="nc bnc" id="L1245" title="All 2 branches missed.">	    while (enm.hasMoreElements())</span>
<span class="nc" id="L1246">	      names.add(enm.nextElement());</span>
<span class="nc" id="L1247">	    Collections.sort(names);</span>

	    // generate table
<span class="nc" id="L1250">	    String[][] data = new String[info.size()][2];</span>
<span class="nc bnc" id="L1251" title="All 2 branches missed.">	    for (int i = 0; i &lt; names.size(); i++) {</span>
<span class="nc" id="L1252">	      data[i][0] = names.get(i).toString();</span>
<span class="nc" id="L1253">	      data[i][1] = info.get(data[i][0]).toString();</span>
	    }
<span class="nc" id="L1255">	    String[] titles = new String[]{Messages.getInstance().getString(&quot;Main_InitGUI_Title_Text_First&quot;), Messages.getInstance().getString(&quot;Main_InitGUI_Title_Text_Second&quot;)};</span>
<span class="nc" id="L1256">	    JTable table = new JTable(data, titles);</span>

<span class="nc" id="L1258">	    createFrame(</span>
<span class="nc" id="L1259">		m_Self, title, new JScrollPane(table), new BorderLayout(), </span>
<span class="nc" id="L1260">		BorderLayout.CENTER, 800, 600, null, true, true);</span>
	  }
	  else {
<span class="nc" id="L1263">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L1265">	}</span>
      });

<span class="nc" id="L1268">      jMenuHelp.add(new JSeparator());</span>

      // Help/About
<span class="nc" id="L1271">      jMenuItemHelpAbout = new JMenuItem();</span>
<span class="nc" id="L1272">      jMenuHelp.add(jMenuItemHelpAbout);</span>
<span class="nc" id="L1273">      jMenuItemHelpAbout.setText(Messages.getInstance().getString(&quot;Main_InitGUI_JMenuItemHelpAbout_SetText_Text&quot;));</span>
<span class="nc" id="L1274">      jMenuItemHelpAbout.setMnemonic('A');</span>
<span class="nc" id="L1275">      jMenuItemHelpAbout.addActionListener(new ActionListener() {</span>
	public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1277">	  String title = jMenuItemHelpAbout.getText();</span>
<span class="nc bnc" id="L1278" title="All 2 branches missed.">	  if (!containsWindow(title)) {</span>
<span class="nc" id="L1279">	    JPanel wekaPan = new JPanel();</span>
<span class="nc" id="L1280">	    wekaPan.setToolTipText(Messages.getInstance().getString(&quot;Main_InitGUI_WekaPan_JPanel_SetToolTipText_Text&quot;));</span>
<span class="nc" id="L1281">	    ImageIcon wii = new ImageIcon(Toolkit.getDefaultToolkit().getImage(ClassLoader.getSystemResource(&quot;weka/gui/weka3.gif&quot;)));</span>
<span class="nc" id="L1282">	    JLabel wekaLab = new JLabel(wii);</span>
<span class="nc" id="L1283">	    wekaPan.add(wekaLab);</span>
<span class="nc" id="L1284">	    Container frame = createFrame(</span>
<span class="nc" id="L1285">		m_Self, title, wekaPan, new BorderLayout(), </span>
<span class="nc" id="L1286">		BorderLayout.CENTER, -1, -1, null, true, true);</span>

<span class="nc" id="L1288">	    JPanel titlePan = new JPanel();</span>
<span class="nc" id="L1289">	    titlePan.setLayout(new GridLayout(8,1));</span>
<span class="nc" id="L1290">	    titlePan.setBorder(BorderFactory.createEmptyBorder(10, 5, 10, 5));</span>
<span class="nc" id="L1291">	    titlePan.add(new JLabel(Messages.getInstance().getString(&quot;Main_InitGUI_TitlePan_Add_JLabel_Text_First&quot;), SwingConstants.CENTER));</span>
<span class="nc" id="L1292">	    titlePan.add(new JLabel(Messages.getInstance().getString(&quot;Main_InitGUI_TitlePan_Add_JLabel_Text_Second&quot;), SwingConstants.CENTER));</span>
<span class="nc" id="L1293">	    titlePan.add(new JLabel(Messages.getInstance().getString(&quot;Main_InitGUI_TitlePan_Add_JLabel_Text_Third&quot;)));</span>
<span class="nc" id="L1294">	    titlePan.add(new JLabel(Messages.getInstance().getString(&quot;Main_InitGUI_TitlePan_Add_JLabel_Text_Fourth&quot;) + Version.VERSION, SwingConstants.CENTER));</span>
<span class="nc" id="L1295">	    titlePan.add(new JLabel(Messages.getInstance().getString(&quot;Main_InitGUI_TitlePan_Add_JLabel_Text_Fifth&quot;)));</span>
<span class="nc" id="L1296">	    titlePan.add(new JLabel(Messages.getInstance().getString(&quot;Main_InitGUI_TitlePan_Add_JLabel_Text_Sixth&quot;) + Copyright.getFromYear() + &quot; - &quot; + Copyright.getToYear(), SwingConstants.CENTER));</span>
<span class="nc" id="L1297">	    titlePan.add(new JLabel(Copyright.getOwner(), SwingConstants.CENTER));</span>
<span class="nc" id="L1298">	    titlePan.add(new JLabel(Copyright.getAddress(), SwingConstants.CENTER));</span>

<span class="nc bnc" id="L1300" title="All 2 branches missed.">	    if (frame instanceof ChildFrameMDI) {</span>
<span class="nc" id="L1301">	      ((ChildFrameMDI) frame).getContentPane().add(titlePan, BorderLayout.NORTH);</span>
<span class="nc" id="L1302">	      ((ChildFrameMDI) frame).pack();</span>
	    }
<span class="nc bnc" id="L1304" title="All 2 branches missed.">	    else if (frame instanceof ChildFrameSDI) {</span>
<span class="nc" id="L1305">	      ((ChildFrameSDI) frame).getContentPane().add(titlePan, BorderLayout.NORTH);</span>
<span class="nc" id="L1306">	      ((ChildFrameSDI) frame).pack();</span>
	    }
	  }
	  else {
<span class="nc" id="L1310">	    showWindow(getWindow(title));</span>
	  }
<span class="nc" id="L1312">	}</span>
      });

      // size + position
<span class="nc" id="L1316">      int screenHeight = getGraphicsConfiguration().getBounds().height;</span>
<span class="nc" id="L1317">      int screenWidth  = getGraphicsConfiguration().getBounds().width;</span>
<span class="nc bnc" id="L1318" title="All 2 branches missed.">      if (m_GUIType == GUI_MDI) {</span>
<span class="nc" id="L1319">	int newHeight = (int) (((double) screenHeight) * 0.75);</span>
<span class="nc" id="L1320">	int newWidth  = (int) (((double) screenWidth)  * 0.75);</span>
<span class="nc" id="L1321">	setSize(</span>
<span class="nc bnc" id="L1322" title="All 2 branches missed.">	    1000 &gt; newWidth  ? newWidth  : 1000,</span>
<span class="nc bnc" id="L1323" title="All 2 branches missed.">		800  &gt; newHeight ? newHeight : 800);</span>
<span class="nc" id="L1324">	setLocation(</span>
<span class="nc" id="L1325">	    (screenWidth - getBounds().width) / 2,</span>
<span class="nc" id="L1326">	    (screenHeight - getBounds().height) / 2);</span>
      }
<span class="nc bnc" id="L1328" title="All 2 branches missed.">      else if (m_GUIType == GUI_SDI) {</span>
<span class="nc" id="L1329">	pack();</span>
<span class="nc" id="L1330">	setSize(screenWidth, getHeight());</span>
<span class="nc" id="L1331">	setLocation(0, 0);</span>
      }
    } 
<span class="nc" id="L1334">    catch (Exception e) {</span>
<span class="nc" id="L1335">      e.printStackTrace();</span>
    }
<span class="nc" id="L1337">  }</span>
  
  /**
   * creates and displays the title.
   * 
   * @param title 	the additional part of the title
   */
  protected void createTitle(String title) {
    String	newTitle;
    
<span class="nc" id="L1347">    newTitle = Messages.getInstance().getString(&quot;Main_CreateTitle_NewTitle_Text&quot;) + new Version();</span>
<span class="nc bnc" id="L1348" title="All 2 branches missed.">    if (title.length() != 0)</span>
<span class="nc" id="L1349">      newTitle += &quot; - &quot; + title;</span>
    
<span class="nc" id="L1351">    setTitle(newTitle);</span>
<span class="nc" id="L1352">  }</span>
  
  /**
   * adds the given child frame to the list of frames.
   * 
   * @param c 		the child frame to add
   */
  public void addChildFrame(Container c) {
<span class="nc" id="L1360">    m_ChildFrames.add(c);</span>
<span class="nc" id="L1361">    windowListChanged();</span>
<span class="nc" id="L1362">  }</span>
  
  /**
   * tries to remove the child frame, it returns true if it could do such.
   * 
   * @param c 		the child frame to remove
   * @return 		true if the child frame could be removed
   */
  public boolean removeChildFrame(Container c) {
<span class="nc" id="L1371">    boolean result = m_ChildFrames.remove(c);</span>
<span class="nc" id="L1372">    windowListChanged();</span>
<span class="nc" id="L1373">    return result;</span>
  }
  
  /**
   * brings child frame to the top.
   * 
   * @param c 		the frame to activate
   * @return 		true if frame was activated
   */
  public boolean showWindow(Container c) {
    boolean        	result;
    ChildFrameMDI	mdiFrame;
    ChildFrameSDI	sdiFrame;
    
<span class="nc bnc" id="L1387" title="All 2 branches missed.">    if (c != null) {</span>
      try {
<span class="nc bnc" id="L1389" title="All 2 branches missed.">	if (c instanceof ChildFrameMDI) {</span>
<span class="nc" id="L1390">	  mdiFrame = (ChildFrameMDI) c;</span>
<span class="nc" id="L1391">	  mdiFrame.setIcon(false);</span>
<span class="nc" id="L1392">	  mdiFrame.toFront();</span>
<span class="nc" id="L1393">	  createTitle(mdiFrame.getTitle());</span>
	}
<span class="nc bnc" id="L1395" title="All 2 branches missed.">	else if (c instanceof ChildFrameSDI) {</span>
<span class="nc" id="L1396">	  sdiFrame = (ChildFrameSDI) c;</span>
<span class="nc" id="L1397">	  sdiFrame.setExtendedState(JFrame.NORMAL);</span>
<span class="nc" id="L1398">	  sdiFrame.toFront();</span>
<span class="nc" id="L1399">	  createTitle(sdiFrame.getTitle());</span>
	}
      }
<span class="nc" id="L1402">      catch (Exception e) {</span>
<span class="nc" id="L1403">	e.printStackTrace();</span>
      }
<span class="nc" id="L1405">      result = true;</span>
    }
    else {
<span class="nc" id="L1408">      result = false;</span>
    }
    
<span class="nc" id="L1411">    return result;</span>
  }
  
  /**
   * brings the first frame to the top that is of the specified
   * window class.
   *  
   * @param windowClass	the class to display the first child for
   * @return		true, if a child was found and brought to front
   */
  public boolean showWindow(Class windowClass) {
<span class="nc" id="L1422">    return showWindow(getWindow(windowClass));</span>
  }
  
  /**
   * returns all currently open frames.
   * 
   * @return 		an iterator over all currently open frame
   */
  public Iterator getWindowList() {
<span class="nc" id="L1431">    return m_ChildFrames.iterator();</span>
  }

  /**
   * returns the first instance of the given window class, null if none can be 
   * found.
   * 
   * @param windowClass	the class to retrieve the first instance for
   * @return		null, if no instance can be found
   */
  public Container getWindow(Class windowClass) {
    Container	result;
    Iterator	iter;
    Container	current;
    
<span class="nc" id="L1446">    result = null;</span>
<span class="nc" id="L1447">    iter   = getWindowList();</span>
<span class="nc bnc" id="L1448" title="All 2 branches missed.">    while (iter.hasNext()) {</span>
<span class="nc" id="L1449">      current = (Container) iter.next();</span>
<span class="nc bnc" id="L1450" title="All 2 branches missed.">      if (current.getClass() == windowClass) {</span>
<span class="nc" id="L1451">        result = current;</span>
<span class="nc" id="L1452">        break;</span>
      }
    }
    
<span class="nc" id="L1456">    return result;</span>
  }

  /**
   * returns the first window with the given title, null if none can be 
   * found.
   * 
   * @param title	the title to look for
   * @return		null, if no instance can be found
   */
  public Container getWindow(String title) {
    Container	result;
    Iterator	iter;
    Container	current;
    boolean	found;
    
<span class="nc" id="L1472">    result = null;</span>
<span class="nc" id="L1473">    iter   = getWindowList();</span>
<span class="nc bnc" id="L1474" title="All 2 branches missed.">    while (iter.hasNext()) {</span>
<span class="nc" id="L1475">      current = (Container) iter.next();</span>
<span class="nc" id="L1476">      found   = false;</span>
      
<span class="nc bnc" id="L1478" title="All 2 branches missed.">      if (current instanceof ChildFrameMDI)</span>
<span class="nc" id="L1479">	found = ((ChildFrameMDI) current).getTitle().equals(title);</span>
<span class="nc bnc" id="L1480" title="All 2 branches missed.">      else if (current instanceof ChildFrameSDI)</span>
<span class="nc" id="L1481">	found = ((ChildFrameSDI) current).getTitle().equals(title);</span>
	
<span class="nc bnc" id="L1483" title="All 2 branches missed.">      if (found) {</span>
<span class="nc" id="L1484">        result = current;</span>
<span class="nc" id="L1485">        break;</span>
      }
    }
    
<span class="nc" id="L1489">    return result;</span>
  }
  
  /**
   * checks, whether an instance of the given window class is already in
   * the Window list.
   * 
   * @param windowClass	the class to check for an instance in the current
   * 			window list
   * @return		true if the class is already listed in the Window list
   */
  public boolean containsWindow(Class windowClass) {
<span class="nc bnc" id="L1501" title="All 2 branches missed.">    return (getWindow(windowClass) != null);</span>
  }
  
  /**
   * checks, whether a window with the given title is already in
   * the Window list.
   * 
   * @param title	the title to check for in the current window list
   * @return		true if a window with the given title is already 
   * 			listed in the Window list
   */
  public boolean containsWindow(String title) {
<span class="nc bnc" id="L1513" title="All 2 branches missed.">    return (getWindow(title) != null);</span>
  }
  
  /**
   * minimizes all windows.
   */
  public void minimizeWindows() {
    Iterator	iter;
    Container	frame;
    
<span class="nc" id="L1523">    iter = getWindowList();</span>
<span class="nc bnc" id="L1524" title="All 2 branches missed.">    while (iter.hasNext()) {</span>
<span class="nc" id="L1525">      frame = (Container) iter.next();</span>
      try {
<span class="nc bnc" id="L1527" title="All 2 branches missed.">	if (frame instanceof ChildFrameMDI)</span>
<span class="nc" id="L1528">	  ((ChildFrameMDI) frame).setIcon(true);</span>
<span class="nc bnc" id="L1529" title="All 2 branches missed.">	else if (frame instanceof ChildFrameSDI)</span>
<span class="nc" id="L1530">	  ((ChildFrameSDI) frame).setExtendedState(JFrame.ICONIFIED);</span>
      }
<span class="nc" id="L1532">      catch (Exception e) {</span>
<span class="nc" id="L1533">	e.printStackTrace();</span>
      }
    }
<span class="nc" id="L1536">  }</span>
  
  /**
   * restores all windows.
   */
  public void restoreWindows() {
    Iterator	iter;
    Container	frame;
    
<span class="nc" id="L1545">    iter = getWindowList();</span>
<span class="nc bnc" id="L1546" title="All 2 branches missed.">    while (iter.hasNext()) {</span>
<span class="nc" id="L1547">      frame = (Container) iter.next();</span>
      try {
<span class="nc bnc" id="L1549" title="All 2 branches missed.">	if (frame instanceof ChildFrameMDI)</span>
<span class="nc" id="L1550">	  ((ChildFrameMDI) frame).setIcon(false);</span>
<span class="nc bnc" id="L1551" title="All 2 branches missed.">	else if (frame instanceof ChildFrameSDI)</span>
<span class="nc" id="L1552">	  ((ChildFrameSDI) frame).setExtendedState(JFrame.NORMAL);</span>
    }
<span class="nc" id="L1554">      catch (Exception e) {</span>
<span class="nc" id="L1555">	e.printStackTrace();</span>
      }
    }
<span class="nc" id="L1558">  }</span>
  
  /**
   * is called when window list changed somehow (add or remove).
   */
  public void windowListChanged() {
<span class="nc" id="L1564">    createWindowMenu();</span>
<span class="nc" id="L1565">  }</span>
  
  /**
   * creates the menu of currently open windows.
   */
  protected synchronized void createWindowMenu() {
    Iterator          iter;
    JMenuItem         menuItem;
    int	              startIndex;
    
    // remove all existing entries
<span class="nc" id="L1576">    jMenuWindows.removeAll();</span>
    
    // minimize + restore + separator
<span class="nc" id="L1579">    menuItem = new JMenuItem(Messages.getInstance().getString(&quot;Main_CreateWindowMenu_MenuItem_JMenuItem_Text_First&quot;));</span>
<span class="nc" id="L1580">    menuItem.addActionListener(new ActionListener() {</span>
      public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1582">        minimizeWindows();</span>
<span class="nc" id="L1583">      }</span>
    });
<span class="nc" id="L1585">    jMenuWindows.add(menuItem);</span>
    
<span class="nc" id="L1587">    menuItem = new JMenuItem(Messages.getInstance().getString(&quot;Main_CreateWindowMenu_MenuItem_JMenuItem_Text_Second&quot;));</span>
<span class="nc" id="L1588">    menuItem.addActionListener(new ActionListener() {</span>
      public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1590">        restoreWindows();</span>
<span class="nc" id="L1591">      }</span>
    });
<span class="nc" id="L1593">    jMenuWindows.add(menuItem);</span>
    
<span class="nc" id="L1595">    jMenuWindows.addSeparator();</span>
    
    // windows
<span class="nc" id="L1598">    startIndex = jMenuWindows.getMenuComponentCount() - 1;</span>
<span class="nc" id="L1599">    iter = getWindowList();</span>
<span class="nc" id="L1600">    jMenuWindows.setVisible(iter.hasNext());</span>
<span class="nc bnc" id="L1601" title="All 2 branches missed.">    while (iter.hasNext()) {</span>
<span class="nc" id="L1602">      Container frame = (Container) iter.next();</span>
<span class="nc bnc" id="L1603" title="All 2 branches missed.">      if (frame instanceof ChildFrameMDI)</span>
<span class="nc" id="L1604">	menuItem = new JMenuItem(((ChildFrameMDI) frame).getTitle());</span>
<span class="nc bnc" id="L1605" title="All 2 branches missed.">      else if (frame instanceof ChildFrameSDI)</span>
<span class="nc" id="L1606">	menuItem = new JMenuItem(((ChildFrameSDI) frame).getTitle());</span>
<span class="nc" id="L1607">      insertMenuItem(jMenuWindows, menuItem, startIndex);</span>
<span class="nc" id="L1608">      menuItem.setActionCommand(Integer.toString(frame.hashCode()));</span>
<span class="nc" id="L1609">      menuItem.addActionListener(new ActionListener() {</span>
        public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L1611">          Container frame = null;</span>
<span class="nc" id="L1612">          Iterator iter = getWindowList();</span>
<span class="nc bnc" id="L1613" title="All 2 branches missed.">          while (iter.hasNext()) {</span>
<span class="nc" id="L1614">            frame = (Container) iter.next();</span>
<span class="nc" id="L1615">            String hashFrame = Integer.toString(frame.hashCode());</span>
<span class="nc bnc" id="L1616" title="All 2 branches missed.">            if (hashFrame.equals(evt.getActionCommand())) {</span>
<span class="nc" id="L1617">              showWindow(frame);</span>
<span class="nc" id="L1618">              break;</span>
            }
          }
<span class="nc" id="L1621">          showWindow(frame);</span>
<span class="nc" id="L1622">        }</span>
      });
    }
<span class="nc" id="L1625">  }</span>
  
  /**
   * Shows or hides this component depending on the value of parameter b.
   * 
   * @param b		if true, shows this component; otherwise, hides this 
   * 			component
   */
  public void setVisible(boolean b) {
<span class="nc" id="L1634">    super.setVisible(b);</span>
    
<span class="nc bnc" id="L1636" title="All 2 branches missed.">    if (b)</span>
<span class="nc" id="L1637">      paint(this.getGraphics());</span>
<span class="nc" id="L1638">  }</span>
  
  /**
   * Create the singleton instance of the Main GUI.
   * 
   * @param args 	commandline options
   */
  public static void createSingleton(String[] args) {
<span class="nc bnc" id="L1646" title="All 2 branches missed.">    if (m_MainSingleton == null)</span>
<span class="nc" id="L1647">      m_MainSingleton = new Main();</span>
    
    // set options
    try {
<span class="nc" id="L1651">      m_MainSingleton.setOptions(args);</span>
    }
<span class="nc" id="L1653">    catch (Exception e) {</span>
<span class="nc" id="L1654">      e.printStackTrace();</span>
    }

    // notify listeners (if any)
<span class="nc bnc" id="L1658" title="All 2 branches missed.">    for (int i = 0; i &lt; m_StartupListeners.size(); i++)</span>
<span class="nc" id="L1659">      ((StartUpListener) m_StartupListeners.elementAt(i)).startUpComplete();</span>
<span class="nc" id="L1660">  }</span>

  /**
   * Return the singleton instance of the Main GUI.
   *
   * @return the singleton instance
   */
  public static Main getSingleton() {
<span class="nc" id="L1668">    return m_MainSingleton;</span>
  }

  /**
   * Add a listener to be notified when startup is complete.
   * 
   * @param s 		a listener to add
   */
  public static void addStartupListener(StartUpListener s) {
<span class="nc" id="L1677">    m_StartupListeners.add(s);</span>
<span class="nc" id="L1678">  }</span>

  /**
   * Gets an enumeration describing the available options.
   *
   * @return 		an enumeration of all the available options.
   */
  public Enumeration listOptions(){
    Vector        	result;
    String		desc;
    SelectedTag		tag;
    int			i;

<span class="nc" id="L1691">    result = new Vector();</span>

<span class="nc" id="L1693">    desc  = &quot;&quot;;</span>
<span class="nc bnc" id="L1694" title="All 2 branches missed.">    for (i = 0; i &lt; TAGS_GUI.length; i++) {</span>
<span class="nc" id="L1695">      tag = new SelectedTag(TAGS_GUI[i].getID(), TAGS_GUI);</span>
<span class="nc" id="L1696">      desc  +=   &quot;\t&quot; + tag.getSelectedTag().getIDStr() </span>
<span class="nc" id="L1697">      	       + &quot; = &quot; + tag.getSelectedTag().getReadable()</span>
<span class="nc" id="L1698">      	       + &quot;\n&quot;;</span>
    }
<span class="nc" id="L1700">    result.addElement(new Option(</span>
<span class="nc" id="L1701">    		Messages.getInstance().getString(&quot;Main_ListOptions_Option_Text_First&quot;)</span>
<span class="nc" id="L1702">	+ desc</span>
<span class="nc" id="L1703">	+ Messages.getInstance().getString(&quot;Main_ListOptions_Option_Text_Second&quot;) + new SelectedTag(GUI_MDI, TAGS_GUI) + &quot;)&quot;,</span>
<span class="nc" id="L1704">	&quot;gui&quot;, 1, &quot;-gui &quot; + Tag.toOptionList(TAGS_GUI)));</span>

<span class="nc" id="L1706">    return result.elements();</span>
  }
  
  /**
   * returns the options of the current setup.
   *
   * @return		the current options
   */
  public String[] getOptions(){
    Vector&lt;String&gt;    	result;

<span class="nc" id="L1717">    result = new Vector();</span>

<span class="nc" id="L1719">    result.add(&quot;-gui&quot;);</span>
<span class="nc" id="L1720">    result.add(&quot;&quot; + getGUIType());</span>

<span class="nc" id="L1722">    return result.toArray(new String[result.size()]);	  </span>
  }

  /**
   * Parses the options for this object. &lt;p/&gt;
   *
   &lt;!-- options-start --&gt;
   * Valid options are: &lt;p/&gt;
   * 
   * &lt;pre&gt; -gui &amp;lt;MDI|SDI&amp;gt;
   *  Determines the layout of the GUI:
   *  MDI = MDI Layout
   *  SDI = SDI Layout
   *  (default: MDI)&lt;/pre&gt;
   * 
   &lt;!-- options-end --&gt;
   *
   * @param options	the options to use
   * @throws Exception	if setting of options fails
   */
  public void setOptions(String[] options) throws Exception {
    String	tmpStr;

<span class="nc" id="L1745">    tmpStr = Utils.getOption(&quot;gui&quot;, options);</span>
<span class="nc bnc" id="L1746" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L1747">      setGUIType(new SelectedTag(tmpStr, TAGS_GUI));</span>
    else
<span class="nc" id="L1749">      setGUIType(new SelectedTag(GUI_MDI, TAGS_GUI));</span>
<span class="nc" id="L1750">  }</span>

  /**
   * Sets the type of GUI to use. 
   *
   * @param value 	.the GUI type
   */
  public void setGUIType(SelectedTag value) {
<span class="nc bnc" id="L1758" title="All 2 branches missed.">    if (value.getTags() == TAGS_GUI) {</span>
<span class="nc" id="L1759">      m_GUIType = value.getSelectedTag().getID();</span>
<span class="nc" id="L1760">      initGUI();</span>
    }
<span class="nc" id="L1762">  }</span>

  /**
   * Gets the currently set type of GUI to display. 
   * 
   * @return 		the current GUI Type.
   */
  public SelectedTag getGUIType() {
<span class="nc" id="L1770">    return new SelectedTag(m_GUIType, TAGS_GUI);</span>
  }
  
  /**
   * starts the application.
   * 
   * @param args	the commandline arguments - ignored
   */
  public static void main(String[] args) {
<span class="nc" id="L1779">    weka.core.logging.Logger.log(weka.core.logging.Logger.Level.INFO, Messages.getInstance().getString(&quot;Main_Main_Logger_Text&quot;));</span>
    
<span class="nc" id="L1781">    LookAndFeel.setLookAndFeel();</span>
    
    try {
      // uncomment the following line to disable the memory management:
      //m_Memory.setEnabled(false);

      // help?
<span class="nc bnc" id="L1788" title="All 2 branches missed.">      if (Utils.getFlag('h', args)) {</span>
<span class="nc" id="L1789">	System.out.println();</span>
<span class="nc" id="L1790">	System.out.println(Messages.getInstance().getString(&quot;Main_Main_Text_First&quot;));</span>
<span class="nc" id="L1791">	System.out.println();</span>
<span class="nc" id="L1792">	System.out.println(Messages.getInstance().getString(&quot;Main_Main_Text_Second&quot;));</span>
<span class="nc" id="L1793">	System.out.println();</span>
<span class="nc" id="L1794">	System.out.println(&quot;-h&quot;);</span>
<span class="nc" id="L1795">	System.out.println(Messages.getInstance().getString(&quot;Main_Main_Text_Third&quot;));</span>
<span class="nc" id="L1796">	System.out.println();</span>

<span class="nc" id="L1798">	Enumeration enu = new Main().listOptions();</span>
<span class="nc bnc" id="L1799" title="All 2 branches missed.">	while (enu.hasMoreElements()) {</span>
<span class="nc" id="L1800">	  Option option = (Option) enu.nextElement();</span>
<span class="nc" id="L1801">	  System.out.println(option.synopsis());</span>
<span class="nc" id="L1802">	  System.out.println(option.description());</span>
	}

<span class="nc" id="L1805">	System.out.println();</span>
<span class="nc" id="L1806">	System.exit(0);</span>
      }
      
      // setup splash screen
<span class="nc" id="L1810">      Main.addStartupListener(new weka.gui.beans.StartUpListener() {</span>
        public void startUpComplete() {
<span class="nc" id="L1812">          m_MainCommandline = Main.getSingleton();</span>
<span class="nc" id="L1813">          m_MainCommandline.setVisible(true);</span>
<span class="nc" id="L1814">        }</span>
      });
<span class="nc" id="L1816">      Main.addStartupListener(new StartUpListener() {</span>
        public void startUpComplete() {
<span class="nc" id="L1818">          SplashWindow.disposeSplash();</span>
<span class="nc" id="L1819">        }</span>
      });
<span class="nc" id="L1821">      SplashWindow.splash(ClassLoader.getSystemResource(&quot;weka/gui/images/weka_splash.gif&quot;));</span>

      // start GUI
<span class="nc" id="L1824">      final String[] options = (String[]) args.clone();</span>
<span class="nc" id="L1825">      Thread nt = new Thread() {</span>
	public void run() {
<span class="nc" id="L1827">	  weka.gui.SplashWindow.invokeMethod(</span>
<span class="nc" id="L1828">	      Main.class.getName(), &quot;createSingleton&quot;, options);</span>
<span class="nc" id="L1829">	}</span>
      };
<span class="nc" id="L1831">      nt.start();</span>
      
<span class="nc" id="L1833">      Thread memMonitor = new Thread() {</span>
	public void run() {
<span class="nc" id="L1835">	  while(true) {</span>
	    try {
<span class="nc" id="L1837">	      Thread.sleep(4000);</span>
<span class="nc" id="L1838">	      System.gc();</span>
	      
<span class="nc bnc" id="L1840" title="All 2 branches missed.">	      if (m_Memory.isOutOfMemory()) {</span>
		// clean up
<span class="nc" id="L1842">		m_MainCommandline = null;</span>
<span class="nc" id="L1843">		System.gc();</span>
		
		// display error
<span class="nc" id="L1846">		System.err.println(Messages.getInstance().getString(&quot;Main_Main_Thread_Run_Error_Text_First&quot;));</span>
<span class="nc" id="L1847">		m_Memory.showOutOfMemory();</span>
<span class="nc" id="L1848">		System.err.println(Messages.getInstance().getString(&quot;Main_Main_Thread_Run_Error_Text_Second&quot;));</span>
<span class="nc" id="L1849">		System.exit(-1);</span>
	      }
	      
<span class="nc" id="L1852">	    } catch(InterruptedException ex) { ex.printStackTrace(); }</span>
	  }
	}
      };
      
<span class="nc" id="L1857">      memMonitor.setPriority(Thread.MAX_PRIORITY);</span>
<span class="nc" id="L1858">      memMonitor.start();</span>
    }
<span class="nc" id="L1860">    catch (Exception ex) {</span>
<span class="nc" id="L1861">      ex.printStackTrace();</span>
<span class="nc" id="L1862">      System.err.println(ex.getMessage());</span>
    }
<span class="nc" id="L1864">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>AllTests (Nov 28, 2015 2:34:31 PM)</div></body></html>