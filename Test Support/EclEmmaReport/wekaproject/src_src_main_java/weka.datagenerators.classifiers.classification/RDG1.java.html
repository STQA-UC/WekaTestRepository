<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>RDG1.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (Nov 28, 2015 2:34:31 PM)</a> &gt; <a href="../../index.html" class="el_group">wekaproject</a> &gt; <a href="../index.html" class="el_bundle">src/src/main/java</a> &gt; <a href="index.source.html" class="el_package">weka.datagenerators.classifiers.classification</a> &gt; <span class="el_source">RDG1.java</span></div><h1>RDG1.java</h1><pre class="source lang-java linenums">/*
 *    This program is free software; you can redistribute it and/or modify
 *    it under the terms of the GNU General Public License as published by
 *    the Free Software Foundation; either version 2 of the License, or
 *    (at your option) any later version.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU General Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License
 *    along with this program; if not, write to the Free Software
 *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

/*
 * RDG1.java
 * Copyright (C) 2000 University of Waikato, Hamilton, New Zealand
 *
 */

package weka.datagenerators.classifiers.classification;

import weka.core.Attribute;
import weka.core.FastVector;
import weka.core.Instance;
import weka.core.Instances;
import weka.core.Option;
import weka.core.RevisionHandler;
import weka.core.RevisionUtils;
import weka.core.Utils;
import weka.datagenerators.ClassificationGenerator;
import weka.datagenerators.Test;

import java.io.Serializable;
import java.util.Enumeration;
import java.util.Random;
import java.util.Vector;

/** 
 &lt;!-- globalinfo-start --&gt;
 * A data generator that produces data randomly by producing a decision list.&lt;br/&gt;
 * The decision list consists of rules.&lt;br/&gt;
 * Instances are generated randomly one by one. If decision list fails to classify the current instance, a new rule according to this current instance is generated and added to the decision list.&lt;br/&gt;
 * &lt;br/&gt;
 * The option -V switches on voting, which means that at the end of the generation all instances are reclassified to the class value that is supported by the most rules.&lt;br/&gt;
 * &lt;br/&gt;
 * This data generator can generate 'boolean' attributes (= nominal with the values {true, false}) and numeric attributes. The rules can be 'A' or 'NOT A' for boolean values and 'B &amp;lt; random_value' or 'B &amp;gt;= random_value' for numeric values.
 * &lt;p/&gt;
 &lt;!-- globalinfo-end --&gt;
 *
 &lt;!-- options-start --&gt;
 * Valid options are: &lt;p/&gt;
 * 
 * &lt;pre&gt; -h
 *  Prints this help.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -o &amp;lt;file&amp;gt;
 *  The name of the output file, otherwise the generated data is
 *  printed to stdout.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -r &amp;lt;name&amp;gt;
 *  The name of the relation.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -d
 *  Whether to print debug informations.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -S
 *  The seed for random function (default 1)&lt;/pre&gt;
 * 
 * &lt;pre&gt; -n &amp;lt;num&amp;gt;
 *  The number of examples to generate (default 100)&lt;/pre&gt;
 * 
 * &lt;pre&gt; -a &amp;lt;num&amp;gt;
 *  The number of attributes (default 10).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -c &amp;lt;num&amp;gt;
 *  The number of classes (default 2)&lt;/pre&gt;
 * 
 * &lt;pre&gt; -R &amp;lt;num&amp;gt;
 *  maximum size for rules (default 10) &lt;/pre&gt;
 * 
 * &lt;pre&gt; -M &amp;lt;num&amp;gt;
 *  minimum size for rules (default 1) &lt;/pre&gt;
 * 
 * &lt;pre&gt; -I &amp;lt;num&amp;gt;
 *  number of irrelevant attributes (default 0)&lt;/pre&gt;
 * 
 * &lt;pre&gt; -N
 *  number of numeric attributes (default 0)&lt;/pre&gt;
 * 
 * &lt;pre&gt; -V
 *  switch on voting (default is no voting)&lt;/pre&gt;
 * 
 &lt;!-- options-end --&gt;
 *
 * Following an example of a generated dataset: &lt;br/&gt;
 * &lt;pre&gt;
 * %
 * % weka.datagenerators.RDG1 -r expl -a 2 -c 3 -n 4 -N 1 -I 0 -M 2 -R 10 -S 2
 * %
 * relation expl
 *
 * attribute a0 {false,true}
 * attribute a1 numeric
 * attribute class {c0,c1,c2}
 *
 * data
 *
 * true,0.496823,c0
 * false,0.743158,c1
 * false,0.408285,c1
 * false,0.993687,c2
 * %
 * % Number of attributes chosen as irrelevant = 0
 * %
 * % DECISIONLIST (number of rules = 3):
 * % RULE 0:   c0 := a1 &amp;lt; 0.986, a0
 * % RULE 1:   c1 := a1 &amp;lt; 0.95, not(a0)
 * % RULE 2:   c2 := not(a0), a1 &amp;gt;= 0.562
 * &lt;/pre&gt;
 *
 * @author Gabi Schmidberger (gabi@cs.waikato.ac.nz)
 * @version $Revision: 5674 $ 
 */
public class RDG1 
  extends ClassificationGenerator {

  /** for serialization */
  static final long serialVersionUID = 7751005204635320414L;  
  
  /**
   * class to represent decisionlist
   */
<span class="nc" id="L136">  private class RuleList </span>
    implements Serializable, RevisionHandler {

    /** for serialization */
    static final long serialVersionUID = 2830125413361938177L;
    
    /** rule list */
<span class="nc" id="L143">    private FastVector m_RuleList = null;</span>
    
    /** class */
<span class="nc" id="L146">    double m_ClassValue = 0.0;</span>

    /**
     * returns the class value
     * 
     * @return the class value
     */
    public double getClassValue() { 
<span class="nc" id="L154">      return m_ClassValue; </span>
    }
    
    /**
     * sets the class value
     * 
     * @param newClassValue the new classvalue
     */
    public void setClassValue(double newClassValue) {
<span class="nc" id="L163">      m_ClassValue = newClassValue;</span>
<span class="nc" id="L164">    }</span>
    
    /**
     * adds the given test to the list
     * 
     * @param newTest the test to add
     */
    private void addTest (Test newTest) { 
<span class="nc bnc" id="L172" title="All 2 branches missed.">      if (m_RuleList == null)</span>
<span class="nc" id="L173">	m_RuleList = new FastVector();</span>
      
<span class="nc" id="L175">      m_RuleList.addElement(newTest);</span>
<span class="nc" id="L176">    }</span>
    
    /**
     * classifies the given example
     * 
     * @param example the instance to classify
     * @return the classification
     * @throws Exception if classification fails
     */
    private double classifyInstance (Instance example) throws Exception {
<span class="nc" id="L186">      boolean passedAllTests = true;</span>
<span class="nc bnc" id="L187" title="All 2 branches missed.">      for (Enumeration e = m_RuleList.elements(); </span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">	   passedAllTests &amp;&amp; e.hasMoreElements(); ) {</span>
<span class="nc" id="L189">	Test test = (Test) e.nextElement();</span>
<span class="nc" id="L190">	passedAllTests = test.passesTest(example);</span>
      }
<span class="nc bnc" id="L192" title="All 2 branches missed.">      if (passedAllTests) return m_ClassValue;</span>
<span class="nc" id="L193">      else return -1.0;</span>
    }
    
    /**
     * returns a string representation of the rule list
     * 
     * @return the rule list as string
     */
    public String toString () {
<span class="nc" id="L202">      StringBuffer str = new StringBuffer();</span>
<span class="nc" id="L203">      str = str.append(&quot;  c&quot; + (int) m_ClassValue + &quot; := &quot;);</span>
<span class="nc" id="L204">      Enumeration e = m_RuleList.elements();</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">      if (e.hasMoreElements()) {</span>
<span class="nc" id="L206">	Test test = (Test) e.nextElement();</span>
<span class="nc" id="L207">	str = str.append(test.toPrologString()); </span>
      }
<span class="nc bnc" id="L209" title="All 2 branches missed.">      while (e.hasMoreElements()) {</span>
<span class="nc" id="L210">	Test test = (Test) e.nextElement();</span>
<span class="nc" id="L211">	str = str.append(&quot;, &quot; + test.toPrologString());       </span>
      }
<span class="nc" id="L213">      return str.toString();</span>
    } 
    
    /**
     * Returns the revision string.
     * 
     * @return		the revision
     */
    public String getRevision() {
<span class="nc" id="L222">      return RevisionUtils.extract(&quot;$Revision: 5674 $&quot;);</span>
    }
  } /*end class RuleList ******/

  /** Number of attribute the dataset should have */
  protected int m_NumAttributes;

  /** Number of Classes the dataset should have */
  protected int m_NumClasses;

  /** maximum rule size*/ 
  private int m_MaxRuleSize;
  
  /** minimum rule size*/ 
  private int m_MinRuleSize;
  
  /** number of irrelevant attributes.*/
  private int m_NumIrrelevant;

  /** number of numeric attribute*/
  private int m_NumNumeric;
 
  /** flag that stores if voting is wished*/ 
<span class="nc" id="L245">  private boolean m_VoteFlag = false;</span>

   /** decision list */
<span class="nc" id="L248">  private FastVector m_DecisionList = null;</span>

  /** array defines which attributes are irrelevant, with:
   * true = attribute is irrelevant; false = attribute is not irrelevant*/
  boolean[] m_AttList_Irr;

  /**
   * initializes the generator with default values
   */
  public RDG1() {
<span class="nc" id="L258">    super();</span>

<span class="nc" id="L260">    setNumAttributes(defaultNumAttributes());</span>
<span class="nc" id="L261">    setNumClasses(defaultNumClasses());</span>
<span class="nc" id="L262">    setMaxRuleSize(defaultMaxRuleSize());</span>
<span class="nc" id="L263">    setMinRuleSize(defaultMinRuleSize());</span>
<span class="nc" id="L264">    setNumIrrelevant(defaultNumIrrelevant());</span>
<span class="nc" id="L265">    setNumNumeric(defaultNumNumeric());</span>
<span class="nc" id="L266">  }</span>

  /**
   * Returns a string describing this data generator.
   *
   * @return a description of the data generator suitable for
   * displaying in the explorer/experimenter gui
   */
  public String globalInfo() {
<span class="nc" id="L275">    return</span>
<span class="nc" id="L276">        &quot;A data generator that produces data randomly by producing a decision list.\n&quot;</span>
      + &quot;The decision list consists of rules.\n&quot;
      + &quot;Instances are generated randomly one by one. If decision list fails &quot;
      + &quot;to classify the current instance, a new rule according to this current &quot;
      + &quot;instance is generated and added to the decision list.\n\n&quot;
      + &quot;The option -V switches on voting, which means that at the end &quot;
      + &quot;of the generation all instances are &quot;
      + &quot;reclassified to the class value that is supported by the most rules.\n\n&quot;
      + &quot;This data generator can generate 'boolean' attributes (= nominal with &quot;
      + &quot;the values {true, false}) and numeric attributes. The rules can be &quot;
      + &quot;'A' or 'NOT A' for boolean values and 'B &lt; random_value' or &quot;
      + &quot;'B &gt;= random_value' for numeric values.&quot;;
  }

 /**
   * Returns an enumeration describing the available options.
   *
   * @return an enumeration of all the available options
   */
  public Enumeration listOptions() {
<span class="nc" id="L296">    Vector result = enumToVector(super.listOptions());</span>

<span class="nc" id="L298">    result.addElement(new Option(</span>
<span class="nc" id="L299">          &quot;\tThe number of attributes (default &quot; </span>
<span class="nc" id="L300">          + defaultNumAttributes() + &quot;).&quot;,</span>
<span class="nc" id="L301">          &quot;a&quot;, 1, &quot;-a &lt;num&gt;&quot;));</span>

<span class="nc" id="L303">    result.addElement(new Option(</span>
<span class="nc" id="L304">        &quot;\tThe number of classes (default &quot; + defaultNumClasses() + &quot;)&quot;,</span>
<span class="nc" id="L305">        &quot;c&quot;, 1, &quot;-c &lt;num&gt;&quot;));</span>

<span class="nc" id="L307">    result.addElement(new Option(</span>
<span class="nc" id="L308">          &quot;\tmaximum size for rules (default &quot; </span>
<span class="nc" id="L309">          + defaultMaxRuleSize() + &quot;) &quot;,</span>
<span class="nc" id="L310">          &quot;R&quot;, 1, &quot;-R &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L312">    result.addElement(new Option(</span>
<span class="nc" id="L313">          &quot;\tminimum size for rules (default &quot; </span>
<span class="nc" id="L314">          + defaultMinRuleSize() + &quot;) &quot;,</span>
<span class="nc" id="L315">          &quot;M&quot;, 1, &quot;-M &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L317">    result.addElement(new Option(</span>
<span class="nc" id="L318">          &quot;\tnumber of irrelevant attributes (default &quot; </span>
<span class="nc" id="L319">          + defaultNumIrrelevant() + &quot;)&quot;,</span>
<span class="nc" id="L320">          &quot;I&quot;, 1, &quot;-I &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L322">    result.addElement(new Option(</span>
<span class="nc" id="L323">          &quot;\tnumber of numeric attributes (default &quot;</span>
<span class="nc" id="L324">          + defaultNumNumeric() + &quot;)&quot;,</span>
<span class="nc" id="L325">          &quot;N&quot;, 1, &quot;-N&quot;));</span>
    
<span class="nc" id="L327">    result.addElement(new Option(</span>
<span class="nc" id="L328">          &quot;\tswitch on voting (default is no voting)&quot;,</span>
<span class="nc" id="L329">          &quot;V&quot;, 1, &quot;-V&quot;));</span>
    
<span class="nc" id="L331">    return result.elements();</span>
  }

  /**
   * Parses a list of options for this object. &lt;p/&gt;
   *
   &lt;!-- options-start --&gt;
   * Valid options are: &lt;p/&gt;
   * 
   * &lt;pre&gt; -h
   *  Prints this help.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -o &amp;lt;file&amp;gt;
   *  The name of the output file, otherwise the generated data is
   *  printed to stdout.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -r &amp;lt;name&amp;gt;
   *  The name of the relation.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -d
   *  Whether to print debug informations.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -S
   *  The seed for random function (default 1)&lt;/pre&gt;
   * 
   * &lt;pre&gt; -n &amp;lt;num&amp;gt;
   *  The number of examples to generate (default 100)&lt;/pre&gt;
   * 
   * &lt;pre&gt; -a &amp;lt;num&amp;gt;
   *  The number of attributes (default 10).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -c &amp;lt;num&amp;gt;
   *  The number of classes (default 2)&lt;/pre&gt;
   * 
   * &lt;pre&gt; -R &amp;lt;num&amp;gt;
   *  maximum size for rules (default 10) &lt;/pre&gt;
   * 
   * &lt;pre&gt; -M &amp;lt;num&amp;gt;
   *  minimum size for rules (default 1) &lt;/pre&gt;
   * 
   * &lt;pre&gt; -I &amp;lt;num&amp;gt;
   *  number of irrelevant attributes (default 0)&lt;/pre&gt;
   * 
   * &lt;pre&gt; -N
   *  number of numeric attributes (default 0)&lt;/pre&gt;
   * 
   * &lt;pre&gt; -V
   *  switch on voting (default is no voting)&lt;/pre&gt;
   * 
   &lt;!-- options-end --&gt;
   *
   * @param options the list of options as an array of strings
   * @throws Exception if an option is not supported
   */
  public void setOptions(String[] options) throws Exception {
    String      tmpStr;

<span class="nc" id="L388">    super.setOptions(options);</span>

<span class="nc" id="L390">    tmpStr = Utils.getOption('a', options);</span>
<span class="nc bnc" id="L391" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L392">      setNumAttributes(Integer.parseInt(tmpStr));</span>
    else
<span class="nc" id="L394">      setNumAttributes(defaultNumAttributes());</span>

<span class="nc" id="L396">    tmpStr = Utils.getOption('c', options);</span>
<span class="nc bnc" id="L397" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L398">      setNumClasses(Integer.parseInt(tmpStr));</span>
    else
<span class="nc" id="L400">      setNumClasses(defaultNumClasses());</span>

<span class="nc" id="L402">    tmpStr = Utils.getOption('R', options);</span>
<span class="nc bnc" id="L403" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L404">      setMaxRuleSize(Integer.parseInt(tmpStr));</span>
    else 
<span class="nc" id="L406">      setMaxRuleSize(defaultMaxRuleSize());</span>

<span class="nc" id="L408">    tmpStr = Utils.getOption('M', options);</span>
<span class="nc bnc" id="L409" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L410">      setMinRuleSize(Integer.parseInt(tmpStr));</span>
    else
<span class="nc" id="L412">      setMinRuleSize(defaultMinRuleSize());</span>

<span class="nc" id="L414">    tmpStr = Utils.getOption('I', options);</span>
<span class="nc bnc" id="L415" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L416">      setNumIrrelevant(Integer.parseInt(tmpStr));</span>
    else
<span class="nc" id="L418">      setNumIrrelevant(defaultNumIrrelevant());</span>

<span class="nc bnc" id="L420" title="All 2 branches missed.">    if ((getNumAttributes() - getNumIrrelevant()) &lt; getMinRuleSize())</span>
<span class="nc" id="L421">       throw new Exception(&quot;Possible rule size is below minimal rule size.&quot;);</span>

<span class="nc" id="L423">    tmpStr = Utils.getOption('N', options);</span>
<span class="nc bnc" id="L424" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L425">      setNumNumeric(Integer.parseInt(tmpStr));</span>
    else
<span class="nc" id="L427">      setNumNumeric(defaultNumNumeric());</span>

<span class="nc" id="L429">    setVoteFlag(Utils.getFlag('V', options));</span>
<span class="nc" id="L430">  }</span>

  /**
   * Gets the current settings of the datagenerator RDG1.
   *
   * @return an array of strings suitable for passing to setOptions
   */
  public String[] getOptions() {
    Vector        result;
    String[]      options;
    int           i;
    
<span class="nc" id="L442">    result  = new Vector();</span>
<span class="nc" id="L443">    options = super.getOptions();</span>
<span class="nc bnc" id="L444" title="All 2 branches missed.">    for (i = 0; i &lt; options.length; i++)</span>
<span class="nc" id="L445">      result.add(options[i]);</span>
    
<span class="nc" id="L447">    result.add(&quot;-a&quot;);</span>
<span class="nc" id="L448">    result.add(&quot;&quot; + getNumAttributes());</span>
    
<span class="nc" id="L450">    result.add(&quot;-c&quot;);</span>
<span class="nc" id="L451">    result.add(&quot;&quot; + getNumClasses());</span>

<span class="nc" id="L453">    result.add(&quot;-N&quot;); </span>
<span class="nc" id="L454">    result.add(&quot;&quot; + getNumNumeric());</span>
    
<span class="nc" id="L456">    result.add(&quot;-I&quot;); </span>
<span class="nc" id="L457">    result.add(&quot;&quot; + getNumIrrelevant());</span>
    
<span class="nc" id="L459">    result.add(&quot;-M&quot;); </span>
<span class="nc" id="L460">    result.add(&quot;&quot; + getMinRuleSize());</span>
    
<span class="nc" id="L462">    result.add(&quot;-R&quot;); </span>
<span class="nc" id="L463">    result.add(&quot;&quot; + getMaxRuleSize());</span>
    
<span class="nc bnc" id="L465" title="All 2 branches missed.">    if (getVoteFlag())</span>
<span class="nc" id="L466">      result.add(&quot;-V&quot;); </span>

<span class="nc" id="L468">    return (String[]) result.toArray(new String[result.size()]);</span>
  }

  /**
   * returns the default number of attributes
   * 
   * @return the default number of attributes
   */
  protected int defaultNumAttributes() {
<span class="nc" id="L477">    return 10;</span>
  }

  /**
   * Sets the number of attributes the dataset should have.
   * @param numAttributes the new number of attributes
   */
  public void setNumAttributes(int numAttributes) {
<span class="nc" id="L485">    m_NumAttributes = numAttributes;</span>
<span class="nc" id="L486">  }</span>

  /**
   * Gets the number of attributes that should be produced.
   * @return the number of attributes that should be produced
   */
  public int getNumAttributes() { 
<span class="nc" id="L493">    return m_NumAttributes; </span>
  }
  
  /**
   * Returns the tip text for this property
   * 
   * @return tip text for this property suitable for
   *         displaying in the explorer/experimenter gui
   */
  public String numAttributesTipText() {
<span class="nc" id="L503">    return &quot;The number of attributes the generated data will contain.&quot;;</span>
  }

  /**
   * returns the default number of classes
   * 
   * @return the default number of classes
   */
  protected int defaultNumClasses() {
<span class="nc" id="L512">    return 2;</span>
  }

  /**
   * Sets the number of classes the dataset should have.
   * @param numClasses the new number of classes
   */
  public void setNumClasses(int numClasses) { 
<span class="nc" id="L520">    m_NumClasses = numClasses; </span>
<span class="nc" id="L521">  }</span>

  /**
   * Gets the number of classes the dataset should have.
   * @return the number of classes the dataset should have
   */
  public int getNumClasses() { 
<span class="nc" id="L528">    return m_NumClasses; </span>
  }
  
  /**
   * Returns the tip text for this property
   * 
   * @return tip text for this property suitable for
   *         displaying in the explorer/experimenter gui
   */
  public String numClassesTipText() {
<span class="nc" id="L538">    return &quot;The number of classes to generate.&quot;;</span>
  }

  /**
   * returns the default max size of rules
   * 
   * @return the default max size of rules
   */
  protected int defaultMaxRuleSize() {
<span class="nc" id="L547">    return 10;</span>
  }

  /**
   * Gets the maximum number of tests in rules.
   *
   * @return the maximum number of tests allowed in rules
   */
  public int getMaxRuleSize() { 
<span class="nc" id="L556">    return m_MaxRuleSize; </span>
  }
  
  /**
   * Sets the maximum number of tests in rules.
   *
   * @param newMaxRuleSize new maximum number of tests allowed in rules.
   */
  public void setMaxRuleSize(int newMaxRuleSize) {
<span class="nc" id="L565">    m_MaxRuleSize = newMaxRuleSize;</span>
<span class="nc" id="L566">  }</span>
  
  /**
   * Returns the tip text for this property
   * 
   * @return tip text for this property suitable for
   *         displaying in the explorer/experimenter gui
   */
  public String maxRuleSizeTipText() {
<span class="nc" id="L575">    return &quot;The maximum number of tests in rules.&quot;;</span>
  }

  /**
   * returns the default min size of rules
   * 
   * @return the default min size of rules
   */
  protected int defaultMinRuleSize() {
<span class="nc" id="L584">    return 1;</span>
  }

  /**
   * Gets the minimum number of tests in rules.
   *
   * @return the minimum number of tests allowed in rules
   */
  public int getMinRuleSize() { 
<span class="nc" id="L593">    return m_MinRuleSize; </span>
  }
  
  /**
   * Sets the minimum number of tests in rules.
   *
   * @param newMinRuleSize new minimum number of test in rules.
   */
  public void setMinRuleSize(int newMinRuleSize) {
<span class="nc" id="L602">    m_MinRuleSize = newMinRuleSize;</span>
<span class="nc" id="L603">  }</span>
  
  /**
   * Returns the tip text for this property
   * 
   * @return tip text for this property suitable for
   *         displaying in the explorer/experimenter gui
   */
  public String minRuleSizeTipText() {
<span class="nc" id="L612">    return &quot;The minimum number of tests in rules.&quot;;</span>
  }

  /**
   * returns the default number of irrelevant attributes
   * 
   * @return the default number of irrelevant attributes
   */
  protected int defaultNumIrrelevant() {
<span class="nc" id="L621">    return 0;</span>
  }

  /**
   * Gets the number of irrelevant attributes.
   *
   * @return the number of irrelevant attributes
   */
  public int getNumIrrelevant() { 
<span class="nc" id="L630">    return m_NumIrrelevant; </span>
  }
  
  /**
   * Sets the number of irrelevant attributes.
   *
   * @param newNumIrrelevant the number of irrelevant attributes.
   */
  public void setNumIrrelevant(int newNumIrrelevant) {
<span class="nc" id="L639">    m_NumIrrelevant = newNumIrrelevant;</span>
<span class="nc" id="L640">  }</span>
  
  /**
   * Returns the tip text for this property
   * 
   * @return tip text for this property suitable for
   *         displaying in the explorer/experimenter gui
   */
  public String numIrrelevantTipText() {
<span class="nc" id="L649">    return &quot;The number of irrelevant attributes.&quot;;</span>
  }

  /**
   * returns the default number of numeric attributes
   * 
   * @return the default number of numeric attributes
   */
  protected int defaultNumNumeric() {
<span class="nc" id="L658">    return 0;</span>
  }

  /**
   * Gets the number of numerical attributes.
   *
   * @return the number of numerical attributes.
   */
  public int getNumNumeric() { 
<span class="nc" id="L667">    return m_NumNumeric; </span>
  }
  
  /**
   * Sets the number of numerical attributes.
   *
   * @param newNumNumeric the number of numerical attributes.
   */
  public void setNumNumeric(int newNumNumeric) { 
<span class="nc" id="L676">    m_NumNumeric = newNumNumeric;</span>
<span class="nc" id="L677">  }</span>
  
  /**
   * Returns the tip text for this property
   * 
   * @return tip text for this property suitable for
   *         displaying in the explorer/experimenter gui
   */
  public String numNumericTipText() {
<span class="nc" id="L686">    return &quot;The number of numerical attributes.&quot;;</span>
  }

  /**
   * Gets the vote flag.
   *
   * @return voting flag.
   */
  public boolean getVoteFlag() { 
<span class="nc" id="L695">    return m_VoteFlag; </span>
  }
  
  /**
   * Sets the vote flag.
   *
   * @param newVoteFlag boolean with the new setting of the vote flag.
   */
  public void setVoteFlag(boolean newVoteFlag) { 
<span class="nc" id="L704">    m_VoteFlag = newVoteFlag; </span>
<span class="nc" id="L705">  }</span>
  
  /**
   * Returns the tip text for this property
   * 
   * @return tip text for this property suitable for
   *         displaying in the explorer/experimenter gui
   */
  public String voteFlagTipText() {
<span class="nc" id="L714">    return &quot;Whether to use voting or not.&quot;;</span>
  }

  /**
   * Gets the single mode flag.
   *
   * @return true if methode generateExample can be used.
   */
  public boolean getSingleModeFlag() { 
<span class="nc bnc" id="L723" title="All 2 branches missed.">    return (!getVoteFlag()); </span>
  }

  /**
   * Gets the array that defines which of the attributes
   * are seen to be irrelevant.
   *
   * @return the array that defines the irrelevant attributes
   */
  public boolean[] getAttList_Irr() { 
<span class="nc" id="L733">    return m_AttList_Irr; </span>
  }
  
  /**
   * Sets the array that defines which of the attributes
   * are seen to be irrelevant.
   *
   * @param newAttList_Irr array that defines the irrelevant attributes.
   */
  public void setAttList_Irr(boolean[] newAttList_Irr) {
<span class="nc" id="L743">    m_AttList_Irr = newAttList_Irr;</span>
<span class="nc" id="L744">  }</span>
  
  /**
   * Returns the tip text for this property
   * 
   * @return tip text for this property suitable for
   *         displaying in the explorer/experimenter gui
   */
  public String attList_IrrTipText() {
<span class="nc" id="L753">    return &quot;The array with the indices of the irrelevant attributes.&quot;;</span>
  }

  /**
   * Initializes the format for the dataset produced. 
   *
   * @return the output data format
   * @throws Exception data format could not be defined 
   */
  public Instances defineDataFormat() throws Exception {
    Instances dataset;
<span class="nc" id="L764">    Random random = new Random (getSeed());</span>
<span class="nc" id="L765">    setRandom(random);</span>

<span class="nc" id="L767">    m_DecisionList = new FastVector();</span>

    // number of examples is the same as given per option
<span class="nc" id="L770">    setNumExamplesAct(getNumExamples());</span>

    // define dataset
<span class="nc" id="L773">    dataset = defineDataset(random);</span>
<span class="nc" id="L774">    return dataset; </span>
  }

  /**
   * Generate an example of the dataset dataset. 
   * @return the instance generated
   * @throws Exception if format not defined or generating &lt;br/&gt;
   * examples one by one is not possible, because voting is chosen
   */
  public Instance generateExample() throws Exception {
<span class="nc" id="L784">    Random random = getRandom();</span>
<span class="nc" id="L785">    Instances format = getDatasetFormat();</span>

<span class="nc bnc" id="L787" title="All 2 branches missed.">    if (format == null) </span>
<span class="nc" id="L788">      throw new Exception(&quot;Dataset format not defined.&quot;);</span>
<span class="nc bnc" id="L789" title="All 2 branches missed.">    if (getVoteFlag()) </span>
<span class="nc" id="L790">      throw new Exception(&quot;Examples cannot be generated one by one.&quot;);</span>

    // generate values for all attributes
<span class="nc" id="L793">    format = generateExamples(1, random, format);</span>

<span class="nc" id="L795">    return format.lastInstance();</span>
  }

  /**
   * Generate all examples of the dataset. 
   * @return the instance generated
   * @throws Exception if format not defined or generating &lt;br/&gt;
   * examples one by one is not possible, because voting is chosen
   */
  public Instances generateExamples() throws Exception {
<span class="nc" id="L805">    Random random = getRandom();</span>
<span class="nc" id="L806">    Instances format = getDatasetFormat();</span>
<span class="nc bnc" id="L807" title="All 2 branches missed.">    if (format == null) </span>
<span class="nc" id="L808">      throw new Exception(&quot;Dataset format not defined.&quot;);</span>

    // generate values for all attributes
<span class="nc" id="L811">    format = generateExamples(getNumExamplesAct(), random, format);</span>

    // vote all examples, and set new class value
<span class="nc bnc" id="L814" title="All 2 branches missed.">    if (getVoteFlag())</span>
<span class="nc" id="L815">      format = voteDataset(format);</span>

<span class="nc" id="L817">    return format;</span>
  }

  /**
   * Generate all examples of the dataset. 
   * @param num the number of examples to generate
   * @param random the random number generator to use
   * @param format the dataset format
   * @return the instance generated
   * @throws Exception if format not defined or generating &lt;br/&gt;
   * examples one by one is not possible, because voting is chosen
   */
  public Instances generateExamples(int num, 
                                   Random random,
                                   Instances format) throws Exception {

<span class="nc bnc" id="L833" title="All 2 branches missed.">    if (format == null) </span>
<span class="nc" id="L834">      throw new Exception(&quot;Dataset format not defined.&quot;);</span>
    
    // generate values for all attributes
<span class="nc bnc" id="L837" title="All 2 branches missed.">    for (int i = 0; i &lt; num; i++)  {</span>
      // over all examples to be produced
<span class="nc" id="L839">      Instance example = generateExample(random, format);</span>

      // set class of example using decision list
<span class="nc" id="L842">      boolean classDefined = classifyExample(example);</span>
<span class="nc bnc" id="L843" title="All 2 branches missed.">      if (!classDefined) {</span>
        // set class with newly generated rule
<span class="nc" id="L845">        example = updateDecisionList(random, example);</span>
      }
<span class="nc" id="L847">      example.setDataset(format);</span>
<span class="nc" id="L848">      format.add(example);</span>
    }

<span class="nc" id="L851">    return (format);</span>
  }

 /**
   * Generates a new rule for the decision list.
   * and classifies the new example
   * @param random random number generator
   * @param example example used to update decision list 
   * @return the classified example
   * @throws Exception if dataset format not defined
   */
  private Instance updateDecisionList(Random random, Instance example)
   throws Exception {

    FastVector TestList;
<span class="nc" id="L866">    Instances format = getDatasetFormat();</span>
<span class="nc bnc" id="L867" title="All 2 branches missed.">    if (format == null) </span>
<span class="nc" id="L868">      throw new Exception(&quot;Dataset format not defined.&quot;);</span>

<span class="nc" id="L870">    TestList = generateTestList(random, example);</span>

<span class="nc bnc" id="L872" title="All 2 branches missed.">    int maxSize = getMaxRuleSize() &lt; TestList.size() ? </span>
<span class="nc" id="L873">                            getMaxRuleSize() : TestList.size();</span>
<span class="nc" id="L874">    int ruleSize = ((int) (random.nextDouble() * </span>
<span class="nc" id="L875">                             (double) (maxSize - getMinRuleSize())))</span>
<span class="nc" id="L876">                                   + getMinRuleSize();</span>

<span class="nc" id="L878">    RuleList newRule = new RuleList();</span>
<span class="nc bnc" id="L879" title="All 2 branches missed.">    for (int i=0; i &lt; ruleSize; i++) {</span>
<span class="nc" id="L880">      int testIndex = (int) (random.nextDouble() * (double) TestList.size());</span>
<span class="nc" id="L881">      Test test = (Test) TestList.elementAt(testIndex);</span>
          
<span class="nc" id="L883">      newRule.addTest(test);</span>
<span class="nc" id="L884">      TestList.removeElementAt(testIndex);</span>
    }
<span class="nc" id="L886">    double newClassValue = 0.0;</span>
<span class="nc bnc" id="L887" title="All 2 branches missed.">    if (m_DecisionList.size() &gt; 0) {</span>
<span class="nc" id="L888">      RuleList r = (RuleList)(m_DecisionList.lastElement());</span>
<span class="nc" id="L889">      double oldClassValue = (double) </span>
<span class="nc" id="L890">                        (r.getClassValue());</span>
<span class="nc" id="L891">      newClassValue = (double)((int)oldClassValue + 1)</span>
<span class="nc" id="L892">                               % getNumClasses();</span>
    }
<span class="nc" id="L894">    newRule.setClassValue(newClassValue);</span>
<span class="nc" id="L895">    m_DecisionList.addElement(newRule);</span>
<span class="nc" id="L896">    example = (Instance)example.copy();</span>
<span class="nc" id="L897">    example.setDataset(format);</span>
<span class="nc" id="L898">    example.setClassValue(newClassValue);</span>
<span class="nc" id="L899">    return example;</span>
  }

 /**
   * Generates a new rule for the decision list
   * and classifies the new example.
   *
   * @param random random number generator
   * @param example the instance to classify
   * @return a list of tests
   * @throws Exception if dataset format not defined
   */
  private FastVector generateTestList(Random random, Instance example) 
   throws Exception {

<span class="nc" id="L914">    Instances format = getDatasetFormat();</span>
<span class="nc bnc" id="L915" title="All 2 branches missed.">    if (format == null) </span>
<span class="nc" id="L916">      throw new Exception(&quot;Dataset format not defined.&quot;);</span>

<span class="nc" id="L918">    int numTests = getNumAttributes() - getNumIrrelevant();</span>
<span class="nc" id="L919">    FastVector TestList = new FastVector(numTests);</span>
<span class="nc" id="L920">    boolean[] irrelevant = getAttList_Irr();</span>

<span class="nc bnc" id="L922" title="All 2 branches missed.">    for (int i = 0; i &lt; getNumAttributes(); i++) {</span>
<span class="nc bnc" id="L923" title="All 2 branches missed.">      if (!irrelevant[i]) {</span>
<span class="nc" id="L924">        Test newTest = null;</span>
<span class="nc" id="L925">        Attribute att = example.attribute(i);</span>
<span class="nc bnc" id="L926" title="All 2 branches missed.">        if (att.isNumeric()) {</span>
<span class="nc" id="L927">          double newSplit = random.nextDouble();</span>
<span class="nc bnc" id="L928" title="All 2 branches missed.">          boolean newNot = newSplit &lt; example.value(i);</span>
<span class="nc" id="L929">          newTest = new Test(i, newSplit, format, newNot);</span>
        } else {
<span class="nc" id="L931">          newTest = new Test(i, example.value(i), format, false);</span>
        }
<span class="nc" id="L933">      TestList.addElement (newTest);     </span>
      }
    }
    
<span class="nc" id="L937">    return TestList;</span>
  }

 /**
   * Generates an example with its classvalue set to missing
   * and binds it to the datasets.
   *
   * @param random random number generator
   * @param format dataset the example gets bind to
   * @return the generated example
   * @throws Exception if attribute type not supported
   */
  private Instance generateExample(Random random, Instances format) 
    throws Exception {     
    double[] attributes;
    Instance example;

<span class="nc" id="L954">    attributes = new double[getNumAttributes() + 1];</span>
<span class="nc bnc" id="L955" title="All 2 branches missed.">    for (int i = 0; i &lt; getNumAttributes(); i++) {</span>
<span class="nc" id="L956">      double value = random.nextDouble();</span>
<span class="nc bnc" id="L957" title="All 2 branches missed.">      if (format.attribute(i).isNumeric()) {</span>
<span class="nc" id="L958">        attributes[i] = value; </span>
      } else {
<span class="nc bnc" id="L960" title="All 2 branches missed.">	if (format.attribute(i).isNominal())</span>
<span class="nc bnc" id="L961" title="All 2 branches missed.">	  attributes[i] = (value &gt; 0.5) ? 1.0 : 0.0;</span>
	else
<span class="nc" id="L963">	  throw new Exception (&quot;Attribute type is not supported.&quot;);</span>
      }
    }
<span class="nc" id="L966">    example = new Instance(1.0, attributes);</span>
<span class="nc" id="L967">    example.setDataset(format);</span>
<span class="nc" id="L968">    example.setClassMissing();</span>

<span class="nc" id="L970">    return example; </span>
  }

 /**
   * Tries to classify an example. 
   * 
   * @param example the example to classify
   * @return true if it could be classified
   * @throws Exception if something goes wrong
   */
  private boolean classifyExample(Instance example) throws Exception {
<span class="nc" id="L981">    double classValue = -1.0;  </span>

<span class="nc" id="L983">    for (Enumeration e = m_DecisionList.elements(); </span>
<span class="nc bnc" id="L984" title="All 4 branches missed.">         e.hasMoreElements() &amp;&amp; classValue &lt; 0.0;) {</span>
<span class="nc" id="L985">      RuleList rl = (RuleList) e.nextElement();</span>
<span class="nc" id="L986">      classValue = rl.classifyInstance(example);   </span>
    }
<span class="nc bnc" id="L988" title="All 2 branches missed.">    if (classValue &gt;= 0.0) {</span>
<span class="nc" id="L989">      example.setClassValue(classValue);</span>
<span class="nc" id="L990">      return true;</span>
    } 
    else {
<span class="nc" id="L993">      return false;</span>
    }
  }

 /**
   * Classify example with maximum vote the following way.
   * With every rule in the decisionlist, it is evaluated if
   * the given instance could be the class of the rule.
   * Finally the class value that receives the highest number of votes
   * is assigned to the example.
   * 
   * @param example example to be reclassified
   * @return instance with new class value
   * @throws Exception if classification fails
   */
  private Instance votedReclassifyExample(Instance example) throws Exception {
<span class="nc" id="L1009">    int classVotes[] = new int [getNumClasses()]; </span>
<span class="nc bnc" id="L1010" title="All 2 branches missed.">    for (int i = 0; i &lt; classVotes.length; i++) classVotes[i] = 0; </span>

<span class="nc bnc" id="L1012" title="All 2 branches missed.">    for (Enumeration e = m_DecisionList.elements(); </span>
<span class="nc" id="L1013">         e.hasMoreElements();) {</span>
<span class="nc" id="L1014">      RuleList rl = (RuleList) e.nextElement();</span>
<span class="nc" id="L1015">      int classValue = (int) rl.classifyInstance(example);</span>
<span class="nc bnc" id="L1016" title="All 2 branches missed.">      if (classValue &gt;= 0) classVotes[classValue]++;  </span>
    }
<span class="nc" id="L1018">    int maxVote = 0;</span>
<span class="nc" id="L1019">    int vote = -1;</span>
<span class="nc bnc" id="L1020" title="All 2 branches missed.">    for (int i = 0; i &lt; classVotes.length; i++) {</span>
<span class="nc bnc" id="L1021" title="All 2 branches missed.">      if (classVotes[i] &gt; maxVote) {</span>
<span class="nc" id="L1022">        maxVote = classVotes[i];</span>
<span class="nc" id="L1023">        vote = i; </span>
      }
    }
<span class="nc bnc" id="L1026" title="All 2 branches missed.">    if (vote &gt;= 0)</span>
<span class="nc" id="L1027">      example.setClassValue((double) vote);</span>
    else
<span class="nc" id="L1029">      throw new Exception (&quot;Error in instance classification.&quot;);</span>

<span class="nc" id="L1031">    return example;</span>
  }

 /**
   * Returns a dataset header.
   * @param random random number generator
   * @return dataset header
   * @throws Exception if something goes wrong
   */
  private Instances defineDataset(Random random) throws Exception {

    boolean[] attList_Irr;
    int[] attList_Num;
<span class="nc" id="L1044">    FastVector attributes = new FastVector();</span>
    Attribute attribute;
<span class="nc" id="L1046">    FastVector nominalValues = new FastVector (2);</span>
<span class="nc" id="L1047">    nominalValues.addElement(&quot;false&quot;); </span>
<span class="nc" id="L1048">    nominalValues.addElement(&quot;true&quot;); </span>
<span class="nc" id="L1049">    FastVector classValues = new FastVector (getNumClasses());</span>
    Instances dataset;
     
    // set randomly those attributes that are irrelevant
<span class="nc" id="L1053">    attList_Irr = defineIrrelevant(random);</span>
<span class="nc" id="L1054">    setAttList_Irr(attList_Irr);</span>

    // set randomly those attributes that are numeric
<span class="nc" id="L1057">    attList_Num = defineNumeric(random); </span>

    // define dataset
<span class="nc bnc" id="L1060" title="All 2 branches missed.">    for (int i = 0; i &lt; getNumAttributes(); i++) {</span>
<span class="nc bnc" id="L1061" title="All 2 branches missed.">      if (attList_Num[i] == Attribute.NUMERIC)</span>
<span class="nc" id="L1062">        attribute = new Attribute(&quot;a&quot; + i); </span>
      else
<span class="nc" id="L1064">        attribute = new Attribute(&quot;a&quot; + i, nominalValues); </span>
<span class="nc" id="L1065">      attributes.addElement(attribute);</span>
    }
<span class="nc bnc" id="L1067" title="All 2 branches missed.">    for (int i = 0; i &lt; classValues.capacity(); i++)</span>
<span class="nc" id="L1068">      classValues.addElement(&quot;c&quot; + i);</span>
<span class="nc" id="L1069">    attribute = new Attribute (&quot;class&quot;, classValues); </span>
<span class="nc" id="L1070">    attributes.addElement(attribute);</span>

<span class="nc" id="L1072">    dataset = new Instances(getRelationNameToUse(), attributes,</span>
<span class="nc" id="L1073">                            getNumExamplesAct());</span>
<span class="nc" id="L1074">    dataset.setClassIndex(getNumAttributes());</span>

    // set dataset format of this class
<span class="nc" id="L1077">    Instances format = new Instances(dataset, 0);</span>
<span class="nc" id="L1078">    setDatasetFormat(format);</span>
    
<span class="nc" id="L1080">    return dataset; </span>
  } 

 /**
   * Defines randomly the attributes as irrelevant.
   * Number of attributes to be set as irrelevant is either set
   * with a preceeding call of setNumIrrelevant() or is per default 0.
   *
   * @param random the random number generator to use
   * @return list of boolean values with one value for each attribute,
   * and each value set true or false according to if the corresponding
   * attribute was defined irrelevant or not
   */
  private boolean[] defineIrrelevant(Random random) {

<span class="nc" id="L1095">    boolean[] irr = new boolean [getNumAttributes()];</span>
 
    // initialize
<span class="nc bnc" id="L1098" title="All 2 branches missed.">    for (int i = 0; i &lt; irr.length; i++)</span>
<span class="nc" id="L1099">      irr[i] = false;</span>

    // set randomly
<span class="nc" id="L1102">    int numIrr = 0;</span>
<span class="nc" id="L1103">    for (int i = 0; </span>
<span class="nc bnc" id="L1104" title="All 4 branches missed.">         (numIrr &lt; getNumIrrelevant()) &amp;&amp; (i &lt; getNumAttributes() * 5);</span>
<span class="nc" id="L1105">          i++) {</span>
<span class="nc" id="L1106">      int maybeNext = (int) (random.nextDouble() * (double) irr.length);</span>
<span class="nc bnc" id="L1107" title="All 2 branches missed.">      if (irr[maybeNext] == false) {</span>
<span class="nc" id="L1108">        irr [maybeNext] = true;</span>
<span class="nc" id="L1109">        numIrr++;</span>
      }
    }
    
<span class="nc" id="L1113">    return irr;</span>
  }

 /**
   * Chooses randomly the attributes that get datatyp numeric.
   * @param random the random number generator to use
   * @return list of integer values, with one value for each attribute,
   * and each value set to Attribut.NOMINAL or Attribut.NUMERIC
   */
  private int[] defineNumeric(Random random) {
    
<span class="nc" id="L1124">    int[] num = new int [getNumAttributes()];</span>

    // initialize
<span class="nc bnc" id="L1127" title="All 2 branches missed.">    for (int i = 0; i &lt; num.length; i++)</span>
<span class="nc" id="L1128">      num[i] = Attribute.NOMINAL;</span>

<span class="nc" id="L1130">    int numNum = 0;</span>
<span class="nc" id="L1131">    for (int i = 0;</span>
<span class="nc bnc" id="L1132" title="All 4 branches missed.">         (numNum &lt; getNumNumeric()) &amp;&amp; (i &lt; getNumAttributes() * 5); i++) {</span>
<span class="nc" id="L1133">      int maybeNext = (int) (random.nextDouble() * (double) num.length);</span>
<span class="nc bnc" id="L1134" title="All 2 branches missed.">      if (num[maybeNext] != Attribute.NUMERIC) {</span>
<span class="nc" id="L1135">        num[maybeNext] = Attribute.NUMERIC;</span>
<span class="nc" id="L1136">        numNum++;</span>
      }
    }
    
<span class="nc" id="L1140">    return num;</span>
  }

  /**
   * Generates a comment string that documentates the data generator.
   * By default this string is added at the beginning of the produced output
   * as ARFF file type, next after the options.
   * 
   * @return string contains info about the generated rules
   */
  public String generateStart () {
<span class="nc" id="L1151">    return &quot;&quot;;</span>
  }

  /**
   * Compiles documentation about the data generation. This is the number of
   * irrelevant attributes and the decisionlist with all rules.
   * Considering that the decisionlist might get enhanced until
   * the last instance is generated, this method should be called at the
   * end of the data generation process. 
   *
   * @return string with additional information about generated dataset
   * @throws Exception no input structure has been defined
   */
  public String generateFinished() throws Exception {

<span class="nc" id="L1166">    StringBuffer dLString = new StringBuffer();</span>

    // string for output at end of ARFF-File
<span class="nc" id="L1169">    boolean[] attList_Irr = getAttList_Irr();</span>
<span class="nc" id="L1170">    Instances format = getDatasetFormat();</span>
<span class="nc" id="L1171">    dLString.append(&quot;%\n% Number of attributes chosen as irrelevant = &quot; +</span>
<span class="nc" id="L1172">                    getNumIrrelevant() + &quot;\n&quot;);</span>
<span class="nc bnc" id="L1173" title="All 2 branches missed.">    for (int i = 0; i &lt; attList_Irr.length; i++) {</span>
<span class="nc bnc" id="L1174" title="All 2 branches missed.">      if (attList_Irr[i])</span>
<span class="nc" id="L1175">        dLString.append(&quot;% &quot; + format.attribute(i).name() + &quot;\n&quot;);</span>
    }

<span class="nc" id="L1178">    dLString.append(&quot;%\n% DECISIONLIST (number of rules = &quot; +</span>
<span class="nc" id="L1179">                    m_DecisionList.size() + &quot;):\n&quot;);</span>
     
<span class="nc bnc" id="L1181" title="All 2 branches missed.">    for (int i = 0; i &lt; m_DecisionList.size(); i++) {</span>
<span class="nc" id="L1182">      RuleList rl = (RuleList) m_DecisionList.elementAt(i);</span>
<span class="nc" id="L1183">      dLString.append(&quot;% RULE &quot; + i + &quot;: &quot; + rl.toString() + &quot;\n&quot;);</span>
    }
    
<span class="nc" id="L1186">    return dLString.toString();</span>
  }

 /**
   * Resets the class values of all instances using voting.
   * For each instance the class value that satisfies the most rules
   * is choosen as new class value.
   *
   * @param dataset the dataset to work on
   * @return the changed instances
   * @throws Exception if something goes wrong
   */
  private Instances voteDataset(Instances dataset) throws Exception {
<span class="nc bnc" id="L1199" title="All 2 branches missed.">    for (int i = 0; i &lt; dataset.numInstances(); i++) {</span>
<span class="nc" id="L1200">      Instance inst = dataset.firstInstance();</span>
<span class="nc" id="L1201">      inst = votedReclassifyExample(inst); </span>
<span class="nc" id="L1202">      dataset.add(inst);</span>
<span class="nc" id="L1203">      dataset.delete(0);</span>
    }  

<span class="nc" id="L1206">    return dataset;</span>
  }
  
  /**
   * Returns the revision string.
   * 
   * @return		the revision
   */
  public String getRevision() {
<span class="nc" id="L1215">    return RevisionUtils.extract(&quot;$Revision: 5674 $&quot;);</span>
  }

  /**
   * Main method for testing this class.
   *
   * @param args should contain arguments for the data producer: 
   */
  public static void main(String[] args) {
<span class="nc" id="L1224">    runDataGenerator(new RDG1(), args);</span>
<span class="nc" id="L1225">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>AllTests (Nov 28, 2015 2:34:31 PM)</div></body></html>