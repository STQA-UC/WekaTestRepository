<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>ArffViewerMainPanel.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (Nov 28, 2015 2:34:31 PM)</a> &gt; <a href="../../index.html" class="el_group">wekaproject</a> &gt; <a href="../index.html" class="el_bundle">src/src/main/java</a> &gt; <a href="index.source.html" class="el_package">weka.gui.arffviewer</a> &gt; <span class="el_source">ArffViewerMainPanel.java</span></div><h1>ArffViewerMainPanel.java</h1><pre class="source lang-java linenums">/*
 *    This program is free software; you can redistribute it and/or modify
 *    it under the terms of the GNU General Public License as published by
 *    the Free Software Foundation; either version 2 of the License, or
 *    (at your option) any later version.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU General Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License
 *    along with this program; if not, write to the Free Software
 *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

/*
 * ArffViewerMainPanel.java
 * Copyright (C) 2005 University of Waikato, Hamilton, New Zealand
 *
 */

package weka.gui.arffviewer;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Cursor;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.WindowEvent;
import java.io.File;
import java.io.IOException;
import java.util.Collections;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Vector;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JList;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.KeyStroke;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

import weka.core.Capabilities;
import weka.core.Instances;
import weka.core.converters.AbstractFileSaver;
import weka.core.converters.AbstractSaver;
import weka.core.converters.ConverterUtils;
import weka.gui.ComponentHelper;
import weka.gui.ConverterFileChooser;
import weka.gui.JTableHelper;
import weka.gui.ListSelectorDialog;

/**
 * The main panel of the ArffViewer. It has a reference to the menu, that an
 * implementing JFrame only needs to add via the setJMenuBar(JMenuBar) method.
 * 
 * 
 * @author FracPete (fracpete at waikato dot ac dot nz)
 * @version $Revision: 9892 $
 */

public class ArffViewerMainPanel extends JPanel implements ActionListener,
    ChangeListener {

  /** for serialization */
  static final long serialVersionUID = -8763161167586738753L;

  /** the default for width */
  public final static int DEFAULT_WIDTH = -1;
  /** the default for height */
  public final static int DEFAULT_HEIGHT = -1;
  /** the default for left */
  public final static int DEFAULT_LEFT = -1;
  /** the default for top */
  public final static int DEFAULT_TOP = -1;
  /** default width */
  public final static int WIDTH = 800;
  /** default height */
  public final static int HEIGHT = 600;

  protected Container parent;
  protected JTabbedPane tabbedPane;
  protected JMenuBar menuBar;
  protected JMenu menuFile;
  protected JMenuItem menuFileOpen;
  protected JMenuItem menuFileSave;
  protected JMenuItem menuFileSaveAs;
  protected JMenuItem menuFileClose;
  protected JMenuItem menuFileCloseAll;
  protected JMenuItem menuFileProperties;
  protected JMenuItem menuFileExit;
  protected JMenu menuEdit;
  protected JMenuItem menuEditUndo;
  protected JMenuItem menuEditCopy;
  protected JMenuItem menuEditSearch;
  protected JMenuItem menuEditClearSearch;
  protected JMenuItem menuEditDeleteAttribute;
  protected JMenuItem menuEditDeleteAttributes;
  protected JMenuItem menuEditRenameAttribute;
  protected JMenuItem menuEditAttributeAsClass;
  protected JMenuItem menuEditDeleteInstance;
  protected JMenuItem menuEditDeleteInstances;
  protected JMenuItem menuEditSortInstances;
  protected JMenu menuView;
  protected JMenuItem menuViewAttributes;
  protected JMenuItem menuViewValues;
  protected JMenuItem menuViewOptimalColWidths;

  protected ConverterFileChooser fileChooser;
  protected String frameTitle;
  protected boolean confirmExit;
  protected int width;
  protected int height;
  protected int top;
  protected int left;
  protected boolean exitOnClose;

  /**
   * initializes the object
   * 
   * @param parentFrame the parent frame (JFrame or JInternalFrame)
   */
<span class="nc" id="L134">  public ArffViewerMainPanel(Container parentFrame) {</span>
<span class="nc" id="L135">    parent = parentFrame;</span>
<span class="nc" id="L136">    frameTitle = Messages.getInstance().getString(</span>
<span class="nc" id="L137">        &quot;ArffViewerMainPanel_Title_Text&quot;);</span>
<span class="nc" id="L138">    createPanel();</span>
<span class="nc" id="L139">  }</span>

  /**
   * creates all the components in the panel
   */
  protected void createPanel() {
    // basic setup
<span class="nc" id="L146">    setSize(WIDTH, HEIGHT);</span>

<span class="nc" id="L148">    setConfirmExit(false);</span>
<span class="nc" id="L149">    setLayout(new BorderLayout());</span>

    // file dialog
<span class="nc" id="L152">    fileChooser = new ConverterFileChooser(new File(</span>
<span class="nc" id="L153">        System.getProperty(&quot;user.dir&quot;)));</span>
<span class="nc" id="L154">    fileChooser.setMultiSelectionEnabled(true);</span>

    // menu
<span class="nc" id="L157">    menuBar = new JMenuBar();</span>
<span class="nc" id="L158">    menuFile = new JMenu(Messages.getInstance().getString(</span>
<span class="nc" id="L159">        &quot;ArffViewerMainPanel_CreatePanel_File_JMenu_Text&quot;));</span>
<span class="nc" id="L160">    menuFileOpen = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L161">        &quot;ArffViewerMainPanel_CreatePanel_FileOpen_JMenuItem_Text&quot;),</span>
<span class="nc" id="L162">        ComponentHelper.getImageIcon(&quot;open.gif&quot;));</span>
<span class="nc" id="L163">    menuFileOpen.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_O,</span>
<span class="nc" id="L164">        KeyEvent.CTRL_MASK));</span>
<span class="nc" id="L165">    menuFileOpen.addActionListener(this);</span>
<span class="nc" id="L166">    menuFileSave = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L167">        &quot;ArffViewerMainPanel_CreatePanel_Save_JMenuItem_Text&quot;),</span>
<span class="nc" id="L168">        ComponentHelper.getImageIcon(&quot;save.gif&quot;));</span>
<span class="nc" id="L169">    menuFileSave.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S,</span>
<span class="nc" id="L170">        KeyEvent.CTRL_MASK));</span>
<span class="nc" id="L171">    menuFileSave.addActionListener(this);</span>
<span class="nc" id="L172">    menuFileSaveAs = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L173">        &quot;ArffViewerMainPanel_CreatePanel_SaveAs_JMenuItem_Text&quot;),</span>
<span class="nc" id="L174">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L175">    menuFileSaveAs.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S,</span>
<span class="nc" id="L176">        KeyEvent.CTRL_MASK + KeyEvent.SHIFT_MASK));</span>
<span class="nc" id="L177">    menuFileSaveAs.addActionListener(this);</span>
<span class="nc" id="L178">    menuFileClose = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L179">        &quot;ArffViewerMainPanel_CreatePanel_Close_JMenuItem_Text&quot;),</span>
<span class="nc" id="L180">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L181">    menuFileClose.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_W,</span>
<span class="nc" id="L182">        KeyEvent.CTRL_MASK));</span>
<span class="nc" id="L183">    menuFileClose.addActionListener(this);</span>
<span class="nc" id="L184">    menuFileCloseAll = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L185">        &quot;ArffViewerMainPanel_CreatePanel_CloseAll_JMenuItem_Text&quot;),</span>
<span class="nc" id="L186">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L187">    menuFileCloseAll.addActionListener(this);</span>
<span class="nc" id="L188">    menuFileProperties = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L189">        &quot;ArffViewerMainPanel_CreatePanel_Properties_JMenuItem_Text&quot;),</span>
<span class="nc" id="L190">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L191">    menuFileProperties.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,</span>
<span class="nc" id="L192">        KeyEvent.CTRL_MASK));</span>
<span class="nc" id="L193">    menuFileProperties.addActionListener(this);</span>
<span class="nc" id="L194">    menuFileExit = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L195">        &quot;ArffViewerMainPanel_CreatePanel_Exit_JMenuItem_Text&quot;),</span>
<span class="nc" id="L196">        ComponentHelper.getImageIcon(&quot;forward.gif&quot;));</span>
<span class="nc" id="L197">    menuFileExit.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_X,</span>
<span class="nc" id="L198">        KeyEvent.ALT_MASK));</span>
<span class="nc" id="L199">    menuFileExit.addActionListener(this);</span>
<span class="nc" id="L200">    menuFile.add(menuFileOpen);</span>
<span class="nc" id="L201">    menuFile.add(menuFileSave);</span>
<span class="nc" id="L202">    menuFile.add(menuFileSaveAs);</span>
<span class="nc" id="L203">    menuFile.add(menuFileClose);</span>
<span class="nc" id="L204">    menuFile.add(menuFileCloseAll);</span>
<span class="nc" id="L205">    menuFile.addSeparator();</span>
<span class="nc" id="L206">    menuFile.add(menuFileProperties);</span>
<span class="nc" id="L207">    menuFile.addSeparator();</span>
<span class="nc" id="L208">    menuFile.add(menuFileExit);</span>
<span class="nc" id="L209">    menuBar.add(menuFile);</span>

<span class="nc" id="L211">    menuEdit = new JMenu(Messages.getInstance().getString(</span>
<span class="nc" id="L212">        &quot;ArffViewerMainPanel_CreatePanel_Edit_JMenuItem_Text&quot;));</span>
<span class="nc" id="L213">    menuEditUndo = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L214">        &quot;ArffViewerMainPanel_CreatePanel_Undo_JMenuItem_Text&quot;),</span>
<span class="nc" id="L215">        ComponentHelper.getImageIcon(&quot;undo.gif&quot;));</span>
<span class="nc" id="L216">    menuEditUndo.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Z,</span>
<span class="nc" id="L217">        KeyEvent.CTRL_MASK));</span>
<span class="nc" id="L218">    menuEditUndo.addActionListener(this);</span>
<span class="nc" id="L219">    menuEditCopy = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L220">        &quot;ArffViewerMainPanel_CreatePanel_Copy_JMenuItem_Text&quot;),</span>
<span class="nc" id="L221">        ComponentHelper.getImageIcon(&quot;copy.gif&quot;));</span>
<span class="nc" id="L222">    menuEditCopy.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_INSERT,</span>
<span class="nc" id="L223">        KeyEvent.CTRL_MASK));</span>
<span class="nc" id="L224">    menuEditCopy.addActionListener(this);</span>
<span class="nc" id="L225">    menuEditSearch = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L226">        &quot;ArffViewerMainPanel_CreatePanel_Search_JMenuItem_Text&quot;),</span>
<span class="nc" id="L227">        ComponentHelper.getImageIcon(&quot;find.gif&quot;));</span>
<span class="nc" id="L228">    menuEditSearch.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F,</span>
<span class="nc" id="L229">        KeyEvent.CTRL_MASK));</span>
<span class="nc" id="L230">    menuEditSearch.addActionListener(this);</span>
<span class="nc" id="L231">    menuEditClearSearch = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L232">        &quot;ArffViewerMainPanel_CreatePanel_ClearSearch_JMenuItem_Text&quot;),</span>
<span class="nc" id="L233">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L234">    menuEditClearSearch.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F,</span>
<span class="nc" id="L235">        KeyEvent.CTRL_MASK + KeyEvent.SHIFT_MASK));</span>
<span class="nc" id="L236">    menuEditClearSearch.addActionListener(this);</span>
<span class="nc" id="L237">    menuEditRenameAttribute = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L238">        &quot;ArffViewerMainPanel_CreatePanel_RenameAttribute_JMenuItem_Text&quot;),</span>
<span class="nc" id="L239">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L240">    menuEditRenameAttribute.addActionListener(this);</span>
<span class="nc" id="L241">    menuEditAttributeAsClass = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L242">        &quot;ArffViewerMainPanel_CreatePanel_AttributeAsClass_JMenuItem_Text&quot;),</span>
<span class="nc" id="L243">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L244">    menuEditAttributeAsClass.addActionListener(this);</span>
<span class="nc" id="L245">    menuEditDeleteAttribute = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L246">        &quot;ArffViewerMainPanel_CreatePanel_DeleteAttribute_JMenuItem_Text&quot;),</span>
<span class="nc" id="L247">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L248">    menuEditDeleteAttribute.addActionListener(this);</span>
<span class="nc" id="L249">    menuEditDeleteAttributes = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L250">        &quot;ArffViewerMainPanel_CreatePanel_DeleteAttributes_JMenuItem_Text&quot;),</span>
<span class="nc" id="L251">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L252">    menuEditDeleteAttributes.addActionListener(this);</span>
<span class="nc" id="L253">    menuEditDeleteInstance = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L254">        &quot;ArffViewerMainPanel_CreatePanel_DeleteInstance_JMenuItem_Text&quot;),</span>
<span class="nc" id="L255">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L256">    menuEditDeleteInstance.addActionListener(this);</span>
<span class="nc" id="L257">    menuEditDeleteInstances = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L258">        &quot;ArffViewerMainPanel_CreatePanel_DeleteInstances_JMenuItem_Text&quot;),</span>
<span class="nc" id="L259">        ComponentHelper.getImageIcon(&quot;empty.gif&quot;));</span>
<span class="nc" id="L260">    menuEditDeleteInstances.addActionListener(this);</span>
<span class="nc" id="L261">    menuEditSortInstances = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L262">        &quot;ArffViewerMainPanel_CreatePanel_SortDataAscending_JMenuItem_Text&quot;),</span>
<span class="nc" id="L263">        ComponentHelper.getImageIcon(&quot;sort.gif&quot;));</span>
<span class="nc" id="L264">    menuEditSortInstances.addActionListener(this);</span>
<span class="nc" id="L265">    menuEdit.add(menuEditUndo);</span>
<span class="nc" id="L266">    menuEdit.addSeparator();</span>
<span class="nc" id="L267">    menuEdit.add(menuEditCopy);</span>
<span class="nc" id="L268">    menuEdit.addSeparator();</span>
<span class="nc" id="L269">    menuEdit.add(menuEditSearch);</span>
<span class="nc" id="L270">    menuEdit.add(menuEditClearSearch);</span>
<span class="nc" id="L271">    menuEdit.addSeparator();</span>
<span class="nc" id="L272">    menuEdit.add(menuEditRenameAttribute);</span>
<span class="nc" id="L273">    menuEdit.add(menuEditAttributeAsClass);</span>
<span class="nc" id="L274">    menuEdit.add(menuEditDeleteAttribute);</span>
<span class="nc" id="L275">    menuEdit.add(menuEditDeleteAttributes);</span>
<span class="nc" id="L276">    menuEdit.addSeparator();</span>
<span class="nc" id="L277">    menuEdit.add(menuEditDeleteInstance);</span>
<span class="nc" id="L278">    menuEdit.add(menuEditDeleteInstances);</span>
<span class="nc" id="L279">    menuEdit.add(menuEditSortInstances);</span>
<span class="nc" id="L280">    menuBar.add(menuEdit);</span>

<span class="nc" id="L282">    menuView = new JMenu(Messages.getInstance().getString(</span>
<span class="nc" id="L283">        &quot;ArffViewerMainPanel_CreatePanel_View_JMenu_Text&quot;));</span>
<span class="nc" id="L284">    menuViewAttributes = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L285">        &quot;ArffViewerMainPanel_CreatePanel_ViewAttributes_JMenuItem_Text&quot;),</span>
<span class="nc" id="L286">        ComponentHelper.getImageIcon(&quot;objects.gif&quot;));</span>
<span class="nc" id="L287">    menuViewAttributes.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_A,</span>
<span class="nc" id="L288">        KeyEvent.CTRL_MASK + KeyEvent.SHIFT_MASK));</span>
<span class="nc" id="L289">    menuViewAttributes.addActionListener(this);</span>
<span class="nc" id="L290">    menuViewValues = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L291">        &quot;ArffViewerMainPanel_CreatePanel_ViewValues_JMenuItem_Text&quot;),</span>
<span class="nc" id="L292">        ComponentHelper.getImageIcon(&quot;properties.gif&quot;));</span>
<span class="nc" id="L293">    menuViewValues.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_V,</span>
<span class="nc" id="L294">        KeyEvent.CTRL_MASK + KeyEvent.SHIFT_MASK));</span>
<span class="nc" id="L295">    menuViewValues.addActionListener(this);</span>
<span class="nc" id="L296">    menuViewOptimalColWidths = new JMenuItem(Messages.getInstance().getString(</span>
<span class="nc" id="L297">        &quot;ArffViewerMainPanel_CreatePanel_ViewOptimalColWidths_JMenuItem_Text&quot;),</span>
<span class="nc" id="L298">        ComponentHelper.getImageIcon(&quot;resize.gif&quot;));</span>
<span class="nc" id="L299">    menuViewOptimalColWidths.addActionListener(this);</span>
<span class="nc" id="L300">    menuView.add(menuViewAttributes);</span>
<span class="nc" id="L301">    menuView.add(menuViewValues);</span>
<span class="nc" id="L302">    menuView.addSeparator();</span>
<span class="nc" id="L303">    menuView.add(menuViewOptimalColWidths);</span>
<span class="nc" id="L304">    menuBar.add(menuView);</span>

    // tabbed pane
<span class="nc" id="L307">    tabbedPane = new JTabbedPane();</span>
<span class="nc" id="L308">    tabbedPane.addChangeListener(this);</span>
<span class="nc" id="L309">    add(tabbedPane, BorderLayout.CENTER);</span>

<span class="nc" id="L311">    updateMenu();</span>
<span class="nc" id="L312">    updateFrameTitle();</span>
<span class="nc" id="L313">  }</span>

  /**
   * returns the parent frame, if it's a JFrame, otherwise null
   * 
   * @return the parent frame
   */
  public JFrame getParentFrame() {
<span class="nc bnc" id="L321" title="All 2 branches missed.">    if (parent instanceof JFrame)</span>
<span class="nc" id="L322">      return (JFrame) parent;</span>
    else
<span class="nc" id="L324">      return null;</span>
  }

  /**
   * returns the parent frame, if it's a JInternalFrame, otherwise null
   * 
   * @return the parent frame
   */
  public JInternalFrame getParentInternalFrame() {
<span class="nc bnc" id="L333" title="All 2 branches missed.">    if (parent instanceof JInternalFrame)</span>
<span class="nc" id="L334">      return (JInternalFrame) parent;</span>
    else
<span class="nc" id="L336">      return null;</span>
  }

  /**
   * sets the new parent frame
   * 
   * @param value the parent frame
   */
  public void setParent(Container value) {
<span class="nc" id="L345">    parent = value;</span>
<span class="nc" id="L346">  }</span>

  /**
   * returns the menu bar to be added in a frame
   * 
   * @return the menu bar
   */
  public JMenuBar getMenu() {
<span class="nc" id="L354">    return menuBar;</span>
  }

  /**
   * returns the tabbedpane instance
   * 
   * @return the tabbed pane
   */
  public JTabbedPane getTabbedPane() {
<span class="nc" id="L363">    return tabbedPane;</span>
  }

  /**
   * whether to present a MessageBox on Exit or not
   * 
   * @param confirm whether a MessageBox pops up or not to confirm exit
   */
  public void setConfirmExit(boolean confirm) {
<span class="nc" id="L372">    confirmExit = confirm;</span>
<span class="nc" id="L373">  }</span>

  /**
   * returns the setting of whether to display a confirm messagebox or not on
   * exit
   * 
   * @return whether a messagebox is displayed or not
   */
  public boolean getConfirmExit() {
<span class="nc" id="L382">    return confirmExit;</span>
  }

  /**
   * whether to do a System.exit(0) on close
   * 
   * @param value enables/disables a System.exit(0) on close
   */
  public void setExitOnClose(boolean value) {
<span class="nc" id="L391">    exitOnClose = value;</span>
<span class="nc" id="L392">  }</span>

  /**
   * returns TRUE if a System.exit(0) is done on a close
   * 
   * @return true if a System.exit(0) is done on close
   */
  public boolean getExitOnClose() {
<span class="nc" id="L400">    return exitOnClose;</span>
  }

  /**
   * validates and repaints the frame
   */
  public void refresh() {
<span class="nc" id="L407">    validate();</span>
<span class="nc" id="L408">    repaint();</span>
<span class="nc" id="L409">  }</span>

  /**
   * returns the title (incl. filename) for the frame
   * 
   * @return the frame title
   */
  public String getFrameTitle() {
<span class="nc bnc" id="L417" title="All 2 branches missed.">    if (getCurrentFilename().equals(&quot;&quot;))</span>
<span class="nc" id="L418">      return frameTitle;</span>
    else
<span class="nc" id="L420">      return frameTitle</span>
<span class="nc" id="L421">          + Messages.getInstance().getString(</span>
<span class="nc" id="L422">              &quot;ArffViewerMainPanel_GetFrameTitle_Text&quot;) + getCurrentFilename();</span>
  }

  /**
   * sets the title of the parent frame, if one was provided
   */
  public void updateFrameTitle() {
<span class="nc bnc" id="L429" title="All 2 branches missed.">    if (getParentFrame() != null)</span>
<span class="nc" id="L430">      getParentFrame().setTitle(getFrameTitle());</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">    if (getParentInternalFrame() != null)</span>
<span class="nc" id="L432">      getParentInternalFrame().setTitle(getFrameTitle());</span>
<span class="nc" id="L433">  }</span>

  /**
   * sets the enabled/disabled state of the menu
   */
  protected void updateMenu() {
    boolean fileOpen;
    boolean isChanged;
    boolean canUndo;

<span class="nc bnc" id="L443" title="All 2 branches missed.">    fileOpen = (getCurrentPanel() != null);</span>
<span class="nc bnc" id="L444" title="All 4 branches missed.">    isChanged = fileOpen &amp;&amp; (getCurrentPanel().isChanged());</span>
<span class="nc bnc" id="L445" title="All 4 branches missed.">    canUndo = fileOpen &amp;&amp; (getCurrentPanel().canUndo());</span>

    // File
<span class="nc" id="L448">    menuFileOpen.setEnabled(true);</span>
<span class="nc" id="L449">    menuFileSave.setEnabled(isChanged);</span>
<span class="nc" id="L450">    menuFileSaveAs.setEnabled(fileOpen);</span>
<span class="nc" id="L451">    menuFileClose.setEnabled(fileOpen);</span>
<span class="nc" id="L452">    menuFileCloseAll.setEnabled(fileOpen);</span>
<span class="nc" id="L453">    menuFileProperties.setEnabled(fileOpen);</span>
<span class="nc" id="L454">    menuFileExit.setEnabled(true);</span>
    // Edit
<span class="nc" id="L456">    menuEditUndo.setEnabled(canUndo);</span>
<span class="nc" id="L457">    menuEditCopy.setEnabled(fileOpen);</span>
<span class="nc" id="L458">    menuEditSearch.setEnabled(fileOpen);</span>
<span class="nc" id="L459">    menuEditClearSearch.setEnabled(fileOpen);</span>
<span class="nc" id="L460">    menuEditAttributeAsClass.setEnabled(fileOpen);</span>
<span class="nc" id="L461">    menuEditRenameAttribute.setEnabled(fileOpen);</span>
<span class="nc" id="L462">    menuEditDeleteAttribute.setEnabled(fileOpen);</span>
<span class="nc" id="L463">    menuEditDeleteAttributes.setEnabled(fileOpen);</span>
<span class="nc" id="L464">    menuEditDeleteInstance.setEnabled(fileOpen);</span>
<span class="nc" id="L465">    menuEditDeleteInstances.setEnabled(fileOpen);</span>
<span class="nc" id="L466">    menuEditSortInstances.setEnabled(fileOpen);</span>
    // View
<span class="nc" id="L468">    menuViewAttributes.setEnabled(fileOpen);</span>
<span class="nc" id="L469">    menuViewValues.setEnabled(fileOpen);</span>
<span class="nc" id="L470">    menuViewOptimalColWidths.setEnabled(fileOpen);</span>
<span class="nc" id="L471">  }</span>

  /**
   * sets the title of the tab that contains the given component
   * 
   * @param component the component to set the title for
   */
  protected void setTabTitle(JComponent component) {
    int index;

<span class="nc bnc" id="L481" title="All 2 branches missed.">    if (!(component instanceof ArffPanel))</span>
<span class="nc" id="L482">      return;</span>

<span class="nc" id="L484">    index = tabbedPane.indexOfComponent(component);</span>
<span class="nc bnc" id="L485" title="All 2 branches missed.">    if (index == -1)</span>
<span class="nc" id="L486">      return;</span>

<span class="nc" id="L488">    tabbedPane.setTitleAt(index, ((ArffPanel) component).getTitle());</span>
<span class="nc" id="L489">    updateFrameTitle();</span>
<span class="nc" id="L490">  }</span>

  /**
   * returns the number of panels currently open
   * 
   * @return the number of open panels
   */
  public int getPanelCount() {
<span class="nc" id="L498">    return tabbedPane.getTabCount();</span>
  }

  /**
   * returns the specified panel, &lt;code&gt;null&lt;/code&gt; if index is out of bounds
   * 
   * @param index the index of the panel
   * @return the panel
   */
  public ArffPanel getPanel(int index) {
<span class="nc bnc" id="L508" title="All 4 branches missed.">    if ((index &gt;= 0) &amp;&amp; (index &lt; getPanelCount()))</span>
<span class="nc" id="L509">      return (ArffPanel) tabbedPane.getComponentAt(index);</span>
    else
<span class="nc" id="L511">      return null;</span>
  }

  /**
   * returns the currently selected tab index
   * 
   * @return the index of the currently selected tab
   */
  public int getCurrentIndex() {
<span class="nc" id="L520">    return tabbedPane.getSelectedIndex();</span>
  }

  /**
   * returns the currently selected panel
   * 
   * @return the currently selected panel
   */
  public ArffPanel getCurrentPanel() {
<span class="nc" id="L529">    return getPanel(getCurrentIndex());</span>
  }

  /**
   * checks whether a panel is currently selected
   * 
   * @return true if a panel is currently selected
   */
  public boolean isPanelSelected() {
<span class="nc bnc" id="L538" title="All 2 branches missed.">    return (getCurrentPanel() != null);</span>
  }

  /**
   * returns the filename of the specified panel
   * 
   * @param index the index of the panel
   * @return the filename for the panel
   */
  public String getFilename(int index) {
    String result;
    ArffPanel panel;

<span class="nc" id="L551">    result = &quot;&quot;;</span>
<span class="nc" id="L552">    panel = getPanel(index);</span>

<span class="nc bnc" id="L554" title="All 2 branches missed.">    if (panel != null)</span>
<span class="nc" id="L555">      result = panel.getFilename();</span>

<span class="nc" id="L557">    return result;</span>
  }

  /**
   * returns the filename of the current tab
   * 
   * @return the current filename
   */
  public String getCurrentFilename() {
<span class="nc" id="L566">    return getFilename(getCurrentIndex());</span>
  }

  /**
   * sets the filename of the specified panel
   * 
   * @param index the index of the panel
   * @param filename the new filename
   */
  public void setFilename(int index, String filename) {
    ArffPanel panel;

<span class="nc" id="L578">    panel = getPanel(index);</span>

<span class="nc bnc" id="L580" title="All 2 branches missed.">    if (panel != null) {</span>
<span class="nc" id="L581">      panel.setFilename(filename);</span>
<span class="nc" id="L582">      setTabTitle(panel);</span>
    }
<span class="nc" id="L584">  }</span>

  /**
   * sets the filename of the current tab
   * 
   * @param filename the new filename
   */
  public void setCurrentFilename(String filename) {
<span class="nc" id="L592">    setFilename(getCurrentIndex(), filename);</span>
<span class="nc" id="L593">  }</span>

  /**
   * if the file is changed it pops up a dialog whether to change the settings.
   * if the project wasn't changed or saved it returns TRUE
   * 
   * @return true if project wasn't changed or saved
   */
  protected boolean saveChanges() {
<span class="nc" id="L602">    return saveChanges(true);</span>
  }

  /**
   * if the file is changed it pops up a dialog whether to change the settings.
   * if the project wasn't changed or saved it returns TRUE
   * 
   * @param showCancel whether we have YES/NO/CANCEL or only YES/NO
   * @return true if project wasn't changed or saved
   */
  protected boolean saveChanges(boolean showCancel) {
    int button;
    boolean result;

<span class="nc bnc" id="L616" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L617">      return true;</span>

<span class="nc bnc" id="L619" title="All 2 branches missed.">    result = !getCurrentPanel().isChanged();</span>

<span class="nc bnc" id="L621" title="All 2 branches missed.">    if (getCurrentPanel().isChanged()) {</span>
      try {
<span class="nc bnc" id="L623" title="All 2 branches missed.">        if (showCancel)</span>
<span class="nc" id="L624">          button = ComponentHelper</span>
<span class="nc" id="L625">              .showMessageBox(</span>
<span class="nc" id="L626">                  this,</span>
                  Messages
<span class="nc" id="L628">                      .getInstance()</span>
<span class="nc" id="L629">                      .getString(</span>
<span class="nc" id="L630">                          &quot;ArffViewerMainPanel_SaveChanges_ComponentHelperShowMessageBox_Text_First&quot;),</span>
                  Messages
<span class="nc" id="L632">                      .getInstance()</span>
<span class="nc" id="L633">                      .getString(</span>
<span class="nc" id="L634">                          &quot;ArffViewerMainPanel_SaveChanges_ComponentHelperShowMessageBox_Text_Second&quot;),</span>
<span class="nc" id="L635">                  JOptionPane.YES_NO_CANCEL_OPTION,</span>
<span class="nc" id="L636">                  JOptionPane.QUESTION_MESSAGE);</span>
        else
<span class="nc" id="L638">          button = ComponentHelper</span>
<span class="nc" id="L639">              .showMessageBox(</span>
<span class="nc" id="L640">                  this,</span>
                  Messages
<span class="nc" id="L642">                      .getInstance()</span>
<span class="nc" id="L643">                      .getString(</span>
<span class="nc" id="L644">                          &quot;ArffViewerMainPanel_SaveChanges_ComponentHelperShowMessageBox_Text_Third&quot;),</span>
                  Messages
<span class="nc" id="L646">                      .getInstance()</span>
<span class="nc" id="L647">                      .getString(</span>
<span class="nc" id="L648">                          &quot;ArffViewerMainPanel_SaveChanges_ComponentHelperShowMessageBox_Text_Fourth&quot;),</span>
<span class="nc" id="L649">                  JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);</span>
<span class="nc" id="L650">      } catch (Exception e) {</span>
<span class="nc" id="L651">        button = JOptionPane.CANCEL_OPTION;</span>
      }

<span class="nc bnc" id="L654" title="All 4 branches missed.">      switch (button) {</span>
      case JOptionPane.YES_OPTION:
<span class="nc" id="L656">        saveFile();</span>
<span class="nc bnc" id="L657" title="All 2 branches missed.">        result = !getCurrentPanel().isChanged();</span>
<span class="nc" id="L658">        break;</span>
      case JOptionPane.NO_OPTION:
<span class="nc" id="L660">        result = true;</span>
<span class="nc" id="L661">        break;</span>
      case JOptionPane.CANCEL_OPTION:
<span class="nc" id="L663">        result = false;</span>
        break;
      }
    }

<span class="nc" id="L668">    return result;</span>
  }

  /**
   * loads the specified file
   * 
   * @param filename the file to load
   */
  public void loadFile(String filename) {
    ArffPanel panel;

<span class="nc" id="L679">    panel = new ArffPanel(filename);</span>
<span class="nc" id="L680">    panel.addChangeListener(this);</span>
<span class="nc" id="L681">    tabbedPane.addTab(panel.getTitle(), panel);</span>
<span class="nc" id="L682">    tabbedPane.setSelectedIndex(tabbedPane.getTabCount() - 1);</span>
<span class="nc" id="L683">  }</span>

  /**
   * loads the specified file into the table
   */
  public void loadFile() {
    int retVal;
    int i;
    String filename;

<span class="nc" id="L693">    retVal = fileChooser.showOpenDialog(this);</span>
<span class="nc bnc" id="L694" title="All 2 branches missed.">    if (retVal != ConverterFileChooser.APPROVE_OPTION)</span>
<span class="nc" id="L695">      return;</span>

<span class="nc" id="L697">    setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));</span>

<span class="nc bnc" id="L699" title="All 2 branches missed.">    for (i = 0; i &lt; fileChooser.getSelectedFiles().length; i++) {</span>
<span class="nc" id="L700">      filename = fileChooser.getSelectedFiles()[i].getAbsolutePath();</span>
<span class="nc" id="L701">      loadFile(filename);</span>
    }

<span class="nc" id="L704">    setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));</span>
<span class="nc" id="L705">  }</span>

  /**
   * saves the current data into a file
   */
  public void saveFile() {
    ArffPanel panel;
    String filename;
    AbstractSaver saver;

    // no panel? -&gt; exit
<span class="nc" id="L716">    panel = getCurrentPanel();</span>
<span class="nc bnc" id="L717" title="All 2 branches missed.">    if (panel == null)</span>
<span class="nc" id="L718">      return;</span>

<span class="nc" id="L720">    filename = panel.getFilename();</span>
<span class="nc bnc" id="L721" title="All 2 branches missed.">    if (filename.equals(ArffPanel.TAB_INSTANCES)) {</span>
<span class="nc" id="L722">      saveFileAs();</span>
    } else {
<span class="nc" id="L724">      saver = ConverterUtils.getSaverForFile(filename);</span>
      try {
<span class="nc" id="L726">        saver.setInstances(panel.getInstances());</span>
<span class="nc" id="L727">        saver.setFile(new File(filename));</span>
<span class="nc" id="L728">        saver.writeBatch();</span>
<span class="nc" id="L729">        panel.setChanged(false);</span>
<span class="nc" id="L730">        setCurrentFilename(filename);</span>
<span class="nc" id="L731">      } catch (Exception e) {</span>
<span class="nc" id="L732">        e.printStackTrace();</span>
      }
    }
<span class="nc" id="L735">  }</span>

  /**
   * saves the current data into a new file
   */
  public void saveFileAs() {
    int retVal;
    ArffPanel panel;

    // no panel? -&gt; exit
<span class="nc" id="L745">    panel = getCurrentPanel();</span>
<span class="nc bnc" id="L746" title="All 2 branches missed.">    if (panel == null) {</span>
<span class="nc" id="L747">      System.out.println(Messages.getInstance().getString(</span>
<span class="nc" id="L748">          &quot;ArffViewerMainPanel_SaveFileAs_Text&quot;));</span>
<span class="nc" id="L749">      return;</span>
    }

<span class="nc bnc" id="L752" title="All 2 branches missed.">    if (!getCurrentFilename().equals(&quot;&quot;)) {</span>
      try {
<span class="nc" id="L754">        fileChooser.setSelectedFile(new File(getCurrentFilename()));</span>
<span class="nc" id="L755">      } catch (Exception e) {</span>
        // ignore
      }
    }

    // set filter for savers
    try {
<span class="nc" id="L762">      fileChooser.setCapabilitiesFilter(Capabilities.forInstances(panel</span>
<span class="nc" id="L763">          .getInstances()));</span>
<span class="nc" id="L764">    } catch (Exception e) {</span>
<span class="nc" id="L765">      fileChooser.setCapabilitiesFilter(null);</span>
    }

<span class="nc" id="L768">    retVal = fileChooser.showSaveDialog(this);</span>
<span class="nc bnc" id="L769" title="All 2 branches missed.">    if (retVal != ConverterFileChooser.APPROVE_OPTION)</span>
<span class="nc" id="L770">      return;</span>

<span class="nc" id="L772">    panel.setChanged(false);</span>
<span class="nc" id="L773">    setCurrentFilename(fileChooser.getSelectedFile().getAbsolutePath());</span>
    // saveFile();

<span class="nc" id="L776">    AbstractFileSaver saver = fileChooser.getSaver();</span>
<span class="nc" id="L777">    saver.setInstances(panel.getInstances());</span>
    try {
<span class="nc" id="L779">      saver.writeBatch();</span>
<span class="nc" id="L780">      panel.setChanged(false);</span>
<span class="nc" id="L781">    } catch (IOException e) {</span>
<span class="nc" id="L782">      e.printStackTrace();</span>
    }
<span class="nc" id="L784">  }</span>

  /**
   * closes the current tab
   */
  public void closeFile() {
<span class="nc" id="L790">    closeFile(true);</span>
<span class="nc" id="L791">  }</span>

  /**
   * closes the current tab
   * 
   * @param showCancel whether to show an additional CANCEL button in the
   *          &quot;Want to save changes&quot;-dialog
   * @see #saveChanges(boolean)
   */
  public void closeFile(boolean showCancel) {
<span class="nc bnc" id="L801" title="All 2 branches missed.">    if (getCurrentIndex() == -1)</span>
<span class="nc" id="L802">      return;</span>

<span class="nc bnc" id="L804" title="All 2 branches missed.">    if (!saveChanges(showCancel))</span>
<span class="nc" id="L805">      return;</span>

<span class="nc" id="L807">    tabbedPane.removeTabAt(getCurrentIndex());</span>
<span class="nc" id="L808">    updateFrameTitle();</span>
<span class="nc" id="L809">    System.gc();</span>
<span class="nc" id="L810">  }</span>

  /**
   * closes all open files
   */
  public void closeAllFiles() {
<span class="nc bnc" id="L816" title="All 2 branches missed.">    while (tabbedPane.getTabCount() &gt; 0) {</span>
<span class="nc bnc" id="L817" title="All 2 branches missed.">      if (!saveChanges(true))</span>
<span class="nc" id="L818">        return;</span>

<span class="nc" id="L820">      tabbedPane.removeTabAt(getCurrentIndex());</span>
<span class="nc" id="L821">      updateFrameTitle();</span>
<span class="nc" id="L822">      System.gc();</span>
    }
<span class="nc" id="L824">  }</span>

  /**
   * displays some properties of the instances
   */
  public void showProperties() {
    ArffPanel panel;
    ListSelectorDialog dialog;
    Vector props;
    Instances inst;

<span class="nc" id="L835">    panel = getCurrentPanel();</span>
<span class="nc bnc" id="L836" title="All 2 branches missed.">    if (panel == null)</span>
<span class="nc" id="L837">      return;</span>

<span class="nc" id="L839">    inst = panel.getInstances();</span>
<span class="nc bnc" id="L840" title="All 2 branches missed.">    if (inst == null)</span>
<span class="nc" id="L841">      return;</span>
<span class="nc bnc" id="L842" title="All 2 branches missed.">    if (inst.classIndex() &lt; 0)</span>
<span class="nc" id="L843">      inst.setClassIndex(inst.numAttributes() - 1);</span>

    // get some data
<span class="nc" id="L846">    props = new Vector();</span>
<span class="nc" id="L847">    props.add(Messages.getInstance().getString(</span>
<span class="nc" id="L848">        &quot;ArffViewerMainPanel_ShowProperties_Filename_Text&quot;)</span>
<span class="nc" id="L849">        + panel.getFilename());</span>
<span class="nc" id="L850">    props.add(Messages.getInstance().getString(</span>
<span class="nc" id="L851">        &quot;ArffViewerMainPanel_ShowProperties_Filename_Text&quot;)</span>
<span class="nc" id="L852">        + inst.relationName());</span>
<span class="nc" id="L853">    props.add(Messages.getInstance().getString(</span>
<span class="nc" id="L854">        &quot;ArffViewerMainPanel_ShowProperties_Instances_Text&quot;)</span>
<span class="nc" id="L855">        + inst.numInstances());</span>
<span class="nc" id="L856">    props.add(Messages.getInstance().getString(</span>
<span class="nc" id="L857">        &quot;ArffViewerMainPanel_ShowProperties_Attributes_Text&quot;)</span>
<span class="nc" id="L858">        + inst.numAttributes());</span>
<span class="nc" id="L859">    props.add(Messages.getInstance().getString(</span>
<span class="nc" id="L860">        &quot;ArffViewerMainPanel_ShowProperties_ClassAttribute_Text&quot;)</span>
<span class="nc" id="L861">        + inst.classAttribute().name());</span>
<span class="nc" id="L862">    props.add(Messages.getInstance().getString(</span>
<span class="nc" id="L863">        &quot;ArffViewerMainPanel_ShowProperties_ClassLabels_Text&quot;)</span>
<span class="nc" id="L864">        + inst.numClasses());</span>

<span class="nc" id="L866">    dialog = new ListSelectorDialog(getParentFrame(), new JList(props));</span>
<span class="nc" id="L867">    dialog.showDialog();</span>
<span class="nc" id="L868">  }</span>

  /**
   * closes the window, i.e., if the parent is not null and implements the
   * WindowListener interface it calls the windowClosing method
   */
  public void close() {
<span class="nc bnc" id="L875" title="All 2 branches missed.">    if (getParentInternalFrame() != null)</span>
<span class="nc" id="L876">      getParentInternalFrame().doDefaultCloseAction();</span>
<span class="nc bnc" id="L877" title="All 2 branches missed.">    else if (getParentFrame() != null)</span>
<span class="nc" id="L878">      ((Window) getParentFrame()).dispatchEvent(new WindowEvent(</span>
<span class="nc" id="L879">          getParentFrame(), WindowEvent.WINDOW_CLOSING));</span>
<span class="nc" id="L880">  }</span>

  /**
   * undoes the last action
   */
  public void undo() {
<span class="nc bnc" id="L886" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L887">      return;</span>

<span class="nc" id="L889">    getCurrentPanel().undo();</span>
<span class="nc" id="L890">  }</span>

  /**
   * copies the content of the selection to the clipboard
   */
  public void copyContent() {
<span class="nc bnc" id="L896" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L897">      return;</span>

<span class="nc" id="L899">    getCurrentPanel().copyContent();</span>
<span class="nc" id="L900">  }</span>

  /**
   * searches for a string in the cells
   */
  public void search() {
<span class="nc bnc" id="L906" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L907">      return;</span>

<span class="nc" id="L909">    getCurrentPanel().search();</span>
<span class="nc" id="L910">  }</span>

  /**
   * clears the search, i.e. resets the found cells
   */
  public void clearSearch() {
<span class="nc bnc" id="L916" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L917">      return;</span>

<span class="nc" id="L919">    getCurrentPanel().clearSearch();</span>
<span class="nc" id="L920">  }</span>

  /**
   * renames the current selected Attribute
   */
  public void renameAttribute() {
<span class="nc bnc" id="L926" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L927">      return;</span>

<span class="nc" id="L929">    getCurrentPanel().renameAttribute();</span>
<span class="nc" id="L930">  }</span>

  /**
   * sets the current selected Attribute as class attribute, i.e. it moves it to
   * the end of the attributes
   */
  public void attributeAsClass() {
<span class="nc bnc" id="L937" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L938">      return;</span>

<span class="nc" id="L940">    getCurrentPanel().attributeAsClass();</span>
<span class="nc" id="L941">  }</span>

  /**
   * deletes the current selected Attribute or several chosen ones
   * 
   * @param multiple whether to delete myultiple attributes
   */
  public void deleteAttribute(boolean multiple) {
<span class="nc bnc" id="L949" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L950">      return;</span>

<span class="nc bnc" id="L952" title="All 2 branches missed.">    if (multiple)</span>
<span class="nc" id="L953">      getCurrentPanel().deleteAttributes();</span>
    else
<span class="nc" id="L955">      getCurrentPanel().deleteAttribute();</span>
<span class="nc" id="L956">  }</span>

  /**
   * deletes the current selected Instance or several chosen ones
   * 
   * @param multiple whether to delete multiple instances
   */
  public void deleteInstance(boolean multiple) {
<span class="nc bnc" id="L964" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L965">      return;</span>

<span class="nc bnc" id="L967" title="All 2 branches missed.">    if (multiple)</span>
<span class="nc" id="L968">      getCurrentPanel().deleteInstances();</span>
    else
<span class="nc" id="L970">      getCurrentPanel().deleteInstance();</span>
<span class="nc" id="L971">  }</span>

  /**
   * sorts the current selected attribute
   */
  public void sortInstances() {
<span class="nc bnc" id="L977" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L978">      return;</span>

<span class="nc" id="L980">    getCurrentPanel().sortInstances();</span>
<span class="nc" id="L981">  }</span>

  /**
   * displays all the attributes, returns the selected item or NULL if canceled
   * 
   * @return the name of the selected attribute
   */
  public String showAttributes() {
    ArffSortedTableModel model;
    ListSelectorDialog dialog;
    int i;
    JList list;
    String name;
    int result;

<span class="nc bnc" id="L996" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L997">      return null;</span>

<span class="nc" id="L999">    list = new JList(getCurrentPanel().getAttributes());</span>
<span class="nc" id="L1000">    dialog = new ListSelectorDialog(getParentFrame(), list);</span>
<span class="nc" id="L1001">    result = dialog.showDialog();</span>

<span class="nc bnc" id="L1003" title="All 2 branches missed.">    if (result == ListSelectorDialog.APPROVE_OPTION) {</span>
<span class="nc" id="L1004">      model = (ArffSortedTableModel) getCurrentPanel().getTable().getModel();</span>
<span class="nc" id="L1005">      name = list.getSelectedValue().toString();</span>
<span class="nc" id="L1006">      i = model.getAttributeColumn(name);</span>
<span class="nc" id="L1007">      JTableHelper.scrollToVisible(getCurrentPanel().getTable(), 0, i);</span>
<span class="nc" id="L1008">      getCurrentPanel().getTable().setSelectedColumn(i);</span>
<span class="nc" id="L1009">      return name;</span>
    } else {
<span class="nc" id="L1011">      return null;</span>
    }
  }

  /**
   * displays all the distinct values for an attribute
   */
  public void showValues() {
    String attribute;
    ArffSortedTableModel model;
    ArffTable table;
    HashSet values;
    Vector items;
    Iterator iter;
    ListSelectorDialog dialog;
    int i;
    int col;

    // choose attribute to retrieve values for
<span class="nc" id="L1030">    attribute = showAttributes();</span>
<span class="nc bnc" id="L1031" title="All 2 branches missed.">    if (attribute == null)</span>
<span class="nc" id="L1032">      return;</span>

<span class="nc" id="L1034">    table = getCurrentPanel().getTable();</span>
<span class="nc" id="L1035">    model = (ArffSortedTableModel) table.getModel();</span>

    // get column index
<span class="nc" id="L1038">    col = -1;</span>
<span class="nc bnc" id="L1039" title="All 2 branches missed.">    for (i = 0; i &lt; table.getColumnCount(); i++) {</span>
<span class="nc bnc" id="L1040" title="All 2 branches missed.">      if (table.getPlainColumnName(i).equals(attribute)) {</span>
<span class="nc" id="L1041">        col = i;</span>
<span class="nc" id="L1042">        break;</span>
      }
    }
    // not found?
<span class="nc bnc" id="L1046" title="All 2 branches missed.">    if (col == -1)</span>
<span class="nc" id="L1047">      return;</span>

    // get values
<span class="nc" id="L1050">    values = new HashSet();</span>
<span class="nc" id="L1051">    items = new Vector();</span>
<span class="nc bnc" id="L1052" title="All 2 branches missed.">    for (i = 0; i &lt; model.getRowCount(); i++)</span>
<span class="nc" id="L1053">      values.add(model.getValueAt(i, col).toString());</span>
<span class="nc bnc" id="L1054" title="All 2 branches missed.">    if (values.isEmpty())</span>
<span class="nc" id="L1055">      return;</span>
<span class="nc" id="L1056">    iter = values.iterator();</span>
<span class="nc bnc" id="L1057" title="All 2 branches missed.">    while (iter.hasNext())</span>
<span class="nc" id="L1058">      items.add(iter.next());</span>
<span class="nc" id="L1059">    Collections.sort(items);</span>

<span class="nc" id="L1061">    dialog = new ListSelectorDialog(getParentFrame(), new JList(items));</span>
<span class="nc" id="L1062">    dialog.showDialog();</span>
<span class="nc" id="L1063">  }</span>

  /**
   * sets the optimal column width for all columns
   */
  public void setOptimalColWidths() {
<span class="nc bnc" id="L1069" title="All 2 branches missed.">    if (!isPanelSelected())</span>
<span class="nc" id="L1070">      return;</span>

<span class="nc" id="L1072">    getCurrentPanel().setOptimalColWidths();</span>
<span class="nc" id="L1073">  }</span>

  /**
   * invoked when an action occurs
   * 
   * @param e the action event
   */
  @Override
  public void actionPerformed(ActionEvent e) {
    Object o;

<span class="nc" id="L1084">    o = e.getSource();</span>

<span class="nc bnc" id="L1086" title="All 2 branches missed.">    if (o == menuFileOpen)</span>
<span class="nc" id="L1087">      loadFile();</span>
<span class="nc bnc" id="L1088" title="All 2 branches missed.">    else if (o == menuFileSave)</span>
<span class="nc" id="L1089">      saveFile();</span>
<span class="nc bnc" id="L1090" title="All 2 branches missed.">    else if (o == menuFileSaveAs)</span>
<span class="nc" id="L1091">      saveFileAs();</span>
<span class="nc bnc" id="L1092" title="All 2 branches missed.">    else if (o == menuFileClose)</span>
<span class="nc" id="L1093">      closeFile();</span>
<span class="nc bnc" id="L1094" title="All 2 branches missed.">    else if (o == menuFileCloseAll)</span>
<span class="nc" id="L1095">      closeAllFiles();</span>
<span class="nc bnc" id="L1096" title="All 2 branches missed.">    else if (o == menuFileProperties)</span>
<span class="nc" id="L1097">      showProperties();</span>
<span class="nc bnc" id="L1098" title="All 2 branches missed.">    else if (o == menuFileExit)</span>
<span class="nc" id="L1099">      close();</span>
<span class="nc bnc" id="L1100" title="All 2 branches missed.">    else if (o == menuEditUndo)</span>
<span class="nc" id="L1101">      undo();</span>
<span class="nc bnc" id="L1102" title="All 2 branches missed.">    else if (o == menuEditCopy)</span>
<span class="nc" id="L1103">      copyContent();</span>
<span class="nc bnc" id="L1104" title="All 2 branches missed.">    else if (o == menuEditSearch)</span>
<span class="nc" id="L1105">      search();</span>
<span class="nc bnc" id="L1106" title="All 2 branches missed.">    else if (o == menuEditClearSearch)</span>
<span class="nc" id="L1107">      clearSearch();</span>
<span class="nc bnc" id="L1108" title="All 2 branches missed.">    else if (o == menuEditDeleteAttribute)</span>
<span class="nc" id="L1109">      deleteAttribute(false);</span>
<span class="nc bnc" id="L1110" title="All 2 branches missed.">    else if (o == menuEditDeleteAttributes)</span>
<span class="nc" id="L1111">      deleteAttribute(true);</span>
<span class="nc bnc" id="L1112" title="All 2 branches missed.">    else if (o == menuEditRenameAttribute)</span>
<span class="nc" id="L1113">      renameAttribute();</span>
<span class="nc bnc" id="L1114" title="All 2 branches missed.">    else if (o == menuEditAttributeAsClass)</span>
<span class="nc" id="L1115">      attributeAsClass();</span>
<span class="nc bnc" id="L1116" title="All 2 branches missed.">    else if (o == menuEditDeleteInstance)</span>
<span class="nc" id="L1117">      deleteInstance(false);</span>
<span class="nc bnc" id="L1118" title="All 2 branches missed.">    else if (o == menuEditDeleteInstances)</span>
<span class="nc" id="L1119">      deleteInstance(true);</span>
<span class="nc bnc" id="L1120" title="All 2 branches missed.">    else if (o == menuEditSortInstances)</span>
<span class="nc" id="L1121">      sortInstances();</span>
<span class="nc bnc" id="L1122" title="All 2 branches missed.">    else if (o == menuViewAttributes)</span>
<span class="nc" id="L1123">      showAttributes();</span>
<span class="nc bnc" id="L1124" title="All 2 branches missed.">    else if (o == menuViewValues)</span>
<span class="nc" id="L1125">      showValues();</span>
<span class="nc bnc" id="L1126" title="All 2 branches missed.">    else if (o == menuViewOptimalColWidths)</span>
<span class="nc" id="L1127">      setOptimalColWidths();</span>

<span class="nc" id="L1129">    updateMenu();</span>
<span class="nc" id="L1130">  }</span>

  /**
   * Invoked when the target of the listener has changed its state.
   * 
   * @param e the change event
   */
  @Override
  public void stateChanged(ChangeEvent e) {
<span class="nc" id="L1139">    updateFrameTitle();</span>
<span class="nc" id="L1140">    updateMenu();</span>

    // did the content of panel change? -&gt; change title of tab
<span class="nc bnc" id="L1143" title="All 2 branches missed.">    if (e.getSource() instanceof JComponent)</span>
<span class="nc" id="L1144">      setTabTitle((JComponent) e.getSource());</span>
<span class="nc" id="L1145">  }</span>

  /**
   * returns only the classname
   * 
   * @return the classname
   */
  @Override
  public String toString() {
<span class="nc" id="L1154">    return this.getClass().getName();</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>AllTests (Nov 28, 2015 2:34:31 PM)</div></body></html>