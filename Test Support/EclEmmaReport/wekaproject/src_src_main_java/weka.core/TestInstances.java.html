<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>TestInstances.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (Nov 28, 2015 2:34:31 PM)</a> &gt; <a href="../../index.html" class="el_group">wekaproject</a> &gt; <a href="../index.html" class="el_bundle">src/src/main/java</a> &gt; <a href="index.source.html" class="el_package">weka.core</a> &gt; <span class="el_source">TestInstances.java</span></div><h1>TestInstances.java</h1><pre class="source lang-java linenums">/*
 *    This program is free software; you can redistribute it and/or modify
 *    it under the terms of the GNU General Public License as published by
 *    the Free Software Foundation; either version 2 of the License, or
 *    (at your option) any later version.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU General Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License
 *    along with this program; if not, write to the Free Software
 *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

/*
 * TestInstances.java
 * Copyright (C) 2006 University of Waikato, Hamilton, New Zealand
 */

package weka.core;

import weka.core.Capabilities.Capability;

import java.io.Serializable;
import java.util.Enumeration;
import java.util.Random;
import java.util.StringTokenizer;
import java.util.Vector;

/**
 * Generates artificial datasets for testing. In case of Multi-Instance data
 * the settings for the number of attributes applies to the data inside
 * the bag. Originally based on code from the CheckClassifier.&lt;p/&gt;
 *
 &lt;!-- options-start --&gt;
 * Valid options are: &lt;p/&gt;
 * 
 * &lt;pre&gt; -relation &amp;lt;name&amp;gt;
 *  The name of the data set.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -seed &amp;lt;num&amp;gt;
 *  The seed value.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -num-instances &amp;lt;num&amp;gt;
 *  The number of instances in the datasets (default 20).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -class-type &amp;lt;num&amp;gt;
 *  The class type, see constants in weka.core.Attribute
 *  (default 1=nominal).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -class-values &amp;lt;num&amp;gt;
 *  The number of classes to generate (for nominal classes only)
 *  (default 2).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -class-index &amp;lt;num&amp;gt;
 *  The class index, with -1=last, (default -1).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -no-class
 *  Doesn't include a class attribute in the output.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -nominal &amp;lt;num&amp;gt;
 *  The number of nominal attributes (default 1).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -nominal-values &amp;lt;num&amp;gt;
 *  The number of values for nominal attributes (default 2).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -numeric &amp;lt;num&amp;gt;
 *  The number of numeric attributes (default 0).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -string &amp;lt;num&amp;gt;
 *  The number of string attributes (default 0).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -words &amp;lt;comma-separated-list&amp;gt;
 *  The words to use in string attributes.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -word-separators &amp;lt;chars&amp;gt;
 *  The word separators to use in string attributes.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -date &amp;lt;num&amp;gt;
 *  The number of date attributes (default 0).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -relational &amp;lt;num&amp;gt;
 *  The number of relational attributes (default 0).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -relational-nominal &amp;lt;num&amp;gt;
 *  The number of nominal attributes in a rel. attribute (default 1).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -relational-nominal-values &amp;lt;num&amp;gt;
 *  The number of values for nominal attributes in a rel. attribute (default 2).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -relational-numeric &amp;lt;num&amp;gt;
 *  The number of numeric attributes in a rel. attribute (default 0).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -relational-string &amp;lt;num&amp;gt;
 *  The number of string attributes in a rel. attribute (default 0).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -relational-date &amp;lt;num&amp;gt;
 *  The number of date attributes in a rel. attribute (default 0).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -num-instances-relational &amp;lt;num&amp;gt;
 *  The number of instances in relational/bag attributes (default 10).&lt;/pre&gt;
 * 
 * &lt;pre&gt; -multi-instance
 *  Generates multi-instance data.&lt;/pre&gt;
 * 
 * &lt;pre&gt; -W &amp;lt;classname&amp;gt;
 *  The Capabilities handler to base the dataset on.
 *  The other parameters can be used to override the ones
 *  determined from the handler. Additional parameters for
 *  handler can be passed on after the '--'.&lt;/pre&gt;
 * 
 &lt;!-- options-end --&gt;
 * 
 * @author FracPete (fracpete at waikato dot ac dot nz)
 * @version $Revision: 6325 $
 * @see weka.classifiers.CheckClassifier
 */
<span class="fc" id="L120">public class TestInstances </span>
  implements Cloneable, Serializable, OptionHandler, RevisionHandler {

  /** for serialization */
  private static final long serialVersionUID = -6263968936330390469L;

  /** can be used for settting the class attribute index to last 
   * @see #setClassIndex(int) */
  public final static int CLASS_IS_LAST = -1;
  
  /** can be used to avoid generating a class attribute
   * @see #setClassIndex(int) */
  public final static int NO_CLASS = -2;

  /** the default list of words used in strings */
<span class="fc" id="L135">  public final static String[] DEFAULT_WORDS = {&quot;The&quot;, &quot;quick&quot;, &quot;brown&quot;, &quot;fox&quot;, &quot;jumps&quot;, &quot;over&quot;, &quot;the&quot;, &quot;lazy&quot;, &quot;dog&quot;};</span>

  /** the default word separators used in strings */
  public final static String DEFAULT_SEPARATORS = &quot; &quot;;
  
  /** for generating String attributes/classes */
<span class="fc" id="L141">  protected String[] m_Words = DEFAULT_WORDS;</span>
  
  /** for generating String attributes/classes */
<span class="fc" id="L144">  protected String m_WordSeparators = DEFAULT_SEPARATORS;</span>
  
  /** the name of the relation */
<span class="fc" id="L147">  protected String m_Relation = &quot;Testdata&quot;;</span>
  
  /** the seed value */
<span class="fc" id="L150">  protected int m_Seed = 1;</span>
  
  /** the random number generator */
<span class="fc" id="L153">  protected Random m_Random = new Random(m_Seed);</span>
  
  /** the number of instances */
<span class="fc" id="L156">  protected int m_NumInstances = 20;</span>
  
  /** the class type */
<span class="fc" id="L159">  protected int m_ClassType = Attribute.NOMINAL;</span>
  
  /** the number of classes (in case of NOMINAL class) */
<span class="fc" id="L162">  protected int m_NumClasses = 2;</span>

  /** the class index (-1 is LAST, -2 means no class) 
   * @see #CLASS_IS_LAST
   * @see #NO_CLASS */
<span class="fc" id="L167">  protected int m_ClassIndex = CLASS_IS_LAST;</span>
  
  /** the number of nominal attributes */
<span class="fc" id="L170">  protected int m_NumNominal = 1;</span>
  
  /** the number of values for nominal attributes */
<span class="fc" id="L173">  protected int m_NumNominalValues = 2;</span>
  
  /** the number of numeric attributes */
<span class="fc" id="L176">  protected int m_NumNumeric = 0;</span>
  
  /** the number of string attributes */
<span class="fc" id="L179">  protected int m_NumString = 0;</span>
  
  /** the number of date attributes */
<span class="fc" id="L182">  protected int m_NumDate = 0;</span>
  
  /** the number of relational attributes */
<span class="fc" id="L185">  protected int m_NumRelational = 0;</span>
  
  /** the number of nominal attributes in a relational attribute */
<span class="fc" id="L188">  protected int m_NumRelationalNominal = 1;</span>
  
  /** the number of values for nominal attributes in relational attributes */
<span class="fc" id="L191">  protected int m_NumRelationalNominalValues = 2;</span>
  
  /** the number of numeric attributes in a relational attribute */
<span class="fc" id="L194">  protected int m_NumRelationalNumeric = 0;</span>
  
  /** the number of string attributes in a relational attribute */
<span class="fc" id="L197">  protected int m_NumRelationalString = 0;</span>
  
  /** the number of date attributes in a relational attribute */
<span class="fc" id="L200">  protected int m_NumRelationalDate = 0;</span>
  
  /** whether to generate Multi-Instance data or not */
<span class="fc" id="L203">  protected boolean m_MultiInstance = false;</span>
  
  /** the number of instances in relational attributes (applies also for bags
   * in multi-instance) */
<span class="fc" id="L207">  protected int m_NumInstancesRelational = 10;</span>
  
  /** the format of the multi-instance data */
<span class="fc" id="L210">  protected Instances[] m_RelationalFormat = null;</span>
  
  /** the format of the multi-instance data of the class */
<span class="fc" id="L213">  protected Instances m_RelationalClassFormat = null;</span>
  
  /** the generated data */
<span class="fc" id="L216">  protected Instances m_Data = null;</span>
  
  /** the CapabilitiesHandler to get the Capabilities from */
<span class="fc" id="L219">  protected CapabilitiesHandler m_Handler = null;</span>

  /**
   * the default constructor
   */
  public TestInstances() {
<span class="fc" id="L225">    super();</span>
    
<span class="fc" id="L227">    setRelation(&quot;Testdata&quot;);</span>
<span class="fc" id="L228">    setSeed(1);</span>
<span class="fc" id="L229">    setNumInstances(20);</span>
<span class="fc" id="L230">    setClassType(Attribute.NOMINAL);</span>
<span class="fc" id="L231">    setNumClasses(2);</span>
<span class="fc" id="L232">    setClassIndex(CLASS_IS_LAST);</span>
<span class="fc" id="L233">    setNumNominal(1);</span>
<span class="fc" id="L234">    setNumNominalValues(2);</span>
<span class="fc" id="L235">    setNumNumeric(0);</span>
<span class="fc" id="L236">    setNumString(0);</span>
<span class="fc" id="L237">    setNumDate(0);</span>
<span class="fc" id="L238">    setNumRelational(0);</span>
<span class="fc" id="L239">    setNumRelationalNominal(1);</span>
<span class="fc" id="L240">    setNumRelationalNominalValues(2);</span>
<span class="fc" id="L241">    setNumRelationalNumeric(0);</span>
<span class="fc" id="L242">    setNumRelationalString(0);</span>
<span class="fc" id="L243">    setNumRelationalDate(0);</span>
<span class="fc" id="L244">    setNumInstancesRelational(10);</span>
<span class="fc" id="L245">    setMultiInstance(false);</span>
<span class="fc" id="L246">    setWords(arrayToList(DEFAULT_WORDS));</span>
<span class="fc" id="L247">    setWordSeparators(DEFAULT_SEPARATORS);</span>
<span class="fc" id="L248">  }</span>
  
  /**
   * creates a clone of the current object
   * 
   * @return		a clone of the current object
   */
  public Object clone() {
    TestInstances     result;
    
<span class="fc" id="L258">    result = new TestInstances();</span>
<span class="fc" id="L259">    result.assign(this);</span>
    
<span class="fc" id="L261">    return result;</span>
  }
  
  /**
   * updates itself with all the settings from the given TestInstances
   * object
   * 
   * @param t		the object to get the settings from
   */
  public void assign(TestInstances t) {
<span class="fc" id="L271">    setRelation(t.getRelation());</span>
<span class="fc" id="L272">    setSeed(t.getSeed());</span>
<span class="fc" id="L273">    setNumInstances(t.getNumInstances());</span>
<span class="fc" id="L274">    setClassType(t.getClassType());</span>
<span class="fc" id="L275">    setNumClasses(t.getNumClasses());</span>
<span class="fc" id="L276">    setClassIndex(t.getClassIndex());</span>
<span class="fc" id="L277">    setNumNominal(t.getNumNominal());</span>
<span class="fc" id="L278">    setNumNominalValues(t.getNumNominalValues());</span>
<span class="fc" id="L279">    setNumNumeric(t.getNumNumeric());</span>
<span class="fc" id="L280">    setNumString(t.getNumString());</span>
<span class="fc" id="L281">    setNumDate(t.getNumDate());</span>
<span class="fc" id="L282">    setNumRelational(t.getNumRelational());</span>
<span class="fc" id="L283">    setNumRelationalNominal(t.getNumRelationalNominal());</span>
<span class="fc" id="L284">    setNumRelationalNominalValues(t.getNumRelationalNominalValues());</span>
<span class="fc" id="L285">    setNumRelationalNumeric(t.getNumRelationalNumeric());</span>
<span class="fc" id="L286">    setNumRelationalString(t.getNumRelationalString());</span>
<span class="fc" id="L287">    setNumRelationalDate(t.getNumRelationalDate());</span>
<span class="fc" id="L288">    setMultiInstance(t.getMultiInstance());</span>
<span class="fc bfc" id="L289" title="All 2 branches covered.">    for (int i = 0; i &lt; t.getNumRelational(); i++)</span>
<span class="fc" id="L290">      setRelationalFormat(i, t.getRelationalFormat(i));</span>
<span class="fc" id="L291">    setRelationalClassFormat(t.getRelationalClassFormat());</span>
<span class="fc" id="L292">    setNumInstancesRelational(t.getNumInstancesRelational());</span>
<span class="fc" id="L293">    setWords(t.getWords());</span>
<span class="fc" id="L294">    setWordSeparators(t.getWordSeparators());</span>
<span class="fc" id="L295">  }</span>
  
  /**
   * Returns an enumeration describing the available options.
   *
   * @return an enumeration of all the available options.
   */
  public Enumeration listOptions() {
<span class="nc" id="L303">    Vector result = new Vector();</span>
    
<span class="nc" id="L305">    result.addElement(new Option(</span>
<span class="nc" id="L306">        &quot;\tThe name of the data set.&quot;,</span>
<span class="nc" id="L307">        &quot;relation&quot;, 1, &quot;-relation &lt;name&gt;&quot;));</span>
    
<span class="nc" id="L309">    result.addElement(new Option(</span>
<span class="nc" id="L310">        &quot;\tThe seed value.&quot;,</span>
<span class="nc" id="L311">        &quot;seed&quot;, 1, &quot;-seed &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L313">    result.addElement(new Option(</span>
<span class="nc" id="L314">        &quot;\tThe number of instances in the datasets (default 20).&quot;,</span>
<span class="nc" id="L315">        &quot;num-instances&quot;, 1, &quot;-num-instances &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L317">    result.addElement(new Option(</span>
<span class="nc" id="L318">        &quot;\tThe class type, see constants in weka.core.Attribute\n&quot;</span>
	+ &quot;\t(default 1=nominal).&quot;,
<span class="nc" id="L320">        &quot;class-type&quot;, 1, &quot;-class-type &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L322">    result.addElement(new Option(</span>
<span class="nc" id="L323">        &quot;\tThe number of classes to generate (for nominal classes only)\n&quot;</span>
	+ &quot;\t(default 2).&quot;,
<span class="nc" id="L325">        &quot;class-values&quot;, 1, &quot;-class-values &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L327">    result.addElement(new Option(</span>
<span class="nc" id="L328">        &quot;\tThe class index, with -1=last, (default -1).&quot;,</span>
<span class="nc" id="L329">        &quot;class-index&quot;, 1, &quot;-class-index &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L331">    result.addElement(new Option(</span>
<span class="nc" id="L332">        &quot;\tDoesn't include a class attribute in the output.&quot;,</span>
<span class="nc" id="L333">        &quot;no-class&quot;, 0, &quot;-no-class&quot;));</span>

<span class="nc" id="L335">    result.addElement(new Option(</span>
<span class="nc" id="L336">        &quot;\tThe number of nominal attributes (default 1).&quot;,</span>
<span class="nc" id="L337">        &quot;nominal&quot;, 1, &quot;-nominal &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L339">    result.addElement(new Option(</span>
<span class="nc" id="L340">        &quot;\tThe number of values for nominal attributes (default 2).&quot;,</span>
<span class="nc" id="L341">        &quot;nominal-values&quot;, 1, &quot;-nominal-values &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L343">    result.addElement(new Option(</span>
<span class="nc" id="L344">        &quot;\tThe number of numeric attributes (default 0).&quot;,</span>
<span class="nc" id="L345">        &quot;numeric&quot;, 1, &quot;-numeric &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L347">    result.addElement(new Option(</span>
<span class="nc" id="L348">        &quot;\tThe number of string attributes (default 0).&quot;,</span>
<span class="nc" id="L349">        &quot;string&quot;, 1, &quot;-string &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L351">    result.addElement(new Option(</span>
<span class="nc" id="L352">        &quot;\tThe words to use in string attributes.&quot;,</span>
<span class="nc" id="L353">        &quot;words&quot;, 1, &quot;-words &lt;comma-separated-list&gt;&quot;));</span>
    
<span class="nc" id="L355">    result.addElement(new Option(</span>
<span class="nc" id="L356">        &quot;\tThe word separators to use in string attributes.&quot;,</span>
<span class="nc" id="L357">        &quot;word-separators&quot;, 1, &quot;-word-separators &lt;chars&gt;&quot;));</span>
    
<span class="nc" id="L359">    result.addElement(new Option(</span>
<span class="nc" id="L360">        &quot;\tThe number of date attributes (default 0).&quot;,</span>
<span class="nc" id="L361">        &quot;date&quot;, 1, &quot;-date &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L363">    result.addElement(new Option(</span>
<span class="nc" id="L364">        &quot;\tThe number of relational attributes (default 0).&quot;,</span>
<span class="nc" id="L365">        &quot;relational&quot;, 1, &quot;-relational &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L367">    result.addElement(new Option(</span>
<span class="nc" id="L368">        &quot;\tThe number of nominal attributes in a rel. attribute (default 1).&quot;,</span>
<span class="nc" id="L369">        &quot;relational-nominal&quot;, 1, &quot;-relational-nominal &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L371">    result.addElement(new Option(</span>
<span class="nc" id="L372">        &quot;\tThe number of values for nominal attributes in a rel. attribute (default 2).&quot;,</span>
<span class="nc" id="L373">        &quot;relational-nominal-values&quot;, 1, &quot;-relational-nominal-values &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L375">    result.addElement(new Option(</span>
<span class="nc" id="L376">        &quot;\tThe number of numeric attributes in a rel. attribute (default 0).&quot;,</span>
<span class="nc" id="L377">        &quot;relational-numeric&quot;, 1, &quot;-relational-numeric &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L379">    result.addElement(new Option(</span>
<span class="nc" id="L380">        &quot;\tThe number of string attributes in a rel. attribute (default 0).&quot;,</span>
<span class="nc" id="L381">        &quot;relational-string&quot;, 1, &quot;-relational-string &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L383">    result.addElement(new Option(</span>
<span class="nc" id="L384">        &quot;\tThe number of date attributes in a rel. attribute (default 0).&quot;,</span>
<span class="nc" id="L385">        &quot;relational-date&quot;, 1, &quot;-relational-date &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L387">    result.addElement(new Option(</span>
<span class="nc" id="L388">        &quot;\tThe number of instances in relational/bag attributes (default 10).&quot;,</span>
<span class="nc" id="L389">        &quot;num-instances-relational&quot;, 1, &quot;-num-instances-relational &lt;num&gt;&quot;));</span>
    
<span class="nc" id="L391">    result.addElement(new Option(</span>
<span class="nc" id="L392">        &quot;\tGenerates multi-instance data.&quot;,</span>
<span class="nc" id="L393">        &quot;multi-instance&quot;, 0, &quot;-multi-instance&quot;));</span>

<span class="nc" id="L395">    result.addElement(new Option(</span>
<span class="nc" id="L396">        &quot;\tThe Capabilities handler to base the dataset on.\n&quot;</span>
	+ &quot;\tThe other parameters can be used to override the ones\n&quot;
	+ &quot;\tdetermined from the handler. Additional parameters for\n&quot;
	+ &quot;\thandler can be passed on after the '--'.&quot;,
<span class="nc" id="L400">        &quot;W&quot;, 1, &quot;-W &lt;classname&gt;&quot;));</span>
    
<span class="nc" id="L402">    return result.elements();</span>
  }
  
  /**
   * Parses a given list of options. &lt;p/&gt;
   *
   &lt;!-- options-start --&gt;
   * Valid options are: &lt;p/&gt;
   * 
   * &lt;pre&gt; -relation &amp;lt;name&amp;gt;
   *  The name of the data set.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -seed &amp;lt;num&amp;gt;
   *  The seed value.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -num-instances &amp;lt;num&amp;gt;
   *  The number of instances in the datasets (default 20).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -class-type &amp;lt;num&amp;gt;
   *  The class type, see constants in weka.core.Attribute
   *  (default 1=nominal).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -class-values &amp;lt;num&amp;gt;
   *  The number of classes to generate (for nominal classes only)
   *  (default 2).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -class-index &amp;lt;num&amp;gt;
   *  The class index, with -1=last, (default -1).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -no-class
   *  Doesn't include a class attribute in the output.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -nominal &amp;lt;num&amp;gt;
   *  The number of nominal attributes (default 1).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -nominal-values &amp;lt;num&amp;gt;
   *  The number of values for nominal attributes (default 2).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -numeric &amp;lt;num&amp;gt;
   *  The number of numeric attributes (default 0).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -string &amp;lt;num&amp;gt;
   *  The number of string attributes (default 0).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -words &amp;lt;comma-separated-list&amp;gt;
   *  The words to use in string attributes.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -word-separators &amp;lt;chars&amp;gt;
   *  The word separators to use in string attributes.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -date &amp;lt;num&amp;gt;
   *  The number of date attributes (default 0).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -relational &amp;lt;num&amp;gt;
   *  The number of relational attributes (default 0).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -relational-nominal &amp;lt;num&amp;gt;
   *  The number of nominal attributes in a rel. attribute (default 1).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -relational-nominal-values &amp;lt;num&amp;gt;
   *  The number of values for nominal attributes in a rel. attribute (default 2).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -relational-numeric &amp;lt;num&amp;gt;
   *  The number of numeric attributes in a rel. attribute (default 0).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -relational-string &amp;lt;num&amp;gt;
   *  The number of string attributes in a rel. attribute (default 0).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -relational-date &amp;lt;num&amp;gt;
   *  The number of date attributes in a rel. attribute (default 0).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -num-instances-relational &amp;lt;num&amp;gt;
   *  The number of instances in relational/bag attributes (default 10).&lt;/pre&gt;
   * 
   * &lt;pre&gt; -multi-instance
   *  Generates multi-instance data.&lt;/pre&gt;
   * 
   * &lt;pre&gt; -W &amp;lt;classname&amp;gt;
   *  The Capabilities handler to base the dataset on.
   *  The other parameters can be used to override the ones
   *  determined from the handler. Additional parameters for
   *  handler can be passed on after the '--'.&lt;/pre&gt;
   * 
   &lt;!-- options-end --&gt;
   *
   * @param options the list of options as an array of strings
   * @throws Exception if an option is not supported
   */
  public void setOptions(String[] options) throws Exception {
    String      		tmpStr;
    Class			cls;
    CapabilitiesHandler		handler;
    boolean			initialized;
    
<span class="nc" id="L496">    initialized = false;</span>

<span class="nc" id="L498">    tmpStr = Utils.getOption('W', options);</span>
<span class="nc bnc" id="L499" title="All 2 branches missed.">    if (tmpStr.length() &gt; 0) {</span>
<span class="nc" id="L500">      cls = Class.forName(tmpStr);</span>
<span class="nc bnc" id="L501" title="All 2 branches missed.">      if (ClassDiscovery.hasInterface(CapabilitiesHandler.class, cls)) {</span>
<span class="nc" id="L502">	initialized = true;</span>
<span class="nc" id="L503">	handler = (CapabilitiesHandler) cls.newInstance();</span>
<span class="nc bnc" id="L504" title="All 2 branches missed.">	if (handler instanceof OptionHandler)</span>
<span class="nc" id="L505">	  ((OptionHandler) handler).setOptions(Utils.partitionOptions(options));</span>
<span class="nc" id="L506">	setHandler(handler);</span>
	// initialize
<span class="nc" id="L508">	this.assign(forCapabilities(handler.getCapabilities()));</span>
      }
      else {
<span class="nc" id="L511">	throw new IllegalArgumentException(&quot;Class '&quot; + tmpStr + &quot;' is not a CapabilitiesHandler!&quot;);</span>
      }
    }

<span class="nc" id="L515">    tmpStr = Utils.getOption(&quot;relation&quot;, options);</span>
<span class="nc bnc" id="L516" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L517">      setRelation(tmpStr);</span>
<span class="nc bnc" id="L518" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L519">      setRelation(&quot;Testdata&quot;);</span>
    
<span class="nc" id="L521">    tmpStr = Utils.getOption(&quot;seed&quot;, options);</span>
<span class="nc bnc" id="L522" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L523">      setSeed(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L524" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L525">      setSeed(1);</span>
    
<span class="nc" id="L527">    tmpStr = Utils.getOption(&quot;num-instances&quot;, options);</span>
<span class="nc bnc" id="L528" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L529">      setNumInstances(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L530" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L531">      setNumInstances(20);</span>
    
<span class="nc" id="L533">    setNoClass(Utils.getFlag(&quot;no-class&quot;, options));</span>
    
<span class="nc bnc" id="L535" title="All 2 branches missed.">    if (!getNoClass()) {</span>
<span class="nc" id="L536">      tmpStr = Utils.getOption(&quot;class-type&quot;, options);</span>
<span class="nc bnc" id="L537" title="All 2 branches missed.">      if (tmpStr.length() != 0)</span>
<span class="nc" id="L538">        setClassType(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L539" title="All 2 branches missed.">      else if (!initialized)</span>
<span class="nc" id="L540">        setClassType(Attribute.NOMINAL);</span>

<span class="nc" id="L542">      tmpStr = Utils.getOption(&quot;class-values&quot;, options);</span>
<span class="nc bnc" id="L543" title="All 2 branches missed.">      if (tmpStr.length() != 0)</span>
<span class="nc" id="L544">        setNumClasses(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L545" title="All 2 branches missed.">      else if (!initialized)</span>
<span class="nc" id="L546">        setNumClasses(2);</span>

<span class="nc" id="L548">      tmpStr = Utils.getOption(&quot;class-index&quot;, options);</span>
<span class="nc bnc" id="L549" title="All 2 branches missed.">      if (tmpStr.length() != 0)</span>
<span class="nc" id="L550">        setClassIndex(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L551" title="All 2 branches missed.">      else if (!initialized)</span>
<span class="nc" id="L552">        setClassIndex(-1);</span>
    }
    
<span class="nc" id="L555">    tmpStr = Utils.getOption(&quot;nominal&quot;, options);</span>
<span class="nc bnc" id="L556" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L557">      setNumNominal(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L558" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L559">      setNumNominal(1);</span>
    
<span class="nc" id="L561">    tmpStr = Utils.getOption(&quot;nominal-values&quot;, options);</span>
<span class="nc bnc" id="L562" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L563">      setNumNominalValues(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L564" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L565">      setNumNominalValues(2);</span>
    
<span class="nc" id="L567">    tmpStr = Utils.getOption(&quot;numeric&quot;, options);</span>
<span class="nc bnc" id="L568" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L569">      setNumNumeric(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L570" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L571">      setNumNumeric(0);</span>
    
<span class="nc" id="L573">    tmpStr = Utils.getOption(&quot;string&quot;, options);</span>
<span class="nc bnc" id="L574" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L575">      setNumString(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L576" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L577">      setNumString(0);</span>
    
<span class="nc" id="L579">    tmpStr = Utils.getOption(&quot;words&quot;, options);</span>
<span class="nc bnc" id="L580" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L581">      setWords(tmpStr);</span>
<span class="nc bnc" id="L582" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L583">      setWords(arrayToList(DEFAULT_WORDS));</span>
    
<span class="nc bnc" id="L585" title="All 2 branches missed.">    if (Utils.getOptionPos(&quot;word-separators&quot;, options) &gt; -1) {</span>
<span class="nc" id="L586">      tmpStr = Utils.getOption(&quot;word-separators&quot;, options);</span>
<span class="nc" id="L587">      setWordSeparators(tmpStr);</span>
    }
<span class="nc bnc" id="L589" title="All 2 branches missed.">    else if (!initialized) {</span>
<span class="nc" id="L590">      setWordSeparators(DEFAULT_SEPARATORS);</span>
    }
    
<span class="nc" id="L593">    tmpStr = Utils.getOption(&quot;date&quot;, options);</span>
<span class="nc bnc" id="L594" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L595">      setNumDate(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L596" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L597">      setNumDate(0);</span>
    
<span class="nc" id="L599">    tmpStr = Utils.getOption(&quot;relational&quot;, options);</span>
<span class="nc bnc" id="L600" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L601">      setNumRelational(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L602" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L603">      setNumRelational(0);</span>
    
<span class="nc" id="L605">    tmpStr = Utils.getOption(&quot;relational-nominal&quot;, options);</span>
<span class="nc bnc" id="L606" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L607">      setNumRelationalNominal(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L608" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L609">      setNumRelationalNominal(1);</span>
    
<span class="nc" id="L611">    tmpStr = Utils.getOption(&quot;relational-nominal-values&quot;, options);</span>
<span class="nc bnc" id="L612" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L613">      setNumRelationalNominalValues(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L614" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L615">      setNumRelationalNominalValues(2);</span>
    
<span class="nc" id="L617">    tmpStr = Utils.getOption(&quot;relational-numeric&quot;, options);</span>
<span class="nc bnc" id="L618" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L619">      setNumRelationalNumeric(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L620" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L621">      setNumRelationalNumeric(0);</span>
    
<span class="nc" id="L623">    tmpStr = Utils.getOption(&quot;relational-string&quot;, options);</span>
<span class="nc bnc" id="L624" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L625">      setNumRelationalString(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L626" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L627">      setNumRelationalString(0);</span>
    
<span class="nc" id="L629">    tmpStr = Utils.getOption(&quot;num-instances-relational&quot;, options);</span>
<span class="nc bnc" id="L630" title="All 2 branches missed.">    if (tmpStr.length() != 0)</span>
<span class="nc" id="L631">      setNumInstancesRelational(Integer.parseInt(tmpStr));</span>
<span class="nc bnc" id="L632" title="All 2 branches missed.">    else if (!initialized)</span>
<span class="nc" id="L633">      setNumInstancesRelational(10);</span>
    
<span class="nc bnc" id="L635" title="All 2 branches missed.">    if (!initialized)</span>
<span class="nc" id="L636">      setMultiInstance(Utils.getFlag(&quot;multi-instance&quot;, options));</span>
<span class="nc" id="L637">  }</span>
  
  /**
   * Gets the current settings of this object.
   *
   * @return an array of strings suitable for passing to setOptions
   */
  public String[] getOptions() {
    Vector 	result;
    String[]	options;
    int		i;

<span class="nc" id="L649">    result = new Vector();</span>
    
<span class="nc" id="L651">    result.add(&quot;-relation&quot;);</span>
<span class="nc" id="L652">    result.add(getRelation());</span>
    
<span class="nc" id="L654">    result.add(&quot;-seed&quot;);</span>
<span class="nc" id="L655">    result.add(&quot;&quot; + getSeed());</span>
    
<span class="nc" id="L657">    result.add(&quot;-num-instances&quot;);</span>
<span class="nc" id="L658">    result.add(&quot;&quot; + getNumInstances());</span>
    
<span class="nc bnc" id="L660" title="All 2 branches missed.">    if (getNoClass()) {</span>
<span class="nc" id="L661">      result.add(&quot;-no-class&quot;);</span>
    }
    else {
<span class="nc" id="L664">      result.add(&quot;-class-type&quot;);</span>
<span class="nc" id="L665">      result.add(&quot;&quot; + getClassType());</span>
      
<span class="nc" id="L667">      result.add(&quot;-class-values&quot;);</span>
<span class="nc" id="L668">      result.add(&quot;&quot; + getNumClasses());</span>
      
<span class="nc" id="L670">      result.add(&quot;-class-index&quot;);</span>
<span class="nc" id="L671">      result.add(&quot;&quot; + getClassIndex());</span>
    }
    
<span class="nc" id="L674">    result.add(&quot;-nominal&quot;);</span>
<span class="nc" id="L675">    result.add(&quot;&quot; + getNumNominal());</span>
    
<span class="nc" id="L677">    result.add(&quot;-nominal-values&quot;);</span>
<span class="nc" id="L678">    result.add(&quot;&quot; + getNumNominalValues());</span>
    
<span class="nc" id="L680">    result.add(&quot;-numeric&quot;);</span>
<span class="nc" id="L681">    result.add(&quot;&quot; + getNumNumeric());</span>
    
<span class="nc" id="L683">    result.add(&quot;-string&quot;);</span>
<span class="nc" id="L684">    result.add(&quot;&quot; + getNumString());</span>
    
<span class="nc" id="L686">    result.add(&quot;-words&quot;);</span>
<span class="nc" id="L687">    result.add(&quot;&quot; + getWords());</span>
    
<span class="nc" id="L689">    result.add(&quot;-word-separators&quot;);</span>
<span class="nc" id="L690">    result.add(&quot;&quot; + getWordSeparators());</span>
    
<span class="nc" id="L692">    result.add(&quot;-date&quot;);</span>
<span class="nc" id="L693">    result.add(&quot;&quot; + getNumDate());</span>
    
<span class="nc" id="L695">    result.add(&quot;-relational&quot;);</span>
<span class="nc" id="L696">    result.add(&quot;&quot; + getNumRelational());</span>
    
<span class="nc" id="L698">    result.add(&quot;-relational-nominal&quot;);</span>
<span class="nc" id="L699">    result.add(&quot;&quot; + getNumRelationalNominal());</span>
    
<span class="nc" id="L701">    result.add(&quot;-relational-nominal-values&quot;);</span>
<span class="nc" id="L702">    result.add(&quot;&quot; + getNumRelationalNominalValues());</span>
    
<span class="nc" id="L704">    result.add(&quot;-relational-numeric&quot;);</span>
<span class="nc" id="L705">    result.add(&quot;&quot; + getNumRelationalNumeric());</span>
    
<span class="nc" id="L707">    result.add(&quot;-relational-string&quot;);</span>
<span class="nc" id="L708">    result.add(&quot;&quot; + getNumRelationalString());</span>
    
<span class="nc" id="L710">    result.add(&quot;-relational-date&quot;);</span>
<span class="nc" id="L711">    result.add(&quot;&quot; + getNumRelationalDate());</span>
    
<span class="nc" id="L713">    result.add(&quot;-num-instances-relational&quot;);</span>
<span class="nc" id="L714">    result.add(&quot;&quot; + getNumInstancesRelational());</span>

<span class="nc bnc" id="L716" title="All 2 branches missed.">    if (getMultiInstance())</span>
<span class="nc" id="L717">      result.add(&quot;-multi-instance&quot;);</span>

<span class="nc bnc" id="L719" title="All 2 branches missed.">    if (getHandler() != null) {</span>
<span class="nc" id="L720">      result.add(&quot;-W&quot;);</span>
<span class="nc" id="L721">      result.add(getHandler().getClass().getName());</span>
<span class="nc bnc" id="L722" title="All 2 branches missed.">      if (getHandler() instanceof OptionHandler) {</span>
<span class="nc" id="L723">	result.add(&quot;--&quot;);</span>
<span class="nc" id="L724">	options = ((OptionHandler) getHandler()).getOptions();</span>
<span class="nc bnc" id="L725" title="All 2 branches missed.">	for (i = 0; i &lt; options.length; i++)</span>
<span class="nc" id="L726">	  result.add(options[i]);</span>
      }
    }
    
<span class="nc" id="L730">    return (String[]) result.toArray(new String[result.size()]);</span>
  }
  
  /**
   * sets the name of the relation
   * 
   * @param value 	the name of the relation
   */
  public void setRelation(String value) {
<span class="fc" id="L739">    m_Relation = value;</span>
<span class="fc" id="L740">  }</span>
  
  /**
   * returns the current name of the relation
   * 
   * @return 		the name of the relation
   */
  public String getRelation() {
<span class="fc" id="L748">    return m_Relation;</span>
  }
  
  /**
   * sets the seed value for the random number generator
   * 
   * @param value	the seed
   */
  public void setSeed(int value) {
<span class="fc" id="L757">    m_Seed   = value;</span>
<span class="fc" id="L758">    m_Random = new Random(m_Seed);</span>
<span class="fc" id="L759">  }</span>
  
  /**
   * returns the current seed value
   * 
   * @return 		the seed value
   */
  public int getSeed() {
<span class="fc" id="L767">    return m_Seed;</span>
  }
  
  /**
   * sets the number of instances to produce
   * 
   * @param value	the number of instances
   */
  public void setNumInstances(int value) {
<span class="fc" id="L776">    m_NumInstances = value;</span>
<span class="fc" id="L777">  }</span>
  
  /**
   * returns the current number of instances to produce
   * 
   * @return the number of instances
   */
  public int getNumInstances() {
<span class="fc" id="L785">    return m_NumInstances;</span>
  }
  
  /**
   * sets the class attribute type
   * 
   * @param value	the class attribute type
   */
  public void setClassType(int value) {
<span class="fc" id="L794">    m_ClassType = value;</span>
<span class="fc" id="L795">    m_RelationalClassFormat = null;</span>
<span class="fc" id="L796">  }</span>
  
  /**
   * returns the current class type
   * 
   * @return the class attribute type
   */
  public int getClassType() {
<span class="fc" id="L804">    return m_ClassType;</span>
  }
  
  /**
   * sets the number of classes
   * 
   * @param value	the number of classes
   */
  public void setNumClasses(int value) {
<span class="fc" id="L813">    m_NumClasses = value;</span>
<span class="fc" id="L814">  }</span>
  
  /**
   * returns the current number of classes
   * 
   * @return the number of classes
   */
  public int getNumClasses() {
<span class="fc" id="L822">    return m_NumClasses;</span>
  }
  
  /**
   * sets the class index (0-based)
   * 
   * @param value	the class index 
   * @see #CLASS_IS_LAST
   * @see #NO_CLASS
   */
  public void setClassIndex(int value) {
<span class="fc" id="L833">    m_ClassIndex = value;</span>
<span class="fc" id="L834">  }</span>
  
  /**
   * returns the current class index (0-based), -1 is last attribute
   * 
   * @return 		the class index
   * @see #CLASS_IS_LAST
   * @see #NO_CLASS
   */
  public int getClassIndex() {
<span class="fc" id="L844">    return m_ClassIndex;</span>
  }
  
  /**
   * whether to have no class, e.g., for clusterers; otherwise the class
   * attribute index is set to last
   * 
   * @param value whether to have no class
   * @see #CLASS_IS_LAST
   * @see #NO_CLASS
   */
  public void setNoClass(boolean value) {
<span class="nc bnc" id="L856" title="All 2 branches missed.">    if (value)</span>
<span class="nc" id="L857">      setClassIndex(NO_CLASS);</span>
    else
<span class="nc" id="L859">      setClassIndex(CLASS_IS_LAST);</span>
<span class="nc" id="L860">  }</span>
  
  /**
   * whether no class attribute is generated
   * 
   * @return 		true if no class attribute is generated
   */
  public boolean getNoClass() {
<span class="pc bpc" id="L868" title="1 of 2 branches missed.">    return (getClassIndex() == NO_CLASS);</span>
  }
  
  /**
   * sets the number of nominal attributes
   * 
   * @param value	the number of nominal attributes
   */
  public void setNumNominal(int value) {
<span class="fc" id="L877">    m_NumNominal = value;</span>
<span class="fc" id="L878">  }</span>
  
  /**
   * returns the current number of nominal attributes
   * 
   * @return 		the number of nominal attributes
   */
  public int getNumNominal() {
<span class="fc" id="L886">    return m_NumNominal;</span>
  }
  
  /**
   * sets the number of values for nominal attributes
   * 
   * @param value	the number of values
   */
  public void setNumNominalValues(int value) {
<span class="fc" id="L895">    m_NumNominalValues = value;</span>
<span class="fc" id="L896">  }</span>
  
  /**
   * returns the current number of values for nominal attributes
   * 
   * @return 		the number of values
   */
  public int getNumNominalValues() {
<span class="fc" id="L904">    return m_NumNominalValues;</span>
  }
  
  /**
   * sets the number of numeric attributes
   * 
   * @param value 	the number of numeric attributes
   */
  public void setNumNumeric(int value) {
<span class="fc" id="L913">    m_NumNumeric = value;</span>
<span class="fc" id="L914">  }</span>
  
  /**
   * returns the current number of numeric attributes
   * 
   * @return 		the number of numeric attributes
   */
  public int getNumNumeric() {
<span class="fc" id="L922">    return m_NumNumeric;</span>
  }
  
  /**
   * sets the number of string attributes
   * 
   * @param value 	the number of string attributes
   */
  public void setNumString(int value) {
<span class="fc" id="L931">    m_NumString = value;</span>
<span class="fc" id="L932">  }</span>
  
  /**
   * returns the current number of string attributes
   * 
   * @return 		the number of string attributes
   */
  public int getNumString() {
<span class="fc" id="L940">    return m_NumString;</span>
  }

  /**
   * turns the comma-separated list into an array
   * 
   * @param value	the list to process
   * @return		the list as array
   */
  protected static String[] listToArray(String value) {
    StringTokenizer	tok;
    Vector		list;
    
<span class="fc" id="L953">    list = new Vector();</span>
<span class="fc" id="L954">    tok = new StringTokenizer(value, &quot;,&quot;);</span>
<span class="fc bfc" id="L955" title="All 2 branches covered.">    while (tok.hasMoreTokens())</span>
<span class="fc" id="L956">      list.add(tok.nextToken());</span>
    
<span class="fc" id="L958">    return (String[]) list.toArray(new String[list.size()]);</span>
  }
  
  /**
   * turns the array into a comma-separated list
   * 
   * @param value	the array to process
   * @return		the array as list
   */
  protected static String arrayToList(String[] value) {
    String	result;
    int		i;
    
<span class="fc" id="L971">    result = &quot;&quot;;</span>
    
<span class="fc bfc" id="L973" title="All 2 branches covered.">    for (i = 0; i &lt; value.length; i++) {</span>
<span class="fc bfc" id="L974" title="All 2 branches covered.">      if (i &gt; 0)</span>
<span class="fc" id="L975">	result += &quot;,&quot;;</span>
<span class="fc" id="L976">      result += value[i];</span>
    }
    
<span class="fc" id="L979">    return result;</span>
  }
  
  /**
   * Sets the comma-separated list of words to use for generating strings. The
   * list must contain at least 2 words, otherwise an exception will be thrown.
   * 
   * @param value			the list of words
   * @throws IllegalArgumentException	if not at least 2 words are provided
   */
  public void setWords(String value) {
<span class="pc bpc" id="L990" title="1 of 2 branches missed.">    if (listToArray(value).length &lt; 2)</span>
<span class="nc" id="L991">      throw new IllegalArgumentException(&quot;At least 2 words must be provided!&quot;);</span>
    
<span class="fc" id="L993">    m_Words = listToArray(value);</span>
<span class="fc" id="L994">  }</span>
  
  /**
   * returns the words used for assembling strings in a comma-separated list.
   * 
   * @return		the words as comma-separated list
   */
  public String getWords() {
<span class="fc" id="L1002">    return arrayToList(m_Words);</span>
  }

  /**
   * sets the word separators (chars) to use for assembling strings.
   * 
   * @param value	the characters to use as separators
   */
  public void setWordSeparators(String value) {
<span class="fc" id="L1011">    m_WordSeparators = value;</span>
<span class="fc" id="L1012">  }</span>
  
  /**
   * returns the word separators (chars) to use for assembling strings.
   * 
   * @return		the current separators
   */
  public String getWordSeparators() {
<span class="fc" id="L1020">    return m_WordSeparators;</span>
  }
  
  /**
   * sets the number of date attributes
   * 
   * @param value	the number of date attributes
   */
  public void setNumDate(int value) {
<span class="fc" id="L1029">    m_NumDate = value;</span>
<span class="fc" id="L1030">  }</span>
  
  /**
   * returns the current number of date attributes
   * 
   * @return		the number of date attributes
   */
  public int getNumDate() {
<span class="fc" id="L1038">    return m_NumDate;</span>
  }
  
  /**
   * sets the number of relational attributes
   * 
   * @param value	the number of relational attributes
   */
  public void setNumRelational(int value) {
<span class="fc" id="L1047">    m_NumRelational = value;</span>
<span class="fc" id="L1048">    m_RelationalFormat = new Instances[value];</span>
<span class="fc" id="L1049">  }</span>
  
  /**
   * returns the current number of relational attributes
   * 
   * @return		the number of relational attributes
   */
  public int getNumRelational() {
<span class="fc" id="L1057">    return m_NumRelational;</span>
  }
  
  /**
   * sets the number of nominal attributes in a relational attribute
   * 
   * @param value	the number of nominal attributes
   */
  public void setNumRelationalNominal(int value) {
<span class="fc" id="L1066">    m_NumRelationalNominal = value;</span>
<span class="fc" id="L1067">  }</span>
  
  /**
   * returns the current number of nominal attributes in a relational attribute
   * 
   * @return 		the number of nominal attributes
   */
  public int getNumRelationalNominal() {
<span class="fc" id="L1075">    return m_NumRelationalNominal;</span>
  }
  
  /**
   * sets the number of values for nominal attributes in a relational attribute
   * 
   * @param value	the number of values
   */
  public void setNumRelationalNominalValues(int value) {
<span class="fc" id="L1084">    m_NumRelationalNominalValues = value;</span>
<span class="fc" id="L1085">  }</span>
  
  /**
   * returns the current number of values for nominal attributes in a relational attribute
   * 
   * @return 		the number of values
   */
  public int getNumRelationalNominalValues() {
<span class="fc" id="L1093">    return m_NumRelationalNominalValues;</span>
  }
  
  /**
   * sets the number of numeric attributes in a relational attribute
   * 
   * @param value 	the number of numeric attributes
   */
  public void setNumRelationalNumeric(int value) {
<span class="fc" id="L1102">    m_NumRelationalNumeric = value;</span>
<span class="fc" id="L1103">  }</span>
  
  /**
   * returns the current number of numeric attributes in a relational attribute
   * 
   * @return 		the number of numeric attributes
   */
  public int getNumRelationalNumeric() {
<span class="fc" id="L1111">    return m_NumRelationalNumeric;</span>
  }
  
  /**
   * sets the number of string attributes in a relational attribute
   * 
   * @param value 	the number of string attributes
   */
  public void setNumRelationalString(int value) {
<span class="fc" id="L1120">    m_NumRelationalString = value;</span>
<span class="fc" id="L1121">  }</span>
  
  /**
   * returns the current number of string attributes in a relational attribute
   * 
   * @return 		the number of string attributes
   */
  public int getNumRelationalString() {
<span class="fc" id="L1129">    return m_NumRelationalString;</span>
  }
  
  /**
   * sets the number of date attributes in a relational attribute
   * 
   * @param value	the number of date attributes
   */
  public void setNumRelationalDate(int value) {
<span class="fc" id="L1138">    m_NumRelationalDate = value;</span>
<span class="fc" id="L1139">  }</span>
  
  /**
   * returns the current number of date attributes in a relational attribute
   * 
   * @return		the number of date attributes
   */
  public int getNumRelationalDate() {
<span class="fc" id="L1147">    return m_NumRelationalDate;</span>
  }
  
  /**
   * sets the number of instances in relational/bag attributes to produce
   * 
   * @param value	the number of instances
   */
  public void setNumInstancesRelational(int value) {
<span class="fc" id="L1156">    m_NumInstancesRelational = value;</span>
<span class="fc" id="L1157">  }</span>
  
  /**
   * returns the current number of instances in relational/bag attributes to produce
   * 
   * @return		the number of instances
   */
  public int getNumInstancesRelational() {
<span class="fc" id="L1165">    return m_NumInstancesRelational;</span>
  }

  /**
   * sets whether multi-instance data should be generated (with a fixed
   * data structure)
   * 
   * @param value	whether multi-instance data is generated
   */
  public void setMultiInstance(boolean value) {
<span class="fc" id="L1175">    m_MultiInstance = value;</span>
<span class="fc" id="L1176">  }</span>
  
  /**
   * Gets whether multi-instance data (with a fixed structure) is generated
   * 
   * @return		true if multi-instance data is generated
   */
  public boolean getMultiInstance() {
<span class="fc" id="L1184">    return m_MultiInstance;</span>
  }
  
  /**
   * sets the structure for the bags for the relational attribute
   * 
   * @param index       the index of the relational attribute
   * @param value       the new structure
   */
  public void setRelationalFormat(int index, Instances value) {
<span class="fc bfc" id="L1194" title="All 2 branches covered.">    if (value != null)</span>
<span class="fc" id="L1195">      m_RelationalFormat[index] = new Instances(value, 0);</span>
    else
<span class="fc" id="L1197">      m_RelationalFormat[index] = null;</span>
<span class="fc" id="L1198">  }</span>
  
  /**
   * returns the format for the specified relational attribute, can be null
   * 
   * @param index       the index of the relational attribute
   * @return            the current structure
   */
  public Instances getRelationalFormat(int index) {
<span class="fc" id="L1207">    return m_RelationalFormat[index];</span>
  }

  /**
   * sets the structure for the relational class attribute
   * 
   * @param value	the structure for the relational attribute
   */
  public void setRelationalClassFormat(Instances value) {
<span class="pc bpc" id="L1216" title="1 of 2 branches missed.">    if (value != null)</span>
<span class="nc" id="L1217">      m_RelationalClassFormat = new Instances(value, 0);</span>
    else
<span class="fc" id="L1219">      m_RelationalClassFormat = null;</span>
<span class="fc" id="L1220">  }</span>
  
  /**
   * returns the current strcuture of the relational class attribute, can
   * be null
   * 
   * @return 		the relational structure of the class attribute
   */
  public Instances getRelationalClassFormat() {
<span class="fc" id="L1229">    return m_RelationalClassFormat;</span>
  }
  
  /**
   * returns the overall number of attributes (incl. class, if that is also
   * generated)
   * 
   * @return 		the overall number of attributes
   */
  public int getNumAttributes() {
    int		result;
    
<span class="fc" id="L1241">    result = m_NumNominal + m_NumNumeric + m_NumString + m_NumDate + m_NumRelational;</span>
    
<span class="pc bpc" id="L1243" title="1 of 2 branches missed.">    if (!getNoClass())</span>
<span class="fc" id="L1244">      result++;</span>
      
<span class="fc" id="L1246">    return result;</span>
  }
  
  /**
   * returns the current dataset, can be null
   * 
   * @return		the current dataset
   */
  public Instances getData() {
<span class="fc" id="L1255">    return m_Data;</span>
  }
  
  /**
   * sets the Capabilities handler to generate the data for
   * 
   * @param value	the handler to generate the data for
   */
  public void setHandler(CapabilitiesHandler value) {
<span class="nc" id="L1264">    m_Handler = value;</span>
<span class="nc" id="L1265">  }</span>
  
  /**
   * returns the current set CapabilitiesHandler to generate the dataset
   * for, can be null
   * 
   * @return		the handler to generate the data for
   */
  public CapabilitiesHandler getHandler() {
<span class="nc" id="L1274">    return m_Handler;</span>
  }
  
  /**
   * creates a new Attribute of the given type
   * 
   * @param index the index of the current attribute (0-based)
   * @param attType the attribute type (NUMERIC, NOMINAL, etc.)
   * @return the configured attribute
   * @throws Exception if something goes wrong, e.g., an unknown attribute type
   * 
   * @see Attribute#type()
   * @see #CLASS_IS_LAST
   * @see #NO_CLASS
   */
  protected Attribute generateAttribute(int index, int attType,
      String namePrefix) throws Exception {
    Attribute     result;
    String        name;
    int           valIndex;
    int           nomCount;
    String        prefix;
    
<span class="fc" id="L1297">    result = null;</span>

    // determine name and start-index
<span class="fc bfc" id="L1300" title="All 2 branches covered.">    if (index == CLASS_IS_LAST) {</span>
<span class="fc" id="L1301">      valIndex = 0;</span>
<span class="fc" id="L1302">      name     = &quot;Class&quot;;</span>
<span class="fc" id="L1303">      prefix   = &quot;class&quot;;</span>
<span class="fc" id="L1304">      nomCount = getNumClasses();</span>
    }
    else {
<span class="fc" id="L1307">      valIndex = index;</span>
<span class="fc" id="L1308">      nomCount = getNumNominalValues();</span>
<span class="fc" id="L1309">      prefix   = &quot;att&quot; + (valIndex + 1) + &quot;val&quot;;</span>
      
<span class="pc bpc" id="L1311" title="1 of 6 branches missed.">      switch (attType) {</span>
        case Attribute.NOMINAL:
<span class="fc" id="L1313">          name = &quot;Nominal&quot; + (valIndex + 1);</span>
<span class="fc" id="L1314">          break;</span>
          
        case Attribute.NUMERIC:
<span class="fc" id="L1317">          name = &quot;Numeric&quot; + (valIndex + 1);</span>
<span class="fc" id="L1318">          break;</span>
          
        case Attribute.STRING:
<span class="fc" id="L1321">          name = &quot;String&quot; + (valIndex + 1);</span>
<span class="fc" id="L1322">          break;</span>
          
        case Attribute.DATE:
<span class="fc" id="L1325">          name = &quot;Date&quot; + (valIndex + 1);</span>
<span class="fc" id="L1326">          break;</span>
          
        case Attribute.RELATIONAL:
<span class="fc" id="L1329">          name = &quot;Relational&quot; + (valIndex + 1);</span>
<span class="fc" id="L1330">          break;</span>
          
        default:
<span class="nc" id="L1333">          throw new IllegalArgumentException(&quot;Attribute type '&quot; + attType + &quot;' unknown!&quot;);</span>
      }
    }
    
<span class="pc bpc" id="L1337" title="1 of 6 branches missed.">    switch (attType) {</span>
      case Attribute.NOMINAL:
<span class="fc" id="L1339">        FastVector nomStrings = new FastVector(valIndex + 1);</span>
<span class="fc bfc" id="L1340" title="All 2 branches covered.">        for (int j = 0; j &lt; nomCount; j++)</span>
<span class="fc" id="L1341">          nomStrings.addElement(prefix + (j + 1));</span>
<span class="fc" id="L1342">        result = new Attribute(namePrefix + name, nomStrings);</span>
<span class="fc" id="L1343">        break;</span>
        
      case Attribute.NUMERIC:
<span class="fc" id="L1346">        result = new Attribute(namePrefix + name);</span>
<span class="fc" id="L1347">        break;</span>
        
      case Attribute.STRING:
<span class="fc" id="L1350">        result = new Attribute(namePrefix + name, (FastVector) null);</span>
<span class="fc" id="L1351">        break;</span>
        
      case Attribute.DATE:
<span class="fc" id="L1354">        result = new Attribute(namePrefix + name, &quot;yyyy-mm-dd&quot;);</span>
<span class="fc" id="L1355">        break;</span>
        
      case Attribute.RELATIONAL:
        Instances rel;
<span class="fc bfc" id="L1359" title="All 2 branches covered.">        if (index == CLASS_IS_LAST)</span>
<span class="fc" id="L1360">          rel = getRelationalClassFormat();</span>
        else
<span class="fc" id="L1362">          rel = getRelationalFormat(index);</span>
        
<span class="fc bfc" id="L1364" title="All 2 branches covered.">        if (rel == null) {</span>
<span class="fc" id="L1365">          TestInstances dataset = new TestInstances();</span>
<span class="fc" id="L1366">          dataset.setNumNominal(getNumRelationalNominal());</span>
<span class="fc" id="L1367">          dataset.setNumNominalValues(getNumRelationalNominalValues());</span>
<span class="fc" id="L1368">          dataset.setNumNumeric(getNumRelationalNumeric());</span>
<span class="fc" id="L1369">          dataset.setNumString(getNumRelationalString());</span>
<span class="fc" id="L1370">          dataset.setNumDate(getNumRelationalDate());</span>
<span class="fc" id="L1371">          dataset.setNumInstances(0);</span>
<span class="fc" id="L1372">          dataset.setClassType(Attribute.NOMINAL);  // dummy to avoid endless recursion, will be deleted anyway</span>
<span class="fc" id="L1373">          rel = new Instances(dataset.generate());</span>
<span class="pc bpc" id="L1374" title="1 of 2 branches missed.">          if (!getNoClass()) {</span>
<span class="fc" id="L1375">            int clsIndex = rel.classIndex();</span>
<span class="fc" id="L1376">            rel.setClassIndex(-1);</span>
<span class="fc" id="L1377">            rel.deleteAttributeAt(clsIndex);</span>
          }
        }
<span class="fc" id="L1380">        result = new Attribute(namePrefix + name, rel);</span>
<span class="fc" id="L1381">        break;</span>
        
      default:
<span class="nc" id="L1384">        throw new IllegalArgumentException(&quot;Attribute type '&quot; + attType + &quot;' unknown!&quot;);</span>
    }
    
<span class="fc" id="L1387">    return result;</span>
  }
  
  /**
   * Generates the class value
   * 
   * @param data  	the dataset to work on
   * @return      	the new class value
   * @throws Exception 	if something goes wrong
   */
  protected double generateClassValue(Instances data) throws Exception {
<span class="fc" id="L1398">    double result = Double.NaN;</span>
    
<span class="pc bpc" id="L1400" title="1 of 6 branches missed.">    switch (m_ClassType) {</span>
      case Attribute.NUMERIC:
<span class="fc" id="L1402">        result = m_Random.nextFloat() * 0.25</span>
<span class="fc" id="L1403">            + Math.abs(m_Random.nextInt())</span>
<span class="fc" id="L1404">            % Math.max(2, m_NumNominal);</span>
<span class="fc" id="L1405">        break;</span>
        
      case Attribute.NOMINAL:
<span class="fc" id="L1408">        result = Math.abs(m_Random.nextInt()) % data.numClasses();</span>
<span class="fc" id="L1409">        break;</span>
        
      case Attribute.STRING:
<span class="fc" id="L1412">        String str = &quot;&quot;;</span>
<span class="fc bfc" id="L1413" title="All 2 branches covered.">        for (int n = 0; n &lt; m_Words.length; n++) {</span>
<span class="pc bpc" id="L1414" title="1 of 4 branches missed.">          if ( (n &gt; 0) &amp;&amp; (m_WordSeparators.length() != 0) )</span>
<span class="fc" id="L1415">            str += m_WordSeparators.charAt(m_Random.nextInt(m_WordSeparators.length()));</span>
<span class="fc" id="L1416">          str += m_Words[m_Random.nextInt(m_Words.length)];</span>
        }
<span class="fc" id="L1418">        result = data.classAttribute().addStringValue(str);</span>
<span class="fc" id="L1419">        break;</span>
        
      case Attribute.DATE:
<span class="fc" id="L1422">        result = data.classAttribute().parseDate(</span>
<span class="fc" id="L1423">                (2000 + m_Random.nextInt(100)) + &quot;-01-01&quot;);</span>
<span class="fc" id="L1424">        break;</span>
        
      case Attribute.RELATIONAL:
<span class="pc bpc" id="L1427" title="1 of 2 branches missed.">        if (getRelationalClassFormat() != null) {</span>
<span class="nc" id="L1428">          result = data.classAttribute().addRelation(getRelationalClassFormat());</span>
        }
        else {
<span class="fc" id="L1431">          TestInstances dataset = new TestInstances();</span>
<span class="fc" id="L1432">          dataset.setNumNominal(getNumRelationalNominal());</span>
<span class="fc" id="L1433">          dataset.setNumNominalValues(getNumRelationalNominalValues());</span>
<span class="fc" id="L1434">          dataset.setNumNumeric(getNumRelationalNumeric());</span>
<span class="fc" id="L1435">          dataset.setNumString(getNumRelationalString());</span>
<span class="fc" id="L1436">          dataset.setNumDate(getNumRelationalDate());</span>
<span class="fc" id="L1437">          dataset.setNumInstances(getNumInstancesRelational());</span>
<span class="fc" id="L1438">          dataset.setClassType(Attribute.NOMINAL);  // dummy to avoid endless recursion, will be deleted anyway</span>
<span class="fc" id="L1439">          Instances rel = new Instances(dataset.generate());</span>
<span class="fc" id="L1440">          int clsIndex = rel.classIndex();</span>
<span class="fc" id="L1441">          rel.setClassIndex(-1);</span>
<span class="fc" id="L1442">          rel.deleteAttributeAt(clsIndex);</span>
<span class="fc" id="L1443">          result = data.classAttribute().addRelation(rel);</span>
        }
        break;
    }
    
<span class="fc" id="L1448">    return result;</span>
  }
  
  /**
   * Generates a new value for the specified attribute. The classValue
   * might be used in the process.
   * 
   * @param data          the dataset to work on
   * @param index         the index of the attribute
   * @param classVal      the class value for the current instance, might be 
   *                      used in the calculation
   * @return              the new attribute value
   * @throws Exception    if something goes wrong
   */
  protected double generateAttributeValue(Instances data, int index, double classVal) throws Exception {
<span class="fc" id="L1463">    double result = Double.NaN;</span>
    
<span class="pc bpc" id="L1465" title="1 of 6 branches missed.">    switch (data.attribute(index).type()) {</span>
      case Attribute.NUMERIC:
<span class="fc" id="L1467">        result = classVal * 4 + m_Random.nextFloat() * 1 - 0.5;</span>
<span class="fc" id="L1468">        break;</span>
        
      case Attribute.NOMINAL:
<span class="fc bfc" id="L1471" title="All 2 branches covered.">        if (m_Random.nextFloat() &lt; 0.2) {</span>
<span class="fc" id="L1472">          result = Math.abs(m_Random.nextInt())</span>
<span class="fc" id="L1473">          % data.attribute(index).numValues();</span>
        } else {
<span class="fc" id="L1475">          result = ((int)classVal) % data.attribute(index).numValues();</span>
        }
	//result = m_Random.nextInt(data.attribute(index).numValues());
<span class="fc" id="L1478">        break;</span>
        
      case Attribute.STRING:
<span class="fc" id="L1481">        String str = &quot;&quot;;</span>
<span class="fc bfc" id="L1482" title="All 2 branches covered.">        for (int n = 0; n &lt; m_Words.length; n++) {</span>
<span class="pc bpc" id="L1483" title="1 of 4 branches missed.">          if ( (n &gt; 0) &amp;&amp; (m_WordSeparators.length() != 0) )</span>
<span class="fc" id="L1484">            str += m_WordSeparators.charAt(m_Random.nextInt(m_WordSeparators.length()));</span>
<span class="fc" id="L1485">          str += m_Words[m_Random.nextInt(m_Words.length)];</span>
        }
<span class="fc" id="L1487">        result = data.attribute(index).addStringValue(str);</span>
<span class="fc" id="L1488">        break;</span>
        
      case Attribute.DATE:
<span class="fc" id="L1491">        result = data.attribute(index).parseDate(</span>
<span class="fc" id="L1492">                (2000 + m_Random.nextInt(100)) + &quot;-01-01&quot;);</span>
<span class="fc" id="L1493">        break;</span>
        
      case Attribute.RELATIONAL:
<span class="fc" id="L1496">        Instances rel = new Instances(data.attribute(index).relation(), 0);</span>
<span class="fc bfc" id="L1497" title="All 2 branches covered.">        for (int n = 0; n &lt; getNumInstancesRelational(); n++) {</span>
<span class="fc" id="L1498">          Instance inst = new Instance(rel.numAttributes());</span>
<span class="fc" id="L1499">          inst.setDataset(data);</span>
<span class="fc bfc" id="L1500" title="All 2 branches covered.">          for (int i = 0; i &lt; rel.numAttributes(); i++) {</span>
<span class="fc" id="L1501">            inst.setValue(i, generateAttributeValue(rel, i, 0));</span>
          }
<span class="fc" id="L1503">          rel.add(inst);</span>
        }
<span class="fc" id="L1505">        result = data.attribute(index).addRelation(rel);</span>
        break;
    }
    
<span class="fc" id="L1509">    return result;</span>
  }
  
  /**
   * Generates a new dataset
   * 
   * @return the generated data
   * @throws Exception if something goes wrong
   */
  public Instances generate() throws Exception {
<span class="fc" id="L1519">    return generate(&quot;&quot;);</span>
  }
  
  /**
   * generates a new dataset.
   * 
   * @param namePrefix the prefix to add to the name of an attribute
   * @return 		the generated data
   * @throws Exception	if something goes wrong
   */
  public Instances generate(String namePrefix) throws Exception {
<span class="fc bfc" id="L1530" title="All 2 branches covered.">    if (getMultiInstance()) {</span>
<span class="fc" id="L1531">      TestInstances bag = (TestInstances) this.clone();</span>
<span class="fc" id="L1532">      bag.setMultiInstance(false);</span>
<span class="fc" id="L1533">      bag.setNumInstances(0);</span>
<span class="fc" id="L1534">      bag.setSeed(m_Random.nextInt());</span>
<span class="fc" id="L1535">      Instances bagFormat = bag.generate(&quot;bagAtt_&quot;);</span>
<span class="fc" id="L1536">      bagFormat.setClassIndex(-1);</span>
<span class="fc" id="L1537">      bagFormat.deleteAttributeAt(bagFormat.numAttributes() - 1);</span>

      // generate multi-instance structure
<span class="fc" id="L1540">      TestInstances structure = new TestInstances();</span>
<span class="fc" id="L1541">      structure.setSeed(m_Random.nextInt());</span>
<span class="fc" id="L1542">      structure.setNumNominal(1);</span>
<span class="fc" id="L1543">      structure.setNumRelational(1);</span>
<span class="fc" id="L1544">      structure.setRelationalFormat(0, bagFormat);</span>
<span class="fc" id="L1545">      structure.setClassType(getClassType());</span>
<span class="fc" id="L1546">      structure.setNumClasses(getNumClasses());</span>
<span class="fc" id="L1547">      structure.setRelationalClassFormat(getRelationalClassFormat());</span>
<span class="fc" id="L1548">      structure.setNumInstances(getNumInstances());</span>
<span class="fc" id="L1549">      m_Data = structure.generate();</span>
      
      // generate bags
<span class="fc" id="L1552">      bag.setNumInstances(getNumInstancesRelational());</span>
<span class="fc bfc" id="L1553" title="All 2 branches covered.">      for (int i = 0; i &lt; getNumInstances(); i++) {</span>
<span class="fc" id="L1554">        bag.setSeed(m_Random.nextInt());</span>
<span class="fc" id="L1555">        Instances bagData = new Instances(bag.generate(&quot;bagAtt_&quot;));</span>
<span class="fc" id="L1556">        bagData.setClassIndex(-1);</span>
<span class="fc" id="L1557">        bagData.deleteAttributeAt(bagData.numAttributes() - 1);</span>
<span class="fc" id="L1558">        double val = m_Data.attribute(1).addRelation(bagData);</span>
<span class="fc" id="L1559">        m_Data.instance(i).setValue(1, val);</span>
      }
    }
    else {
      // initialize
<span class="fc" id="L1564">      int clsIndex = m_ClassIndex;</span>
<span class="fc bfc" id="L1565" title="All 2 branches covered.">      if (clsIndex == CLASS_IS_LAST)</span>
<span class="fc" id="L1566">        clsIndex = getNumAttributes() - 1;</span>

      // generate attributes
<span class="fc" id="L1569">      FastVector attributes = new FastVector(getNumAttributes());</span>
      // Add Nominal attributes
<span class="fc bfc" id="L1571" title="All 2 branches covered.">      for (int i = 0; i &lt; getNumNominal(); i++)</span>
<span class="fc" id="L1572">        attributes.addElement(generateAttribute(i, Attribute.NOMINAL, namePrefix));</span>
      
      // Add m_Numeric attributes
<span class="fc bfc" id="L1575" title="All 2 branches covered.">      for (int i = 0; i &lt; getNumNumeric(); i++)</span>
<span class="fc" id="L1576">        attributes.addElement(generateAttribute(i, Attribute.NUMERIC, namePrefix));</span>
      
      // Add some String attributes...
<span class="fc bfc" id="L1579" title="All 2 branches covered.">      for (int i = 0; i &lt; getNumString(); i++)</span>
<span class="fc" id="L1580">        attributes.addElement(generateAttribute(i, Attribute.STRING, namePrefix));</span>
      
      // Add some Date attributes...
<span class="fc bfc" id="L1583" title="All 2 branches covered.">      for (int i = 0; i &lt; getNumDate(); i++)</span>
<span class="fc" id="L1584">        attributes.addElement(generateAttribute(i, Attribute.DATE, namePrefix));</span>
      
      // Add some Relational attributes...
<span class="fc bfc" id="L1587" title="All 2 branches covered.">      for (int i = 0; i &lt; getNumRelational(); i++)</span>
<span class="fc" id="L1588">        attributes.addElement(generateAttribute(i, Attribute.RELATIONAL, namePrefix));</span>
      
      // Add class attribute
<span class="pc bpc" id="L1591" title="1 of 2 branches missed.">      if (clsIndex != NO_CLASS)</span>
<span class="fc" id="L1592">	attributes.insertElementAt(generateAttribute(CLASS_IS_LAST, getClassType(), namePrefix), clsIndex);</span>
      
<span class="fc" id="L1594">      m_Data = new Instances(getRelation(), attributes, getNumInstances());</span>
<span class="fc" id="L1595">      m_Data.setClassIndex(clsIndex);</span>

      // generate instances
<span class="fc bfc" id="L1598" title="All 2 branches covered.">      for (int i = 0; i &lt; getNumInstances(); i++) {</span>
<span class="fc" id="L1599">        Instance current = new Instance(getNumAttributes());</span>
<span class="fc" id="L1600">        current.setDataset(m_Data);</span>

        // class
        double classVal;
<span class="pc bpc" id="L1604" title="1 of 2 branches missed.">        if (clsIndex != NO_CLASS) {</span>
<span class="fc" id="L1605">          classVal = generateClassValue(m_Data);</span>
<span class="fc" id="L1606">          current.setClassValue(classVal);</span>
        }
        else {
<span class="nc" id="L1609">          classVal = m_Random.nextFloat();</span>
        }
        
        // other attributes
<span class="fc bfc" id="L1613" title="All 2 branches covered.">        for (int n = 0; n &lt; getNumAttributes(); n++) {</span>
<span class="fc bfc" id="L1614" title="All 2 branches covered.">          if (clsIndex == n)</span>
<span class="fc" id="L1615">            continue;</span>
          
<span class="fc" id="L1617">          current.setValue(n, generateAttributeValue(m_Data, n, classVal));</span>
        }
        
<span class="fc" id="L1620">        m_Data.add(current);</span>
      }
    }

<span class="pc bpc" id="L1624" title="1 of 2 branches missed.">    if (m_Data.classIndex() == NO_CLASS)</span>
<span class="nc" id="L1625">      m_Data.setClassIndex(-1);</span>
    
<span class="fc" id="L1627">    return getData();</span>
  }
  
  /**
   * returns a TestInstances instance setup already for the the given
   * capabilities.
   * 
   * @param c		the capabilities to base the TestInstances on
   * @return		the configured TestInstances object
   */
  public static TestInstances forCapabilities(Capabilities c) {
    TestInstances	result;
    
<span class="nc" id="L1640">    result = new TestInstances();</span>
    
    // multi-instance?
<span class="nc bnc" id="L1643" title="All 2 branches missed.">    if (c.getOwner() instanceof MultiInstanceCapabilitiesHandler) {</span>
<span class="nc" id="L1644">      Capabilities multi = (Capabilities) ((MultiInstanceCapabilitiesHandler) c.getOwner()).getMultiInstanceCapabilities().clone();</span>
<span class="nc" id="L1645">      multi.setOwner(null);  // otherwise recursive!</span>
<span class="nc" id="L1646">      result = forCapabilities(multi);</span>
<span class="nc" id="L1647">      result.setMultiInstance(true);</span>
    }
    else  {
      // class
<span class="nc bnc" id="L1651" title="All 2 branches missed.">      if (c.handles(Capability.NO_CLASS))</span>
<span class="nc" id="L1652">	result.setClassIndex(NO_CLASS);</span>
<span class="nc bnc" id="L1653" title="All 2 branches missed.">      else if (c.handles(Capability.NOMINAL_CLASS))</span>
<span class="nc" id="L1654">	result.setClassType(Attribute.NOMINAL);</span>
<span class="nc bnc" id="L1655" title="All 2 branches missed.">      else if (c.handles(Capability.BINARY_CLASS))</span>
<span class="nc" id="L1656">	result.setClassType(Attribute.NOMINAL);</span>
<span class="nc bnc" id="L1657" title="All 2 branches missed.">      else if (c.handles(Capability.NUMERIC_CLASS))</span>
<span class="nc" id="L1658">	result.setClassType(Attribute.NUMERIC);</span>
<span class="nc bnc" id="L1659" title="All 2 branches missed.">      else if (c.handles(Capability.DATE_CLASS))</span>
<span class="nc" id="L1660">	result.setClassType(Attribute.DATE);</span>
<span class="nc bnc" id="L1661" title="All 2 branches missed.">      else if (c.handles(Capability.STRING_CLASS))</span>
<span class="nc" id="L1662">	result.setClassType(Attribute.STRING);</span>
<span class="nc bnc" id="L1663" title="All 2 branches missed.">      else if (c.handles(Capability.RELATIONAL_CLASS))</span>
<span class="nc" id="L1664">	result.setClassType(Attribute.RELATIONAL);</span>

      // # of classes
<span class="nc bnc" id="L1667" title="All 2 branches missed.">      if (c.handles(Capability.UNARY_CLASS))</span>
<span class="nc" id="L1668">	result.setNumClasses(1);</span>
<span class="nc bnc" id="L1669" title="All 2 branches missed.">      if (c.handles(Capability.BINARY_CLASS))</span>
<span class="nc" id="L1670">	result.setNumClasses(2);</span>
<span class="nc bnc" id="L1671" title="All 2 branches missed.">      if (c.handles(Capability.NOMINAL_CLASS))</span>
<span class="nc" id="L1672">	result.setNumClasses(4);</span>
      
      // attributes
<span class="nc bnc" id="L1675" title="All 2 branches missed.">      if (c.handles(Capability.NOMINAL_ATTRIBUTES)) {</span>
<span class="nc" id="L1676">	result.setNumNominal(1);</span>
<span class="nc" id="L1677">	result.setNumRelationalNominal(1);</span>
      }
      else {
<span class="nc" id="L1680">	result.setNumNominal(0);</span>
<span class="nc" id="L1681">	result.setNumRelationalNominal(0);</span>
      }

<span class="nc bnc" id="L1684" title="All 2 branches missed.">      if (c.handles(Capability.NUMERIC_ATTRIBUTES)) {</span>
<span class="nc" id="L1685">	result.setNumNumeric(1);</span>
<span class="nc" id="L1686">	result.setNumRelationalNumeric(1);</span>
      }
      else {
<span class="nc" id="L1689">	result.setNumNumeric(0);</span>
<span class="nc" id="L1690">	result.setNumRelationalNumeric(0);</span>
      }

<span class="nc bnc" id="L1693" title="All 2 branches missed.">      if (c.handles(Capability.DATE_ATTRIBUTES)) {</span>
<span class="nc" id="L1694">	result.setNumDate(1);</span>
<span class="nc" id="L1695">	result.setNumRelationalDate(1);</span>
      }
      else {
<span class="nc" id="L1698">	result.setNumDate(0);</span>
<span class="nc" id="L1699">	result.setNumRelationalDate(0);</span>
      }
      
<span class="nc bnc" id="L1702" title="All 2 branches missed.">      if (c.handles(Capability.STRING_ATTRIBUTES)) {</span>
<span class="nc" id="L1703">	result.setNumString(1);</span>
<span class="nc" id="L1704">	result.setNumRelationalString(1);</span>
      }
      else {
<span class="nc" id="L1707">	result.setNumString(0);</span>
<span class="nc" id="L1708">	result.setNumRelationalString(0);</span>
      }
      
<span class="nc bnc" id="L1711" title="All 2 branches missed.">      if (c.handles(Capability.RELATIONAL_ATTRIBUTES))</span>
<span class="nc" id="L1712">	result.setNumRelational(1);</span>
      else
<span class="nc" id="L1714">	result.setNumRelational(0);</span>
    }
    
<span class="nc" id="L1717">    return result;</span>
  }
  
  /**
   * returns a string representation of the object
   * 
   * @return		a string representation of the object
   */
  public String toString() {
    String	result;
    
<span class="nc" id="L1728">    result = &quot;&quot;;</span>
<span class="nc" id="L1729">    result += &quot;Relation: &quot; + getRelation() + &quot;\n&quot;;</span>
<span class="nc" id="L1730">    result += &quot;Seed: &quot; + getSeed() + &quot;\n&quot;;</span>
<span class="nc" id="L1731">    result += &quot;# Instances: &quot; + getNumInstances() + &quot;\n&quot;;</span>
<span class="nc" id="L1732">    result += &quot;ClassType: &quot; + getClassType() + &quot;\n&quot;;</span>
<span class="nc" id="L1733">    result += &quot;# Classes: &quot; + getNumClasses() + &quot;\n&quot;;</span>
<span class="nc" id="L1734">    result += &quot;Class index: &quot; + getClassIndex() + &quot;\n&quot;;</span>
<span class="nc" id="L1735">    result += &quot;# Nominal: &quot; +     getNumNominal() + &quot;\n&quot;;</span>
<span class="nc" id="L1736">    result += &quot;# Nominal values: &quot; + getNumNominalValues() + &quot;\n&quot;;</span>
<span class="nc" id="L1737">    result += &quot;# Numeric: &quot; + getNumNumeric() + &quot;\n&quot;;</span>
<span class="nc" id="L1738">    result += &quot;# String: &quot; + getNumString() + &quot;\n&quot;;</span>
<span class="nc" id="L1739">    result += &quot;# Date: &quot; + getNumDate() + &quot;\n&quot;;</span>
<span class="nc" id="L1740">    result += &quot;# Relational: &quot; + getNumRelational() + &quot;\n&quot;;</span>
<span class="nc" id="L1741">    result += &quot;  - # Nominal: &quot; +     getNumRelationalNominal() + &quot;\n&quot;;</span>
<span class="nc" id="L1742">    result += &quot;  - # Nominal values: &quot; + getNumRelationalNominalValues() + &quot;\n&quot;;</span>
<span class="nc" id="L1743">    result += &quot;  - # Numeric: &quot; + getNumRelationalNumeric() + &quot;\n&quot;;</span>
<span class="nc" id="L1744">    result += &quot;  - # String: &quot; + getNumRelationalString() + &quot;\n&quot;;</span>
<span class="nc" id="L1745">    result += &quot;  - # Date: &quot; + getNumRelationalDate() + &quot;\n&quot;;</span>
<span class="nc" id="L1746">    result += &quot;  - # Instances: &quot; + getNumInstancesRelational() + &quot;\n&quot;;</span>
<span class="nc" id="L1747">    result += &quot;Multi-Instance: &quot; + getMultiInstance() + &quot;\n&quot;;</span>
<span class="nc" id="L1748">    result += &quot;Words: &quot; + getWords() + &quot;\n&quot;;</span>
<span class="nc" id="L1749">    result += &quot;Word separators: &quot; + getWordSeparators() + &quot;\n&quot;;</span>
    
<span class="nc" id="L1751">    return result;</span>
  }
  
  /**
   * Returns the revision string.
   * 
   * @return		the revision
   */
  public String getRevision() {
<span class="nc" id="L1760">    return RevisionUtils.extract(&quot;$Revision: 6325 $&quot;);</span>
  }
  
  /**
   * for running the class from commandline, prints the generated data
   * to stdout
   * 
   * @param args	the commandline parameters
   * @throws Exception	if something goes wrong
   */
  public static void main(String[] args) throws Exception {
    TestInstances inst;
    
<span class="nc" id="L1773">    inst = new TestInstances();</span>

    // help requested?
<span class="nc bnc" id="L1776" title="All 4 branches missed.">    if (Utils.getFlag(&quot;h&quot;, args) || Utils.getFlag(&quot;help&quot;, args)) {</span>
<span class="nc" id="L1777">      StringBuffer result = new StringBuffer();</span>
<span class="nc" id="L1778">      result.append(&quot;\nTest data generator options:\n\n&quot;);</span>

<span class="nc" id="L1780">      result.append(&quot;-h|-help\n\tprints this help\n&quot;);</span>
      
<span class="nc" id="L1782">      Enumeration enm = inst.listOptions();</span>
<span class="nc bnc" id="L1783" title="All 2 branches missed.">      while (enm.hasMoreElements()) {</span>
<span class="nc" id="L1784">        Option option = (Option) enm.nextElement();</span>
<span class="nc" id="L1785">        result.append(option.synopsis() + &quot;\n&quot; + option.description() + &quot;\n&quot;);</span>
      }

<span class="nc" id="L1788">      System.out.println(result);</span>
<span class="nc" id="L1789">      System.exit(0);</span>
    }
    
    // generate data
<span class="nc" id="L1793">    inst.setOptions(args);</span>
<span class="nc" id="L1794">    System.out.println(inst.generate());</span>
<span class="nc" id="L1795">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>AllTests (Nov 28, 2015 2:34:31 PM)</div></body></html>