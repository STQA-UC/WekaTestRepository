<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>TechnicalInformation.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (Nov 28, 2015 2:34:31 PM)</a> &gt; <a href="../../index.html" class="el_group">wekaproject</a> &gt; <a href="../index.html" class="el_bundle">src/src/main/java</a> &gt; <a href="index.source.html" class="el_package">weka.core</a> &gt; <span class="el_source">TechnicalInformation.java</span></div><h1>TechnicalInformation.java</h1><pre class="source lang-java linenums"><span class="nc" id="L1">/*</span>
 *    This program is free software; you can redistribute it and/or modify
 *    it under the terms of the GNU General Public License as published by
 *    the Free Software Foundation; either version 2 of the License, or
 *    (at your option) any later version.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU General Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License
 *    along with this program; if not, write to the Free Software
 *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

/*
 * TechnicalInformation.java
 * Copyright (C) 2006 University of Waikato, Hamilton, New Zealand
 */

package weka.core;

import java.util.Collections;
import java.util.Enumeration;
import java.util.Hashtable;
import java.util.Vector;

/**
 * Used for paper references in the Javadoc and for BibTex generation.
 * Based on documentation found here: &lt;p/&gt;
 * &lt;a href=&quot;http://www.ecst.csuchico.edu/~jacobsd/bib/formats/bibtex.html&quot; target=&quot;_blank&quot;&gt;http://www.ecst.csuchico.edu/~jacobsd/bib/formats/bibtex.html&lt;/a&gt;
 * &lt;p/&gt;
 * BibTex examples can be found here: &lt;p/&gt;
 * &lt;a href=&quot;http://bib2web.djvuzone.org/bibtex.html&quot; target=&quot;_blank&quot;&gt;http://bib2web.djvuzone.org/bibtex.html&lt;/a&gt;
 * 
 * @author  fracpete (fracpete at waikato dot ac dot nz)
 * @version $Revision: 1.11 $
 * @see TechnicalInformationHandler
 */
public class TechnicalInformation
  implements RevisionHandler {

  /** the different types of information */
<span class="fc" id="L45">  public enum Type {</span>
    /** An article from a journal or magazine. */
<span class="fc" id="L47">    ARTICLE(&quot;article&quot;, &quot;An article from a journal or magazine.&quot;),  </span>
    /** A book with an explicit publisher. */
<span class="fc" id="L49">    BOOK(&quot;book&quot;, &quot;A book with an explicit publisher.&quot;),</span>
    /** A work that is printed and bound, but without a named publisher or sponsoring institution. */
<span class="fc" id="L51">    BOOKLET(&quot;booklet&quot;, &quot;A work that is printed and bound, but without a named publisher or sponsoring institution.&quot;),</span>
    /** The same as inproceedings. */
<span class="fc" id="L53">    CONFERENCE(&quot;conference&quot;, &quot;The same as inproceedings.&quot;),</span>
    /** A part of a book, which may be a chapter (or section or whatever) and/or a range of pages. */
<span class="fc" id="L55">    INBOOK(&quot;inbook&quot;, &quot;A part of a book, which may be a chapter (or section or whatever) and/or a range of pages.&quot;),</span>
    /** A part of a book having its own title. */
<span class="fc" id="L57">    INCOLLECTION(&quot;incollection&quot;, &quot;A part of a book having its own title.&quot;),</span>
    /** An article in a conference proceedings. */
<span class="fc" id="L59">    INPROCEEDINGS(&quot;inproceedings&quot;, &quot;An article in a conference proceedings.&quot;),</span>
    /** Technical documentation. */
<span class="fc" id="L61">    MANUAL(&quot;manual&quot;, &quot;Technical documentation.&quot;),</span>
    /** A Master's thesis. */
<span class="fc" id="L63">    MASTERSTHESIS(&quot;mastersthesis&quot;, &quot;A Master's thesis.&quot;),</span>
    /** Use this type when nothing else fits. */
<span class="fc" id="L65">    MISC(&quot;misc&quot;, &quot;Use this type when nothing else fits.&quot;),</span>
    /** A PhD thesis. */
<span class="fc" id="L67">    PHDTHESIS(&quot;phdthesis&quot;, &quot;A PhD thesis.&quot;),</span>
    /** The proceedings of a conference. */
<span class="fc" id="L69">    PROCEEDINGS(&quot;proceedings&quot;, &quot;The proceedings of a conference.&quot;),</span>
    /** A report published by a school or other institution, usually numbered within a series. */
<span class="fc" id="L71">    TECHREPORT(&quot;techreport&quot;, &quot;A report published by a school or other institution, usually numbered within a series.&quot;),</span>
    /** A document having an author and title, but not formally published. */
<span class="fc" id="L73">    UNPUBLISHED(&quot;unpublished&quot;, &quot;A document having an author and title, but not formally published.&quot;);</span>
    
    /** the string used in toString()  */
    protected String m_Display;
    
    /** the comment about this type */
    protected String m_Comment;
    
    /**
     * the constructor
     * 
     * @param display	the string to return in toString()
     * @param comment	a comment about the type
     */
<span class="fc" id="L87">    private Type(String display, String comment) {</span>
<span class="fc" id="L88">      m_Display = display;</span>
<span class="fc" id="L89">      m_Comment = comment;</span>
<span class="fc" id="L90">    }</span>
    
    /**
     * returns the display string
     * 
     * @return 		the display string
     */
    public String getDisplay() {
<span class="nc" id="L98">      return m_Display;</span>
    }
    
    /**
     * returns the comment string
     * 
     * @return		the comment string
     */
    public String getComment() {
<span class="nc" id="L107">      return m_Comment;</span>
    }
    
    /**
     * returns the display string of the Type
     * 
     * @return		the display string
     */
    public String toString() {
<span class="nc" id="L116">      return m_Display;</span>
    }
  }
  
  /** the possible fields */
<span class="fc" id="L121">  public enum Field {</span>
    /** Usually the address of the publisher or other type of institution. For major publishing houses, van Leunen recommends omitting the information entirely. For small publishers, on the other hand, you can help the reader by giving the complete address. */
<span class="fc" id="L123">    ADDRESS(&quot;address&quot;, &quot;Usually the address of the publisher or other type of institution. For major publishing houses, van Leunen recommends omitting the information entirely. For small publishers, on the other hand, you can help the reader by giving the complete address.&quot;),</span>
    /** An annotation. It is not used by the standard bibliography styles, but may be used by others that produce an annotated bibliography. */
<span class="fc" id="L125">    ANNOTE(&quot;annote&quot;, &quot;An annotation. It is not used by the standard bibliography styles, but may be used by others that produce an annotated bibliography.&quot;),</span>
    /** The name(s) of the author(s), in the format described in the LaTeX book. */
<span class="fc" id="L127">    AUTHOR(&quot;author&quot;, &quot;The name(s) of the author(s), in the format described in the LaTeX book.&quot;),</span>
    /** Title of a book, part of which is being cited. See the LaTeX book for how to type titles. For book entries, use the title field instead. */
<span class="fc" id="L129">    BOOKTITLE(&quot;booktitle&quot;, &quot;Title of a book, part of which is being cited. See the LaTeX book for how to type titles. For book entries, use the title field instead.&quot;),</span>
    /** A chapter (or section or whatever) number. */
<span class="fc" id="L131">    CHAPTER(&quot;chapter&quot;, &quot;A chapter (or section or whatever) number.&quot;),</span>
    /** The database key of the entry being cross referenced. Any fields that are missing from the current record are inherited from the field being cross referenced. */
<span class="fc" id="L133">    CROSSREF(&quot;crossref&quot;, &quot;The database key of the entry being cross referenced. Any fields that are missing from the current record are inherited from the field being cross referenced.&quot;),</span>
    /** The edition of a book---for example, ``Second''. This should be an ordinal, and should have the first letter capitalized, as shown here; the standard styles convert to lower case when necessary. */
<span class="fc" id="L135">    EDITION(&quot;edition&quot;, &quot;The edition of a book---for example, ``Second''. This should be an ordinal, and should have the first letter capitalized, as shown here; the standard styles convert to lower case when necessary.&quot;),</span>
    /** Name(s) of editor(s), typed as indicated in the LaTeX book. If there is also an author field, then the editor field gives the editor of the book or collection in which the reference appears. */
<span class="fc" id="L137">    EDITOR(&quot;editor&quot;, &quot;Name(s) of editor(s), typed as indicated in the LaTeX book. If there is also an author field, then the editor field gives the editor of the book or collection in which the reference appears.&quot;),</span>
    /** How something strange has been published. The first word should be capitalized. */
<span class="fc" id="L139">    HOWPUBLISHED(&quot;howpublished&quot;, &quot;How something strange has been published. The first word should be capitalized.&quot;),</span>
    /** The sponsoring institution of a technical report. */
<span class="fc" id="L141">    INSTITUTION(&quot;institution&quot;, &quot;The sponsoring institution of a technical report.&quot;),</span>
    /** A journal name. Abbreviations are provided for many journals. */
<span class="fc" id="L143">    JOURNAL(&quot;journal&quot;, &quot;A journal name. Abbreviations are provided for many journals.&quot;),</span>
    /** Used for alphabetizing, cross referencing, and creating a label when the ``author'' information is missing. This field should not be confused with the key that appears in the cite command and at the beginning of the database entry. */
<span class="fc" id="L145">    KEY(&quot;key&quot;, &quot;Used for alphabetizing, cross referencing, and creating a label when the ``author'' information is missing. This field should not be confused with the key that appears in the cite command and at the beginning of the database entry.&quot;),</span>
    /** The month in which the work was published or, for an unpublished work, in which it was written. You should use the standard three-letter abbreviation, as described in Appendix B.1.3 of the LaTeX book. */
<span class="fc" id="L147">    MONTH(&quot;month&quot;, &quot;The month in which the work was published or, for an unpublished work, in which it was written. You should use the standard three-letter abbreviation, as described in Appendix B.1.3 of the LaTeX book.&quot;),</span>
    /** Any additional information that can help the reader. The first word should be capitalized. */
<span class="fc" id="L149">    NOTE(&quot;note&quot;, &quot;Any additional information that can help the reader. The first word should be capitalized.&quot;),</span>
    /** The number of a journal, magazine, technical report, or of a work in a series. An issue of a journal or magazine is usually identified by its volume and number; the organization that issues a technical report usually gives it a number; and sometimes books are given numbers in a named series. */
<span class="fc" id="L151">    NUMBER(&quot;number&quot;, &quot;The number of a journal, magazine, technical report, or of a work in a series. An issue of a journal or magazine is usually identified by its volume and number; the organization that issues a technical report usually gives it a number; and sometimes books are given numbers in a named series.&quot;),</span>
    /** The organization that sponsors a conference or that publishes a manual. */
<span class="fc" id="L153">    ORGANIZATION(&quot;organization&quot;, &quot;The organization that sponsors a conference or that publishes a manual.&quot;),</span>
    /** One or more page numbers or range of numbers, such as 42--111 or 7,41,73--97 or 43+ (the `+' in this last example indicates pages following that don't form a simple range). To make it easier to maintain Scribe-compatible databases, the standard styles convert a single dash (as in 7-33) to the double dash used in TeX to denote number ranges (as in 7--33). */
<span class="fc" id="L155">    PAGES(&quot;pages&quot;, &quot;One or more page numbers or range of numbers, such as 42--111 or 7,41,73--97 or 43+ (the `+' in this last example indicates pages following that don't form a simple range). To make it easier to maintain Scribe-compatible databases, the standard styles convert a single dash (as in 7-33) to the double dash used in TeX to denote number ranges (as in 7--33).&quot;),</span>
    /** The publisher's name. */
<span class="fc" id="L157">    PUBLISHER(&quot;publisher&quot;, &quot;The publisher's name.&quot;),</span>
    /** The name of the school where a thesis was written. */
<span class="fc" id="L159">    SCHOOL(&quot;school&quot;, &quot;The name of the school where a thesis was written.&quot;),</span>
    /** The name of a series or set of books. When citing an entire book, the the title field gives its title and an optional series field gives the name of a series or multi-volume set in which the book is published. */
<span class="fc" id="L161">    SERIES(&quot;series&quot;, &quot;The name of a series or set of books. When citing an entire book, the the title field gives its title and an optional series field gives the name of a series or multi-volume set in which the book is published.&quot;),</span>
    /** The work's title, typed as explained in the LaTeX book. */
<span class="fc" id="L163">    TITLE(&quot;title&quot;, &quot;The work's title, typed as explained in the LaTeX book.&quot;),</span>
    /** The type of a technical report---for example, ``Research Note''. */
<span class="fc" id="L165">    TYPE(&quot;type&quot;, &quot;The type of a technical report---for example, ``Research Note''.&quot;),</span>
    /** The volume of a journal or multi-volume book. */
<span class="fc" id="L167">    VOLUME(&quot;volume&quot;, &quot;The volume of a journal or multi-volume book.&quot;),</span>
    /** The year of publication or, for an unpublished work, the year it was written. Generally it should consist of four numerals, such as 1984, although the standard styles can handle any year whose last four nonpunctuation characters are numerals, such as `\\hbox{(about 1984)}'. */
<span class="fc" id="L169">    YEAR(&quot;year&quot;, &quot;The year of publication or, for an unpublished work, the year it was written. Generally it should consist of four numerals, such as 1984, although the standard styles can handle any year whose last four nonpunctuation characters are numerals, such as `\\hbox{(about 1984)}'.&quot;),</span>
    // other fields
    /** The authors affiliation. */
<span class="fc" id="L172">    AFFILIATION(&quot;affiliation&quot;, &quot;The authors affiliation.&quot;),</span>
    /** An abstract of the work. */
<span class="fc" id="L174">    ABSTRACT(&quot;abstract&quot;, &quot;An abstract of the work.&quot;),</span>
    /** A Table of Contents.  */
<span class="fc" id="L176">    CONTENTS(&quot;contents&quot;, &quot;A Table of Contents &quot;),</span>
    /** Copyright information. */
<span class="fc" id="L178">    COPYRIGHT(&quot;copyright&quot;, &quot;Copyright information.&quot;),</span>
    /** The International Standard Book Number (10 digits). */
<span class="fc" id="L180">    ISBN(&quot;ISBN&quot;, &quot;The International Standard Book Number (10 digits).&quot;),</span>
    /** The International Standard Book Number (13 digits). */
<span class="fc" id="L182">    ISBN13(&quot;ISBN-13&quot;, &quot;The International Standard Book Number (13 digits).&quot;),</span>
    /** The International Standard Serial Number. Used to identify a journal. */
<span class="fc" id="L184">    ISSN(&quot;ISSN&quot;, &quot;The International Standard Serial Number. Used to identify a journal.&quot;),</span>
    /** Key words used for searching or possibly for annotation. */
<span class="fc" id="L186">    KEYWORDS(&quot;keywords&quot;, &quot;Key words used for searching or possibly for annotation.&quot;),</span>
    /** The language the document is in. */
<span class="fc" id="L188">    LANGUAGE(&quot;language&quot;, &quot;The language the document is in.&quot;),</span>
    /** A location associated with the entry, such as the city in which a conference took place. */
<span class="fc" id="L190">    LOCATION(&quot;location&quot;, &quot;A location associated with the entry, such as the city in which a conference took place.&quot;),</span>
    /** The Library of Congress Call Number. I've also seen this as lib-congress. */
<span class="fc" id="L192">    LCCN(&quot;LCCN&quot;, &quot;The Library of Congress Call Number. I've also seen this as lib-congress.&quot;),</span>
    /** The Mathematical Reviews number. */
<span class="fc" id="L194">    MRNUMBER(&quot;mrnumber&quot;, &quot;The Mathematical Reviews number.&quot;),</span>
    /** The price of the document. */
<span class="fc" id="L196">    PRICE(&quot;price&quot;, &quot;The price of the document.&quot;),</span>
    /** The physical dimensions of a work. */
<span class="fc" id="L198">    SIZE(&quot;size&quot;, &quot;The physical dimensions of a work.&quot;),</span>
    /** The WWW Universal Resource Locator that points to the item being referenced. This often is used for technical reports to point to the ftp site where the postscript source of the report is located. */
<span class="fc" id="L200">    URL(&quot;URL&quot;, &quot;The WWW Universal Resource Locator that points to the item being referenced. This often is used for technical reports to point to the ftp site where the postscript source of the report is located.&quot;),</span>
    // additional fields
    /** A link to a postscript file. */
<span class="fc" id="L203">    PS(&quot;PS&quot;, &quot;A link to a postscript file.&quot;),</span>
    /** A link to a postscript file. */
<span class="fc" id="L205">    PDF(&quot;PDF&quot;, &quot;A link to a PDF file.&quot;),</span>
    /** A link to a postscript file. */
<span class="fc" id="L207">    HTTP(&quot;HTTP&quot;, &quot;A hyperlink to a resource.&quot;);</span>
    
    /** the string used in toString()  */
    protected String m_Display;
    
    /** the comment about this type */
    protected String m_Comment;
    
    /**
     * the constructor
     * 
     * @param display	the string to return in toString()
     * @param comment	a comment about the type
     */
<span class="fc" id="L221">    private Field(String display, String comment) {</span>
<span class="fc" id="L222">      m_Display = display;</span>
<span class="fc" id="L223">      m_Comment = comment;</span>
<span class="fc" id="L224">    }</span>
    
    /**
     * returns the display string
     * 
     * @return		the display string
     */
    public String getDisplay() {
<span class="nc" id="L232">      return m_Display;</span>
    }
    
    /**
     * returns the comment string
     * 
     * @return		the comment string
     */
    public String getComment() {
<span class="nc" id="L241">      return m_Comment;</span>
    }
    
    /**
     * returns the display string of the Type
     * 
     * @return		the display string
     */
    public String toString() {
<span class="nc" id="L250">      return m_Display;</span>
    }
  }

  /** will be returned if no ID can be generated */
  protected final static String MISSING_ID = &quot;missing_id&quot;;
  
  /** the type of this technical information */
<span class="nc" id="L258">  protected Type m_Type = null;</span>
  
  /** the unique identifier of this information, will be generated 
   * automatically if left empty */
<span class="nc" id="L262">  protected String m_ID = &quot;&quot;;</span>
  
  /** stores all the values associated with the fields (FIELD - String) */
<span class="nc" id="L265">  protected Hashtable m_Values = new Hashtable();</span>

  /** additional technical informations */
<span class="nc" id="L268">  protected Vector m_Additional = new Vector();</span>
  
  /**
   * Initializes the information with the given type
   * 
   * @param type	the type of this information
   * @see Type
   */
  public TechnicalInformation(Type type) {
<span class="nc" id="L277">    this(type, &quot;&quot;);</span>
<span class="nc" id="L278">  }</span>

  /**
   * Initializes the information with the given type
   * 
   * @param type	the type of this information
   * @param id		the unique ID (for BibTex), can be empty
   * @see Type
   */
<span class="nc" id="L287">  public TechnicalInformation(Type type, String id) {</span>
<span class="nc" id="L288">    m_Type = type;</span>
<span class="nc" id="L289">    m_ID   = id;</span>
<span class="nc" id="L290">  }</span>
  
  /**
   * returns the type of this technical information
   * 
   * @return		the type of this information
   */
  public Type getType() {
<span class="nc" id="L298">    return m_Type;</span>
  }
  
  /**
   * splits the authors on the &quot; and &quot; and returns a vector with the names
   * 
   * @return		the authors in an array
   */
  protected String[] getAuthors() {
<span class="nc" id="L307">    return getValue(Field.AUTHOR).split(&quot; and &quot;);</span>
  }
  
  /**
   * Generates an ID based on the current settings and returns it. If nothing
   * can be generated the MISSING_ID string will be returned
   * 
   * @return		the ID
   * @see #MISSING_ID
   */
  protected String generateID() {
    String 	result;
    String[]	authors;
    String[]	parts;
    
<span class="nc" id="L322">    result = m_ID;</span>
    
    // try surname of first author and year
<span class="nc bnc" id="L325" title="All 2 branches missed.">    if (result.length() == 0) {</span>
<span class="nc bnc" id="L326" title="All 4 branches missed.">      if (exists(Field.AUTHOR) &amp;&amp; exists(Field.YEAR)) {</span>
<span class="nc" id="L327">	authors = getAuthors();</span>
<span class="nc bnc" id="L328" title="All 2 branches missed.">	if (authors[0].indexOf(&quot;,&quot;) &gt; -1) {</span>
<span class="nc" id="L329">	  parts = authors[0].split(&quot;,&quot;);</span>
<span class="nc" id="L330">	  result = parts[0];</span>
	}
	else {
<span class="nc" id="L333">	  parts = authors[0].split(&quot; &quot;);</span>
<span class="nc bnc" id="L334" title="All 2 branches missed.">	  if (parts.length == 1)</span>
<span class="nc" id="L335">	    result = parts[0];</span>
	  else
<span class="nc" id="L337">	    result = parts[parts.length - 1];</span>
	}
<span class="nc" id="L339">	result += getValue(Field.YEAR);</span>
<span class="nc" id="L340">	result = result.replaceAll(&quot; &quot;, &quot;&quot;);</span>
      }
    }
    
    // still nothing?
<span class="nc bnc" id="L345" title="All 2 branches missed.">    if (result.length() == 0)</span>
<span class="nc" id="L346">      result = MISSING_ID;</span>
    
<span class="nc" id="L348">    return result;</span>
  }
  
  /**
   * returns the unique ID (either the one used in creating this instance
   * or the automatically generated one)
   * 
   * @return		the ID for this information
   */
  public String getID() {
<span class="nc" id="L358">    return generateID();</span>
  }
  
  /**
   * sets the value for the given field, overwrites any previously existing one.
   * 
   * @param field	the field to set the value for
   * @param value	the value of the field
   */
  public void setValue(Field field, String value) {
<span class="nc" id="L368">    m_Values.put(field, value);</span>
<span class="nc" id="L369">  }</span>
  
  /**
   * returns the value associated with the given field, or empty if field is
   * not currently stored.
   * 
   * @param field	the field to retrieve the value for
   * @return		the value associated with this field, empty if not existing
   */
  public String getValue(Field field) {
<span class="nc bnc" id="L379" title="All 2 branches missed.">    if (m_Values.containsKey(field))</span>
<span class="nc" id="L380">      return (String) m_Values.get(field);</span>
    else
<span class="nc" id="L382">      return &quot;&quot;;</span>
  }
  
  /**
   * returns TRUE if the field is stored and has a value different from the
   * empty string.
   * 
   * @param field	the field to check
   * @return 		true if a value is stored for the field and non-empty
   */
  public boolean exists(Field field) {
<span class="nc bnc" id="L393" title="All 2 branches missed.">    return (    m_Values.containsKey(field) </span>
<span class="nc bnc" id="L394" title="All 2 branches missed.">	     &amp;&amp; (((String) m_Values.get(field)).length() != 0) );</span>
  }
  
  /**
   * returns an enumeration over all the stored fields
   * 
   * @return		all currently stored fields
   */
  public Enumeration fields() {
<span class="nc" id="L403">    return m_Values.keys();</span>
  }
  
  /**
   * returns true if there are further technical informations stored in this
   * 
   * @return true if there are further technical informations available
   */
  public boolean hasAdditional() {
<span class="nc bnc" id="L412" title="All 2 branches missed.">    return (m_Additional.size() &gt; 0);</span>
  }
  
  /**
   * returns an enumeration of all the additional technical informations (if
   * there are any)
   * 
   * @return an enumeration over all additional technical informations
   */
  public Enumeration additional() {
<span class="nc" id="L422">    return m_Additional.elements();</span>
  }
  
  /**
   * adds the given information to the list of additional technical 
   * informations
   * 
   * @param value the information to add
   */
  public void add(TechnicalInformation value) {
<span class="nc bnc" id="L432" title="All 2 branches missed.">    if (value == this)</span>
<span class="nc" id="L433">      throw new IllegalArgumentException(&quot;Can't add object to itself!&quot;);</span>
<span class="nc" id="L434">    m_Additional.add(value);</span>
<span class="nc" id="L435">  }</span>
  /**
   * Adds an empty technical information with the given type to the list
   * of additional informations and returns the instance.
   * 
   * @param type	the type of the new information to add
   * @return 		the generated information
   */
  public TechnicalInformation add(Type type) {
    TechnicalInformation 	result;
    
<span class="nc" id="L446">    result = new TechnicalInformation(type);</span>
<span class="nc" id="L447">    add(result);</span>
    
<span class="nc" id="L449">    return result;</span>
  }
  
  /**
   * Returns a plain-text string representing this technical information.
   * Note: it only returns a string based on some fields. At least AUTHOR,
   * YEAR and TITLE are necessary.
   * 
   * @return		a string representation of this information
   */
  public String toString() {
    String	result;
    String[]	authors;
    int		i;
    Enumeration	enm;
    
<span class="nc" id="L465">    result  = &quot;&quot;;</span>
<span class="nc" id="L466">    authors = getAuthors();</span>
    
    // BOOK
<span class="nc bnc" id="L469" title="All 2 branches missed.">    if (getType() == Type.BOOK) {</span>
<span class="nc bnc" id="L470" title="All 2 branches missed.">      for (i = 0; i &lt; authors.length; i++) {</span>
<span class="nc bnc" id="L471" title="All 2 branches missed.">	if (i &gt; 0)</span>
<span class="nc" id="L472">	  result += &quot;, &quot;;</span>
<span class="nc" id="L473">	result += authors[i];</span>
      }
<span class="nc bnc" id="L475" title="All 2 branches missed.">      if (exists(Field.YEAR))</span>
<span class="nc" id="L476">	result += &quot; (&quot; + getValue(Field.YEAR) + &quot;).&quot;;</span>
      else
<span class="nc" id="L478">	result += &quot;.&quot;;</span>
<span class="nc" id="L479">      result += &quot; &quot; + getValue(Field.TITLE) + &quot;.&quot;;</span>
<span class="nc" id="L480">      result += &quot; &quot; + getValue(Field.PUBLISHER);</span>
<span class="nc bnc" id="L481" title="All 2 branches missed.">      if (exists(Field.ADDRESS))</span>
<span class="nc" id="L482">	result += &quot;, &quot; + getValue(Field.ADDRESS);</span>
<span class="nc" id="L483">      result += &quot;.&quot;;</span>
    }
    // ARTICLE
<span class="nc bnc" id="L486" title="All 2 branches missed.">    else if (getType() == Type.ARTICLE) {</span>
<span class="nc bnc" id="L487" title="All 2 branches missed.">      for (i = 0; i &lt; authors.length; i++) {</span>
<span class="nc bnc" id="L488" title="All 2 branches missed.">	if (i &gt; 0)</span>
<span class="nc" id="L489">	  result += &quot;, &quot;;</span>
<span class="nc" id="L490">	result += authors[i];</span>
      }
<span class="nc bnc" id="L492" title="All 2 branches missed.">      if (exists(Field.YEAR))</span>
<span class="nc" id="L493">	result += &quot; (&quot; + getValue(Field.YEAR) + &quot;).&quot;;</span>
      else
<span class="nc" id="L495">	result += &quot;.&quot;;</span>
<span class="nc" id="L496">      result += &quot; &quot; + getValue(Field.TITLE) + &quot;.&quot;;</span>
      
      // journal
<span class="nc bnc" id="L499" title="All 2 branches missed.">      if (exists(Field.JOURNAL)) {</span>
<span class="nc" id="L500">	result += &quot; &quot; + getValue(Field.JOURNAL) + &quot;.&quot;;</span>

<span class="nc bnc" id="L502" title="All 2 branches missed.">	if (exists(Field.VOLUME))</span>
<span class="nc" id="L503">	  result += &quot; &quot; + getValue(Field.VOLUME);</span>
<span class="nc bnc" id="L504" title="All 2 branches missed.">	if (exists(Field.NUMBER))</span>
<span class="nc" id="L505">	  result += &quot;(&quot; + getValue(Field.NUMBER) + &quot;)&quot;;</span>
<span class="nc bnc" id="L506" title="All 2 branches missed.">	if (exists(Field.PAGES))</span>
<span class="nc" id="L507">	  result += &quot;:&quot; + getValue(Field.PAGES);</span>
	
<span class="nc" id="L509">	result += &quot;.&quot;;</span>
      }
      
      // other than JOURNAL???

      // URL
<span class="nc bnc" id="L515" title="All 2 branches missed.">      if (exists(Field.URL))</span>
<span class="nc" id="L516">	result += &quot; URL &quot; + getValue(Field.URL) + &quot;.&quot;;</span>
    }
    // CONFERENCE/INPROCEEDINGS
<span class="nc bnc" id="L519" title="All 4 branches missed.">    else if ( (getType() == Type.CONFERENCE) || (getType() == Type.INPROCEEDINGS) ) {</span>
<span class="nc bnc" id="L520" title="All 2 branches missed.">      for (i = 0; i &lt; authors.length; i++) {</span>
<span class="nc bnc" id="L521" title="All 2 branches missed.">	if (i &gt; 0)</span>
<span class="nc" id="L522">	  result += &quot;, &quot;;</span>
<span class="nc" id="L523">	result += authors[i];</span>
      }
<span class="nc" id="L525">      result += &quot;: &quot; + getValue(Field.TITLE) + &quot;.&quot;;</span>
<span class="nc" id="L526">      result += &quot; In: &quot; + getValue(Field.BOOKTITLE);</span>
      
<span class="nc bnc" id="L528" title="All 2 branches missed.">      if (exists(Field.ADDRESS))</span>
<span class="nc" id="L529">	result += &quot;, &quot; + getValue(Field.ADDRESS);</span>
<span class="nc bnc" id="L530" title="All 2 branches missed.">      if (exists(Field.PAGES))</span>
<span class="nc" id="L531">	result += &quot;, &quot; + getValue(Field.PAGES);</span>
	
<span class="nc bnc" id="L533" title="All 2 branches missed.">      if (exists(Field.YEAR))</span>
<span class="nc" id="L534">	result += &quot;, &quot; + getValue(Field.YEAR) + &quot;.&quot;;</span>
      else
<span class="nc" id="L536">	result += &quot;.&quot;;</span>
    }
    // INCOLLECTION
<span class="nc bnc" id="L539" title="All 2 branches missed.">    else if (getType() == Type.INCOLLECTION) {</span>
<span class="nc bnc" id="L540" title="All 2 branches missed.">      for (i = 0; i &lt; authors.length; i++) {</span>
<span class="nc bnc" id="L541" title="All 2 branches missed.">	if (i &gt; 0)</span>
<span class="nc" id="L542">	  result += &quot;, &quot;;</span>
<span class="nc" id="L543">	result += authors[i];</span>
      }
<span class="nc" id="L545">      result += &quot;: &quot; + getValue(Field.TITLE) + &quot;.&quot;;</span>
<span class="nc" id="L546">      result += &quot; In &quot;;</span>
<span class="nc bnc" id="L547" title="All 2 branches missed.">      if (exists(Field.EDITOR))</span>
<span class="nc" id="L548">	result += getValue(Field.EDITOR) + &quot;, editors, &quot;;</span>
<span class="nc" id="L549">      result += getValue(Field.BOOKTITLE);</span>
      
<span class="nc bnc" id="L551" title="All 2 branches missed.">      if (exists(Field.ADDRESS))</span>
<span class="nc" id="L552">	result += &quot;, &quot; + getValue(Field.ADDRESS);</span>
<span class="nc bnc" id="L553" title="All 2 branches missed.">      if (exists(Field.PAGES))</span>
<span class="nc" id="L554">	result += &quot;, &quot; + getValue(Field.PAGES);</span>
	
<span class="nc bnc" id="L556" title="All 2 branches missed.">      if (exists(Field.YEAR))</span>
<span class="nc" id="L557">	result += &quot;, &quot; + getValue(Field.YEAR) + &quot;.&quot;;</span>
      else
<span class="nc" id="L559">	result += &quot;.&quot;;</span>
    }
    // default
    else {
<span class="nc bnc" id="L563" title="All 2 branches missed.">      for (i = 0; i &lt; authors.length; i++) {</span>
<span class="nc bnc" id="L564" title="All 2 branches missed.">	if (i &gt; 0)</span>
<span class="nc" id="L565">	  result += &quot;, &quot;;</span>
<span class="nc" id="L566">	result += authors[i];</span>
      }
<span class="nc bnc" id="L568" title="All 2 branches missed.">      if (exists(Field.YEAR))</span>
<span class="nc" id="L569">	result += &quot; (&quot; + getValue(Field.YEAR) + &quot;).&quot;;</span>
      else
<span class="nc" id="L571">	result += &quot;.&quot;;</span>
<span class="nc" id="L572">      result += &quot; &quot; + getValue(Field.TITLE) + &quot;.&quot;;</span>
<span class="nc bnc" id="L573" title="All 2 branches missed.">      if (exists(Field.ADDRESS))</span>
<span class="nc" id="L574">	result += &quot; &quot; + getValue(Field.ADDRESS) + &quot;.&quot;;</span>
<span class="nc bnc" id="L575" title="All 2 branches missed.">      if (exists(Field.URL))</span>
<span class="nc" id="L576">	result += &quot; URL &quot; + getValue(Field.URL) + &quot;.&quot;;</span>
    }
    
    // additional informations?
<span class="nc" id="L580">    enm = additional();</span>
<span class="nc bnc" id="L581" title="All 2 branches missed.">    while (enm.hasMoreElements()) {</span>
<span class="nc" id="L582">      result += &quot;\n\n&quot; + enm.nextElement().toString();</span>
    }
    
<span class="nc" id="L585">    return result;</span>
  }
  
  /**
   * Returns a BibTex string representing this technical information. 
   * Note: this is just a very raw implementation, special characters need to
   * be escaped manually for LaTeX.
   * 
   * @return		the BibTeX representation of this information
   */
  public String toBibTex() {
    String		result;
    Enumeration		enm;
    Field		field;
    Vector		list;
    int			i;
    String		value;
    
<span class="nc" id="L603">    result = &quot;@&quot; + getType() + &quot;{&quot; + getID() + &quot;&quot;;</span>
    
    // sort the fields
<span class="nc" id="L606">    list = new Vector();</span>
<span class="nc" id="L607">    enm  = fields();</span>
<span class="nc bnc" id="L608" title="All 2 branches missed.">    while (enm.hasMoreElements())</span>
<span class="nc" id="L609">      list.add(enm.nextElement());</span>
<span class="nc" id="L610">    Collections.sort(list);</span>
    
    // list field=value pairs
<span class="nc bnc" id="L613" title="All 2 branches missed.">    for (i = 0; i &lt; list.size(); i++) {</span>
<span class="nc" id="L614">      field = (Field) list.get(i);</span>
<span class="nc bnc" id="L615" title="All 2 branches missed.">      if (!exists(field))</span>
<span class="nc" id="L616">	continue;</span>
<span class="nc" id="L617">      value = getValue(field);</span>
<span class="nc" id="L618">      value = value.replaceAll(&quot;\\~&quot;, &quot;\\\\~&quot;);</span>
<span class="nc" id="L619">      result += &quot;,\n   &quot; + field + &quot; = {&quot; + value +  &quot;}&quot;;</span>
    }
    
<span class="nc" id="L622">    result += &quot;\n}&quot;;</span>
    
    // additional informations?
<span class="nc" id="L625">    enm = additional();</span>
<span class="nc bnc" id="L626" title="All 2 branches missed.">    while (enm.hasMoreElements()) {</span>
<span class="nc" id="L627">      result += &quot;\n\n&quot; + ((TechnicalInformation) enm.nextElement()).toBibTex();</span>
    }
    
<span class="nc" id="L630">    return result;</span>
  }
  
  /**
   * Returns the revision string.
   * 
   * @return		the revision
   */
  public String getRevision() {
<span class="nc" id="L639">    return RevisionUtils.extract(&quot;$Revision: 1.11 $&quot;);</span>
  }
  
  /**
   * Prints some examples of technical informations if there are no 
   * commandline options given. Otherwise the information of a given 
   * TechnicalInformationHandler can be printed. &lt;p/&gt;
   * 
   * Valid options are: &lt;p/&gt;
   * 
   * -W classname &lt;br/&gt;
   *  The classname of the TechnicalInformationHandler to print the 
   *  information for &lt;p/&gt;
   *  
   * -bibtex &lt;br/&gt;
   *  Print the information in BibTeX format &lt;p/&gt;
   *  
   * -plaintext &lt;br/&gt;
   *  Print the information in plain text format &lt;p/&gt;
   * 
   * @param args 	the commandline options
   * @throws Exception	if the option parsing fails
   */
  public static void main(String[] args) throws Exception {
    TechnicalInformation	info;
    TechnicalInformation	additional;
    String			tmpStr;
    Class			cls;
    TechnicalInformationHandler	handler;
    
    // example from command line
<span class="nc bnc" id="L670" title="All 2 branches missed.">    if (args.length != 0) {</span>
<span class="nc" id="L671">      info = null;</span>
      
<span class="nc" id="L673">      tmpStr = Utils.getOption('W', args);</span>
<span class="nc bnc" id="L674" title="All 2 branches missed.">      if (tmpStr.length() != 0) {</span>
<span class="nc" id="L675">	cls     = Class.forName(tmpStr);</span>
<span class="nc" id="L676">	handler = (TechnicalInformationHandler) cls.newInstance();</span>
<span class="nc" id="L677">	info    = handler.getTechnicalInformation();</span>
      }
      else {
<span class="nc" id="L680">	throw new IllegalArgumentException(&quot;A classname has to be provided with the -W option!&quot;);</span>
      }
      
<span class="nc bnc" id="L683" title="All 2 branches missed.">      if (Utils.getFlag(&quot;bibtex&quot;, args))</span>
<span class="nc" id="L684">        System.out.println(&quot;\n&quot; + handler.getClass().getName() + &quot;:\n&quot; + info.toBibTex());</span>

<span class="nc bnc" id="L686" title="All 2 branches missed.">      if (Utils.getFlag(&quot;plaintext&quot;, args))</span>
<span class="nc" id="L687">        System.out.println(&quot;\n&quot; + handler.getClass().getName() + &quot;:\n&quot; + info.toString());</span>
    }
    else {
      // first example
<span class="nc" id="L691">      info = new TechnicalInformation(Type.BOOK);</span>
<span class="nc" id="L692">      info.setValue(Field.AUTHOR, &quot;Ross Quinlan&quot;);</span>
<span class="nc" id="L693">      info.setValue(Field.YEAR, &quot;1993&quot;);</span>
<span class="nc" id="L694">      info.setValue(Field.TITLE, &quot;C4.5: Programs for Machine Learning&quot;);</span>
<span class="nc" id="L695">      info.setValue(Field.PUBLISHER, &quot;Morgan Kaufmann Publishers&quot;);</span>
<span class="nc" id="L696">      info.setValue(Field.ADDRESS, &quot;San Mateo, CA&quot;);</span>
<span class="nc" id="L697">      additional = info;</span>
      
<span class="nc" id="L699">      System.out.println(&quot;\ntoString():\n&quot; + info.toString());</span>
<span class="nc" id="L700">      System.out.println(&quot;\ntoBibTex():\n&quot; + info.toBibTex());</span>
      
      // second example
<span class="nc" id="L703">      info = new TechnicalInformation(Type.INPROCEEDINGS);</span>
<span class="nc" id="L704">      info.setValue(Field.AUTHOR, &quot;Freund, Y. and Mason, L.&quot;);</span>
<span class="nc" id="L705">      info.setValue(Field.YEAR, &quot;1999&quot;);</span>
<span class="nc" id="L706">      info.setValue(Field.TITLE, &quot;The alternating decision tree learning algorithm&quot;);</span>
<span class="nc" id="L707">      info.setValue(Field.BOOKTITLE, &quot;Proceeding of the Sixteenth International Conference on Machine Learning&quot;);</span>
<span class="nc" id="L708">      info.setValue(Field.ADDRESS, &quot;Bled, Slovenia&quot;);</span>
<span class="nc" id="L709">      info.setValue(Field.PAGES, &quot;124-133&quot;);</span>
      
<span class="nc" id="L711">      System.out.println(&quot;\ntoString():\n&quot; + info.toString());</span>
<span class="nc" id="L712">      System.out.println(&quot;\ntoBibTex():\n&quot; + info.toBibTex());</span>
      
      // third example
<span class="nc" id="L715">      info = new TechnicalInformation(Type.ARTICLE);</span>
<span class="nc" id="L716">      info.setValue(Field.AUTHOR, &quot;R. Quinlan&quot;);</span>
<span class="nc" id="L717">      info.setValue(Field.YEAR, &quot;1986&quot;);</span>
<span class="nc" id="L718">      info.setValue(Field.TITLE, &quot;Induction of decision trees&quot;);</span>
<span class="nc" id="L719">      info.setValue(Field.JOURNAL, &quot;Machine Learning&quot;);</span>
<span class="nc" id="L720">      info.setValue(Field.VOLUME, &quot;1&quot;);</span>
<span class="nc" id="L721">      info.setValue(Field.NUMBER, &quot;1&quot;);</span>
<span class="nc" id="L722">      info.setValue(Field.PAGES, &quot;81-106&quot;);</span>
      
<span class="nc" id="L724">      additional = new TechnicalInformation(Type.BOOK);</span>
<span class="nc" id="L725">      additional.setValue(Field.AUTHOR, &quot;Ross Quinlan&quot;);</span>
<span class="nc" id="L726">      additional.setValue(Field.YEAR, &quot;1993&quot;);</span>
<span class="nc" id="L727">      additional.setValue(Field.TITLE, &quot;C4.5: Programs for Machine Learning&quot;);</span>
<span class="nc" id="L728">      additional.setValue(Field.PUBLISHER, &quot;Morgan Kaufmann Publishers&quot;);</span>
<span class="nc" id="L729">      additional.setValue(Field.ADDRESS, &quot;San Mateo, CA&quot;);</span>
<span class="nc" id="L730">      info.add(additional);</span>
      
<span class="nc" id="L732">      System.out.println(&quot;\ntoString():\n&quot; + info.toString());</span>
<span class="nc" id="L733">      System.out.println(&quot;\ntoBibTex():\n&quot; + info.toBibTex());</span>
    }
<span class="nc" id="L735">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>AllTests (Nov 28, 2015 2:34:31 PM)</div></body></html>